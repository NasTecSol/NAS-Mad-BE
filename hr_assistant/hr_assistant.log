2025-05-30 16:14:48,473 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 16:14:48,474 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 16:17:03,332 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 16:17:03,333 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 16:25:57,664 - hr_assistant - WARNING - Vector search service not available: cannot import name 'VectorSearchService' from 'services.vector_search_service' (/Users/Danial/Development/NAS-Mad-BE/hr_assistant/services/vector_search_service.py)
2025-05-30 16:30:59,327 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 16:30:59,327 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 16:33:57,888 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 16:33:57,889 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 16:33:57,890 - hr_assistant - INFO - Employee module uses new self-initialization pattern
2025-05-30 16:36:48,430 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 16:36:48,431 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 16:36:48,431 - hr_assistant - INFO - Employee module uses new self-initialization pattern
2025-05-30 16:39:07,723 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 16:39:07,724 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 16:39:07,724 - hr_assistant - INFO - Employee module uses new self-initialization pattern
2025-05-30 16:39:37,211 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 16:39:37,212 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 16:39:37,213 - hr_assistant - INFO - Employee module uses new self-initialization pattern
2025-05-30 16:41:34,243 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 16:41:34,244 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 16:41:34,244 - hr_assistant - INFO - Employee module uses new self-initialization pattern
2025-05-30 16:43:54,694 - hr_assistant - INFO - Successfully connected to MongoDB
2025-05-30 16:43:54,695 - hr_assistant - WARNING - OpenAI client initialization failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 16:43:54,695 - hr_assistant - INFO - OpenAI initialized with legacy method
2025-05-30 16:43:54,695 - hr_assistant - INFO - OpenAI not available for query parsing, using rule-based parsing: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 16:43:54,695 - hr_assistant - INFO - Employee data query: 'get information for employee EMP103' from requester: EMP103
2025-05-30 16:43:55,885 - hr_assistant - INFO - Successfully connected to MongoDB
2025-05-30 16:43:55,886 - hr_assistant - INFO - MongoDB service initialized
2025-05-30 16:43:55,886 - hr_assistant - WARNING - OpenAI client initialization failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 16:43:55,886 - hr_assistant - INFO - OpenAI initialized with legacy method
2025-05-30 16:43:55,886 - hr_assistant - INFO - Vector search service initialized
2025-05-30 16:43:55,886 - hr_assistant - INFO - OpenAI not available for query parsing, using rule-based parsing: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 16:43:55,887 - hr_assistant - INFO - Query parser service initialized
2025-05-30 16:43:55,887 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:55,893 - hr_assistant - INFO - Parsed query: {'original_query': 'get information for employee EMP103', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'employee_id': 'EMP103'}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 16:43:56,205 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:43:56,267 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:43:56,394 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:43:56,395 - hr_assistant - INFO - Employee data query: 'get information for employee ABC200' from requester: EMP103
2025-05-30 16:43:56,395 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:56,395 - hr_assistant - INFO - Parsed query: {'original_query': 'get information for employee ABC200', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'employee_id': 'ABC200'}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 16:43:56,550 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:43:56,615 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:43:56,705 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:56,705 - hr_assistant - INFO - Using fallback text search for: get information for employee ABC200
2025-05-30 16:43:56,822 - hr_assistant - INFO - Regex search for 'get information for employee ABC200' returned 0 results
2025-05-30 16:43:56,934 - hr_assistant - INFO - Regex search for 'get information for employee ABC200' returned 0 results
2025-05-30 16:43:56,934 - hr_assistant - INFO - Employee data query: 'get information for employee QTG103' from requester: EMP103
2025-05-30 16:43:56,934 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:56,935 - hr_assistant - INFO - Parsed query: {'original_query': 'get information for employee QTG103', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'employee_id': 'QTG103'}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 16:43:57,131 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:43:57,279 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:43:57,336 - hr_assistant - WARNING - No employee found with ID: QTG103
2025-05-30 16:43:57,336 - hr_assistant - INFO - Using fallback text search for: get information for employee QTG103
2025-05-30 16:43:57,605 - hr_assistant - INFO - Regex search for 'get information for employee QTG103' returned 0 results
2025-05-30 16:43:57,766 - hr_assistant - INFO - Regex search for 'get information for employee QTG103' returned 0 results
2025-05-30 16:43:57,766 - hr_assistant - INFO - Employee data query: 'get information for employee INVALID123' from requester: EMP103
2025-05-30 16:43:57,766 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:57,767 - hr_assistant - INFO - Parsed query: {'original_query': 'get information for employee INVALID123', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'employee_id': 'INVALID123'}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 16:43:57,832 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:43:57,888 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:43:57,942 - hr_assistant - WARNING - No employee found with ID: INVALID123
2025-05-30 16:43:57,942 - hr_assistant - INFO - Using fallback text search for: get information for employee INVALID123
2025-05-30 16:43:58,140 - hr_assistant - INFO - Regex search for 'get information for employee INVALID123' returned 0 results
2025-05-30 16:43:58,336 - hr_assistant - INFO - Regex search for 'get information for employee INVALID123' returned 0 results
2025-05-30 16:43:58,337 - hr_assistant - INFO - Employee data query: 'find John Smith' from requester: ABC200
2025-05-30 16:43:58,337 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:58,337 - hr_assistant - INFO - Parsed query: {'original_query': 'find John Smith', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {'name': 'John Smith'}, 'data_requested': [], 'confidence': 0.4}
2025-05-30 16:43:58,481 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:58,481 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:43:58,482 - hr_assistant - INFO - Employee data query: 'show me Jane Smith's information' from requester: ABC200
2025-05-30 16:43:58,482 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:58,482 - hr_assistant - INFO - Parsed query: {'original_query': "show me Jane Smith's information", 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'name': 'Jane Smith', 'employee_id': 'ABC200', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 16:43:58,670 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:58,671 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:43:58,671 - hr_assistant - INFO - Employee data query: 'get Ahmed Al-Rashid details' from requester: ABC200
2025-05-30 16:43:58,671 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:58,671 - hr_assistant - INFO - Parsed query: {'original_query': 'get Ahmed Al-Rashid details', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'name': 'Ahmed Al'}, 'data_requested': [], 'confidence': 0.7}
2025-05-30 16:43:58,834 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:58,834 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:43:58,834 - hr_assistant - INFO - Employee data query: 'find employee named John' from requester: ABC200
2025-05-30 16:43:58,835 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:58,835 - hr_assistant - INFO - Parsed query: {'original_query': 'find employee named John', 'intent': <QueryIntent.SEARCH_EMPLOYEES: 'search_employees'>, 'parameters': {}, 'data_requested': [], 'confidence': 0.4}
2025-05-30 16:43:58,890 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:58,890 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:43:58,890 - hr_assistant - INFO - Employee data query: 'show me all software engineers' from requester: ABC200
2025-05-30 16:43:58,890 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:58,890 - hr_assistant - INFO - Parsed query: {'original_query': 'show me all software engineers', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {'employee_id': 'ABC200', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.5}
2025-05-30 16:43:58,948 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:58,949 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:43:58,949 - hr_assistant - INFO - Employee data query: 'find employees in Engineering department' from requester: ABC200
2025-05-30 16:43:58,949 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:58,949 - hr_assistant - INFO - Parsed query: {'original_query': 'find employees in Engineering department', 'intent': <QueryIntent.GET_DEPARTMENT_INFO: 'get_department_info'>, 'parameters': {'department': 'Engineering'}, 'data_requested': ['basic_info'], 'confidence': 0.5}
2025-05-30 16:43:59,003 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:59,003 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:43:59,003 - hr_assistant - INFO - Employee data query: 'list all HR managers' from requester: ABC200
2025-05-30 16:43:59,003 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:59,004 - hr_assistant - INFO - Parsed query: {'original_query': 'list all HR managers', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {'department': 'HR'}, 'data_requested': [], 'confidence': 0.2}
2025-05-30 16:43:59,163 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:59,163 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:43:59,163 - hr_assistant - INFO - Employee data query: 'show me technical leads from engineering' from requester: ABC200
2025-05-30 16:43:59,163 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:59,163 - hr_assistant - INFO - Parsed query: {'original_query': 'show me technical leads from engineering', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {'department': 'engineering', 'employee_id': 'ABC200', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.6}
2025-05-30 16:43:59,218 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:59,218 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:43:59,218 - hr_assistant - INFO - Employee data query: 'what is EMP103's salary?' from requester: EMP103
2025-05-30 16:43:59,218 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:59,219 - hr_assistant - INFO - Parsed query: {'original_query': "what is EMP103's salary?", 'intent': <QueryIntent.GET_SALARY_INFO: 'get_salary_info'>, 'parameters': {'employee_id': 'EMP103'}, 'data_requested': ['salary'], 'confidence': 0.7999999999999999}
2025-05-30 16:43:59,340 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:43:59,397 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:43:59,665 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:43:59,665 - hr_assistant - INFO - Employee data query: 'show me John Smith's compensation' from requester: ABC200
2025-05-30 16:43:59,665 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:59,666 - hr_assistant - INFO - Parsed query: {'original_query': "show me John Smith's compensation", 'intent': <QueryIntent.GET_SALARY_INFO: 'get_salary_info'>, 'parameters': {'name': 'John Smith', 'employee_id': 'ABC200', 'is_self_query': True}, 'data_requested': ['salary'], 'confidence': 0.7999999999999999}
2025-05-30 16:43:59,722 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:43:59,722 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:43:59,722 - hr_assistant - INFO - Employee data query: 'my salary information' from requester: EMP103
2025-05-30 16:43:59,723 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:43:59,723 - hr_assistant - INFO - Parsed query: {'original_query': 'my salary information', 'intent': <QueryIntent.GET_SALARY_INFO: 'get_salary_info'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': ['salary'], 'confidence': 0.7999999999999999}
2025-05-30 16:43:59,914 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:43:59,976 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:44:00,040 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:00,041 - hr_assistant - INFO - Employee data query: 'what is my salary?' from requester: QTG103
2025-05-30 16:44:00,041 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:00,041 - hr_assistant - INFO - Parsed query: {'original_query': 'what is my salary?', 'intent': <QueryIntent.GET_SALARY_INFO: 'get_salary_info'>, 'parameters': {'employee_id': 'QTG103', 'is_self_query': True}, 'data_requested': ['salary'], 'confidence': 0.7999999999999999}
2025-05-30 16:44:00,192 - hr_assistant - WARNING - No employee found with ID: QTG103
2025-05-30 16:44:00,192 - hr_assistant - WARNING - Requester QTG103 not found
2025-05-30 16:44:00,192 - hr_assistant - INFO - Employee data query: 'what is my leave balance?' from requester: EMP103
2025-05-30 16:44:00,192 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:00,193 - hr_assistant - INFO - Parsed query: {'original_query': 'what is my leave balance?', 'intent': <QueryIntent.GET_LEAVE_BALANCE: 'get_leave_balance'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': ['leave_balance'], 'confidence': 0.7999999999999999}
2025-05-30 16:44:00,267 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:00,374 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:44:00,438 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:00,438 - hr_assistant - INFO - Employee data query: 'show me EMP103 leave details' from requester: ABC200
2025-05-30 16:44:00,438 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:00,438 - hr_assistant - INFO - Parsed query: {'original_query': 'show me EMP103 leave details', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'employee_id': 'ABC200', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 16:44:00,732 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:00,732 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:00,732 - hr_assistant - INFO - Employee data query: 'how many annual leaves does John have?' from requester: ABC200
2025-05-30 16:44:00,732 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:00,732 - hr_assistant - INFO - Parsed query: {'original_query': 'how many annual leaves does John have?', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {}, 'data_requested': [], 'confidence': 0.1}
2025-05-30 16:44:00,787 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:00,787 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:00,787 - hr_assistant - INFO - Employee data query: 'show me ABC200 salary details' from requester: EMP103
2025-05-30 16:44:00,788 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:00,788 - hr_assistant - INFO - Parsed query: {'original_query': 'show me ABC200 salary details', 'intent': <QueryIntent.GET_SALARY_INFO: 'get_salary_info'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': ['salary'], 'confidence': 0.7999999999999999}
2025-05-30 16:44:00,922 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:00,979 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:44:01,039 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:01,039 - hr_assistant - INFO - Employee data query: 'show me EMP103 salary details' from requester: ABC200
2025-05-30 16:44:01,039 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:01,039 - hr_assistant - INFO - Parsed query: {'original_query': 'show me EMP103 salary details', 'intent': <QueryIntent.GET_SALARY_INFO: 'get_salary_info'>, 'parameters': {'employee_id': 'ABC200', 'is_self_query': True}, 'data_requested': ['salary'], 'confidence': 0.7999999999999999}
2025-05-30 16:44:01,095 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:01,095 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:01,095 - hr_assistant - INFO - Employee data query: 'what is my salary?' from requester: EMP103
2025-05-30 16:44:01,095 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:01,095 - hr_assistant - INFO - Parsed query: {'original_query': 'what is my salary?', 'intent': <QueryIntent.GET_SALARY_INFO: 'get_salary_info'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': ['salary'], 'confidence': 0.7999999999999999}
2025-05-30 16:44:01,242 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:01,298 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:44:01,431 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:01,432 - hr_assistant - INFO - Employee data query: 'show me QTG103 information' from requester: EMP103
2025-05-30 16:44:01,432 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:01,432 - hr_assistant - INFO - Parsed query: {'original_query': 'show me QTG103 information', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 16:44:01,497 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:01,631 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:44:01,762 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:01,762 - hr_assistant - INFO - Employee data query: 'find software developers with leadership experience' from requester: ABC200
2025-05-30 16:44:01,762 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:01,762 - hr_assistant - INFO - Parsed query: {'original_query': 'find software developers with leadership experience', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {}, 'data_requested': [], 'confidence': 0.1}
2025-05-30 16:44:01,820 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:01,820 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:01,820 - hr_assistant - INFO - Employee data query: 'show me employees similar to technical leads' from requester: ABC200
2025-05-30 16:44:01,820 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:01,820 - hr_assistant - INFO - Parsed query: {'original_query': 'show me employees similar to technical leads', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'employee_id': 'ABC200', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 16:44:01,960 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:01,960 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:01,960 - hr_assistant - INFO - Employee data query: 'find HR professionals' from requester: ABC200
2025-05-30 16:44:01,960 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:01,960 - hr_assistant - INFO - Parsed query: {'original_query': 'find HR professionals', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {'department': 'HR'}, 'data_requested': [], 'confidence': 0.2}
2025-05-30 16:44:02,015 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:02,015 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:02,015 - hr_assistant - INFO - Employee data query: 'get me senior level employees' from requester: ABC200
2025-05-30 16:44:02,015 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:02,016 - hr_assistant - INFO - Parsed query: {'original_query': 'get me senior level employees', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'role': 'senior', 'employee_id': 'ABC200', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.8999999999999999}
2025-05-30 16:44:02,072 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:02,072 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:02,072 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:02,127 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:02,127 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:02,127 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:02,182 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:02,182 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:02,182 - hr_assistant - INFO - Employee data query: 'show me EMP103 information' from requester: EMP103
2025-05-30 16:44:02,183 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:02,183 - hr_assistant - INFO - Parsed query: {'original_query': 'show me EMP103 information', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 16:44:02,298 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:02,355 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 16:44:02,477 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 16:44:02,477 - hr_assistant - INFO - Employee data query: 'what is ABC200's salary?' from requester: ABC200
2025-05-30 16:44:02,477 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:02,478 - hr_assistant - INFO - Parsed query: {'original_query': "what is ABC200's salary?", 'intent': <QueryIntent.GET_SALARY_INFO: 'get_salary_info'>, 'parameters': {'employee_id': 'ABC200'}, 'data_requested': ['salary'], 'confidence': 0.7999999999999999}
2025-05-30 16:44:02,532 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:02,532 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:44:02,533 - hr_assistant - INFO - Employee data query: 'my leave balance' from requester: QTG103
2025-05-30 16:44:02,533 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:02,533 - hr_assistant - INFO - Parsed query: {'original_query': 'my leave balance', 'intent': <QueryIntent.GET_LEAVE_BALANCE: 'get_leave_balance'>, 'parameters': {'employee_id': 'QTG103', 'is_self_query': True}, 'data_requested': ['leave_balance'], 'confidence': 0.7999999999999999}
2025-05-30 16:44:02,699 - hr_assistant - WARNING - No employee found with ID: QTG103
2025-05-30 16:44:02,699 - hr_assistant - WARNING - Requester QTG103 not found
2025-05-30 16:44:02,699 - hr_assistant - INFO - Employee data query: 'find all software engineers' from requester: ABC200
2025-05-30 16:44:02,699 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 16:44:02,699 - hr_assistant - INFO - Parsed query: {'original_query': 'find all software engineers', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {}, 'data_requested': [], 'confidence': 0.1}
2025-05-30 16:44:02,863 - hr_assistant - WARNING - No employee found with ID: ABC200
2025-05-30 16:44:02,864 - hr_assistant - WARNING - Requester ABC200 not found
2025-05-30 16:50:28,424 - hr_assistant - INFO - Successfully connected to MongoDB
2025-05-30 16:50:28,426 - hr_assistant - WARNING - OpenAI client initialization failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 16:50:28,426 - hr_assistant - INFO - OpenAI initialized with legacy method
2025-05-30 16:50:28,427 - hr_assistant - INFO - OpenAI not available for query parsing, using rule-based parsing: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 16:50:28,427 - hr_assistant - INFO - New services initialized successfully
2025-05-30 16:50:52,066 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 16:50:52,066 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-30 16:50:52,066 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-30 16:50:52,066 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-30 16:50:55,872 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-30 16:50:57,280 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1617.png'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-05-08T18:22:52.022Z', 'remoteLocation': {'lastLocation': '0.0,0.0', 'lastLocationUpdatedAt': '2025-05-08T18:22:52.022Z'}, 'embedding': [0.002205212, 0.00285921, -0.059483066, 0.019030724, 0.050706837, -0.01869734, 0.012920594, -0.001617878, -0.038660724, 0.06249923, 0.000777125, 0.026957497, 0.07338242, -0.031352155, -0.049548548, -0.010899217, 0.028730307, 0.03562604, -0.05738091, -0.032833878, -0.039503995, -0.002274718, 0.03257489, -0.0102704065, -0.012959295, -0.0051532383, 0.0013071707, -0.008692862, -0.04290293, -0.02073418, 0.030691944, 0.028072672, -0.05941178, -0.0003463132, 0.031903986, 0.006974004, -0.02387422, 0.0046408977, 0.008333496, -0.044026922, -0.009740245, -0.0064237486, 0.0019402984, 0.04388184, -0.06675343, 0.006636593, -0.04859796, -0.006202303, -0.046875235, 0.06744456, 0.08863753, 0.009302009, -0.007225605, 0.015915329, -0.013295711, -0.043277547, 0.004504701, -0.05025339, -0.052261032, -0.00048895896, 0.015875692, -0.013588414, -0.019038836, -0.065606266, 0.05160887, 0.015458598, -0.017000217, 0.03818617, -0.07518022, 0.031863466, -0.00607514, -0.022688726, -0.03057954, -0.0044976166, -0.02359274, -0.053374745, 0.00022307428, -0.07374233, 0.058230415, 0.06037047, -0.03276823, -0.0050179153, 0.048336893, 0.04433282, 0.026665268, 0.059834614, 0.02562604, -0.0623707, 0.008699851, 0.01709501, 0.11952662, 0.030067569, 0.006819686, -0.0135437315, 0.023264812, -0.045678727, -0.09871082, -0.075507835, 0.15884617, 0.026932815, 0.015900154, 0.015039173, 0.006541729, 0.035962623, 0.01675806, 0.0047552236, -0.081020795, -0.08034172, -0.04513326, -0.014393127, -0.027813198, -0.01142399, 0.02142499, -0.044262175, -0.010398603, 0.00247414, -0.01642532, -0.009459997, -0.03996089, 0.0656101, 0.025927866, -0.0075022904, -0.029373754, 0.05474576, 0.046424255, 0.02023116, 0.043019358, -0.010531643, -0.029622292, -0.015629409, 0.106638886, -0.030264309, -0.01662702, 0.0026821347, -0.070680834, -0.018871574, 0.04357191, -0.05919491, 0.020387223, -0.01612898, -0.0022312023, -0.042562477, -0.09765691, 0.07086077, -0.037498623, 0.003673292, -0.0014789666, 0.07510889, -0.010619753, -0.017924523, -0.002676995, 0.04776361, 0.04924764, 0.017654683, 0.007907522, -0.026155317, -0.0038855968, -0.050311428, 0.046426136, -0.014598353, 0.025916766, -0.043635577, -0.034040328, 0.007595149, -0.03865503, -0.014880088, -0.020611016, 0.0059195, -0.046619814, 0.030190958, -0.037327446, -0.025897749, -0.071250774, -0.013883153, 0.011393201, 0.06504889, -0.026741179, -0.056475986, 0.04888968, 0.0062058065, 0.030760124, 0.06595981, -0.03937182, -0.06854315, 0.0077646384, -0.01756428, -0.026998464, 0.050817776, 0.029169424, 0.033642042, 0.018854132, -0.022464061, 0.003840226, 0.058958087, -0.047273807, -0.020709628, -0.047979936, -0.028537001, 0.023346638, -0.04998974, 0.05343451, 0.038934257, -0.014376808, -0.047358304, 0.0019473117, 0.029409645, -0.042506568, 0.004011114, -0.014021531, -0.014381531, -0.014269692, -0.020249901, 0.030832484, -0.07642016, -0.0026038045, 0.037272472, 0.051614203, 0.012044262, 0.052521028, -0.03617593, 0.04055536, -0.004027521, 0.016730195, 0.041457765, -0.0038732889, 0.056133803, -0.062542446, -0.022353707, 0.06330804, -0.0060576596, -0.011066357, -0.042443935, 0.055803407, 0.038767766, -0.014718598, 0.023924444, -1.9789824e-05, -0.007739876, -0.046362527, -0.015765602, 0.015962284, 0.04973045, 0.041456964, 0.012699638, 0.05009221, 0.012051276, 0.074898146, 0.019731555, -0.011734199, -0.011661645, 0.0023040492, -0.019773332, -0.05066894, 0.009127933, -0.019998165, -0.036299594, -0.018391924, -0.0067880526, 0.02246822, -0.037592206, 0.068397075, 0.0073300553, 0.00041577793, -0.08359658, 0.014653357, -0.096273966, -0.041303296, 0.010342047, 0.048747532, -0.013436011, 0.04876754, -0.05170383, -0.00076579716, -0.0072609275, -0.0052444553, -0.00093792233, 0.0015273027, 0.019568363, -0.018718366, -0.047339823, 0.047667183, -0.039057665, 0.0011886429, 0.009722846, -0.006679693, -0.08177143, 0.01222316, 0.034308292, -0.033761535, -0.016829522, 0.037529435, 0.01803207, -0.0648394, 0.036310043, 0.021769151, 0.036896847, 0.029875515, 0.037497763, -0.004877638, -0.0042402497, 0.053173304, 0.020740403, -0.023285815, 0.03827156, 0.015417016, 0.00967715, -0.014138025, -0.0051836944, -0.06563142, -0.035070445, 0.022240903, -0.014125117, -0.020936709, -0.0327174, -0.030085174, 0.01255635, -0.16427214, 0.021860933, -0.0077079814, 0.024296112, 0.033821076, 0.018941693, -0.0063460995, -0.004685961, -0.013916018, 0.031645365, 0.0052287285, -0.02906917, 0.03217683, 0.041595247, 0.022953553, -0.020302651, 0.009174939, -0.06315438, 0.022216577, 0.03768549, -0.052169517, 0.021567846, 0.07788591, -0.0050195926, -0.008183276, -0.0102587, 0.06771711, 0.06323456, 0.0011603591, -0.05317066, 0.018945277, -0.0022143424, 0.01748997, -0.031482983, 0.030259205, 0.041263193, 0.05143827, -0.04730533, 0.006952777, 0.01529006, 0.038960807, -0.0038889046, 0.034462366, -0.013798745, 0.024104426, 0.042487435, -0.01129078, 0.03201121, -0.012329151, -0.0012934816, 0.00092693383, 0.02031288, 0.0071969293, -0.006472007, -0.018631374, -0.012993632, 0.017339818, -0.012965905, 0.005038055, -0.0021935846, -0.014685283, 0.003979586, -0.003916417, 0.0012786387, 0.019098746, -0.022586653, 0.04293155, 0.048421822, -0.019685091, 0.081391096, -0.07777315, -0.013351598, 0.02980831, -0.027211858, -0.028810736, 0.055679955, 0.034320198, -0.015921518, -0.04131677, 0.0583929, -0.0015555291, 0.050795756, 0.016211726, 0.0054898565, 0.025035612, -0.010023132, 0.04471724, -0.027703945, -0.0130786095, -0.031696297, 0.05089817, 0.0059649297, 0.045238774, 0.04450452, -0.0012574809, -0.035650663, -0.01537394, -0.006490433, 0.010037181, -0.026099509, 0.03332727, -0.034238726, -0.020362092, 0.024658814, -0.015854906, 0.03548635, 0.010260863, -0.03981858, 0.06611227, -0.07921888, -0.028015364, 0.020619363, 0.022970656, -0.006928849, 0.004360248, 0.012065512, -0.0071472516, 0.032154527, -0.029890727, 0.034580946, -0.0053927777, -0.037641943, 0.005139052, -0.0041534943, 0.0015794508, 0.018822584, 0.054768365, 0.033303175, -0.0033839555, 0.007818507, 0.03240108, 0.02706343, -0.035166375, -0.014723804, 0.019960923, -0.0039956765, -0.003445905, -0.02383298, -0.020501124, 0.018130424, 0.025223408, 0.038457364, -0.0484456, -0.02353034, -0.036428187, -0.037467483, 0.03250683, 0.055204924, -0.0021467663, 0.021278132, 0.005784253, 0.03362573, -0.016187964, 0.03530381, 0.040686704, -0.018550027, 0.035161074, -0.016902454, -0.055259794, 0.0131223295, 0.04700162, 0.03929324, -0.061401185, -0.049154602, -0.047035724, 0.018856961, -0.0074210567, 0.04315922, 0.054031435, -0.029086558, -0.039639965, 0.007671103, 0.0023044006, 0.0025197256, -0.023725554, 0.03465643, -0.039490458, 0.0047906092, 0.009959909, -0.024294745, 0.047831047, -0.029961823, -0.021507444, 0.045742493, 0.06912992, 0.0545993, -0.021282349, -0.01951858, -0.05659222, 0.01832819, -0.036865667, 0.04102405, 0.058882542, 0.017965797, 0.032373004, -0.010963981, 0.04952352, 0.020704377, -0.01738575, -0.01682206, -0.042813253, -0.0040368577, 0.025521154, 0.01090064, -0.03274211, -0.04198018, -0.0487083, 0.0152567, 0.042214513, -0.017050149, 0.022788655, 0.008570806, 0.03530945, -0.008368085, -0.029850854, 0.08104423, 0.049656894, 0.04936958, 0.033732872, 0.07937448, 0.012000559, 0.052216172, 0.039146706, -0.007047631, -0.0013768731, 0.015724335, 0.0381525, 0.017061293, 0.015585088, 0.050621245, -0.0027336623, 0.028795406, 0.0085211685, 0.09262725, 0.0032820753, -0.023974173, -0.032783743, -0.022499016, 0.016418226, -0.020218307, 0.012576636, -0.01087612, -0.059496906, 0.0128563875, 0.0025499468, -0.016720273, -0.026636017, 0.02936531, 0.009829779, -0.03352291, -0.021941414, 0.08802833, 0.0052335807, 0.051597912, 0.039014686, -0.036561158, 0.044466008, -0.0041561, 0.023762226, -0.023993677, -0.04097535, -0.025920412, 0.023075942, -0.022476664, 0.0015394227, 0.035389144, 0.02254812, 0.0038311528, 0.07253486, -0.019707456, 0.010106696, 0.025517022, 0.004364208, -0.008170654, 0.0016817425, 0.011208583, 0.019563869, -0.02868615, 0.037688937, 0.020283507, -0.015647411, -0.026917338, 0.045680616, -0.028692853, -0.01104029, 0.007360831, 0.06532814, -0.009093374, -0.027484516, -0.035384133, -0.024118671, -0.059769537, 0.018281808, 0.0021237058, 0.01071852, 0.00032055264, -0.049318615, -0.0002597951, -0.08600135, -0.03106611, 0.02065796, 0.018991841, 0.00018441059, 0.003550499, -0.010450337, -0.0062490376, 0.047152307, -0.03969871, 0.0016933344, 0.009327735, -0.03492172, -0.0052903653, 0.03294722, -0.043872867, 0.017344892, 0.037879355, 0.077939354, -0.044055685, 0.0031824554, 0.033066157, -0.028475912, -0.0044136797, 0.08309093, -0.035525717, 0.00163906, 0.021723129, 0.041331135, 0.04676286, -0.041847788, 0.039305594, 0.060223036, -0.0072911982, -0.01308596, 0.056757923, 0.009157886, 0.05246784, -0.024124123, -0.017324153, -0.019909194, -0.007549678, -0.033312835, 0.03638511, 0.010868866, 0.009606072, -0.026420288, -0.017497981, -0.0047282223, 0.02541612, -0.032167014, -0.0076316157, -0.05621701, 0.022456747, -0.013611441, 0.00017310606, 0.038680002, -0.048038647, -0.0041150083, 0.019668974, -0.0019520354, -0.05832844, 0.025233593, -0.015814308, -0.0045183217, -0.035136122, 0.010597112, -0.005170696, 0.013873066, -0.03892953, 0.001845214, -0.022829685, 0.04492269, -0.04234643, -0.01509783, -0.044912063, 0.014122962, -0.014328425, -0.015035797, 0.01225091, -0.022465952, 0.034727268, 0.013187503, 0.037632942, -0.029831817, -0.014022417, -0.0063450565, 0.035489038, -0.053074796, -0.009871067, -0.010888838, -0.014599871, 0.0043528136, 0.011015819, -0.0333024, 0.01348302, -0.035098188, -0.02600979, 0.021390723, -0.010300852, 0.044137634, -0.017464014, 0.036167074, 0.06421815, -0.0012345362, 0.05772093, -0.030202858, 0.0031121534, 0.07287807, 0.0260139, 0.016208228, -0.05357747, -0.01843162, -0.050125077, -0.009443709, 0.018686816, 0.01317159, 0.04029161, -0.020993758, 0.039224792, 0.019699523, -0.04246284, -0.026467694, -0.017308662, 0.0075215, -0.038201164, 0.07427193, 0.013118963, -0.06723887, -0.011837352, -0.0037534041, -0.0041227355, 0.01060785, -0.010905287, -0.025766818, -0.08649361, -0.04698203, -0.03211341, 0.015263274, -0.033745244, 0.01925663, -0.024861852, 0.034865323, -0.056400735, 0.038740758, 0.017356595, -0.09925265, 0.047755085, -0.011859279, -0.0072105015, -0.018558588, 0.009293071, 0.03965552, 0.020692462], 'updated_at': '2025-05-28T15:42:35.362Z'}
2025-05-30 16:50:57,281 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-30 16:50:57,282 - hr_assistant - INFO - Processing query for employee EMP103: What is my leave balance?
2025-05-30 16:50:57,282 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-30 16:50:57,283 - hr_assistant - ERROR - Error generating response: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 16:54:02,358 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 16:54:02,359 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-30 16:54:02,359 - hr_assistant - INFO - Processing query for employee EMP103: 
2025-05-30 16:54:02,359 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-30 16:54:02,359 - hr_assistant - ERROR - Error generating response: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:03:12,521 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 17:03:12,522 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 17:03:12,522 - hr_assistant - INFO - Employee module uses new self-initialization pattern
2025-05-30 17:03:16,485 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 17:03:16,485 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-30 17:03:16,485 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-30 17:03:16,485 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-30 17:03:18,288 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-30 17:03:19,671 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1617.png'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-05-08T18:22:52.022Z', 'remoteLocation': {'lastLocation': '0.0,0.0', 'lastLocationUpdatedAt': '2025-05-08T18:22:52.022Z'}, 'embedding': [0.002205212, 0.00285921, -0.059483066, 0.019030724, 0.050706837, -0.01869734, 0.012920594, -0.001617878, -0.038660724, 0.06249923, 0.000777125, 0.026957497, 0.07338242, -0.031352155, -0.049548548, -0.010899217, 0.028730307, 0.03562604, -0.05738091, -0.032833878, -0.039503995, -0.002274718, 0.03257489, -0.0102704065, -0.012959295, -0.0051532383, 0.0013071707, -0.008692862, -0.04290293, -0.02073418, 0.030691944, 0.028072672, -0.05941178, -0.0003463132, 0.031903986, 0.006974004, -0.02387422, 0.0046408977, 0.008333496, -0.044026922, -0.009740245, -0.0064237486, 0.0019402984, 0.04388184, -0.06675343, 0.006636593, -0.04859796, -0.006202303, -0.046875235, 0.06744456, 0.08863753, 0.009302009, -0.007225605, 0.015915329, -0.013295711, -0.043277547, 0.004504701, -0.05025339, -0.052261032, -0.00048895896, 0.015875692, -0.013588414, -0.019038836, -0.065606266, 0.05160887, 0.015458598, -0.017000217, 0.03818617, -0.07518022, 0.031863466, -0.00607514, -0.022688726, -0.03057954, -0.0044976166, -0.02359274, -0.053374745, 0.00022307428, -0.07374233, 0.058230415, 0.06037047, -0.03276823, -0.0050179153, 0.048336893, 0.04433282, 0.026665268, 0.059834614, 0.02562604, -0.0623707, 0.008699851, 0.01709501, 0.11952662, 0.030067569, 0.006819686, -0.0135437315, 0.023264812, -0.045678727, -0.09871082, -0.075507835, 0.15884617, 0.026932815, 0.015900154, 0.015039173, 0.006541729, 0.035962623, 0.01675806, 0.0047552236, -0.081020795, -0.08034172, -0.04513326, -0.014393127, -0.027813198, -0.01142399, 0.02142499, -0.044262175, -0.010398603, 0.00247414, -0.01642532, -0.009459997, -0.03996089, 0.0656101, 0.025927866, -0.0075022904, -0.029373754, 0.05474576, 0.046424255, 0.02023116, 0.043019358, -0.010531643, -0.029622292, -0.015629409, 0.106638886, -0.030264309, -0.01662702, 0.0026821347, -0.070680834, -0.018871574, 0.04357191, -0.05919491, 0.020387223, -0.01612898, -0.0022312023, -0.042562477, -0.09765691, 0.07086077, -0.037498623, 0.003673292, -0.0014789666, 0.07510889, -0.010619753, -0.017924523, -0.002676995, 0.04776361, 0.04924764, 0.017654683, 0.007907522, -0.026155317, -0.0038855968, -0.050311428, 0.046426136, -0.014598353, 0.025916766, -0.043635577, -0.034040328, 0.007595149, -0.03865503, -0.014880088, -0.020611016, 0.0059195, -0.046619814, 0.030190958, -0.037327446, -0.025897749, -0.071250774, -0.013883153, 0.011393201, 0.06504889, -0.026741179, -0.056475986, 0.04888968, 0.0062058065, 0.030760124, 0.06595981, -0.03937182, -0.06854315, 0.0077646384, -0.01756428, -0.026998464, 0.050817776, 0.029169424, 0.033642042, 0.018854132, -0.022464061, 0.003840226, 0.058958087, -0.047273807, -0.020709628, -0.047979936, -0.028537001, 0.023346638, -0.04998974, 0.05343451, 0.038934257, -0.014376808, -0.047358304, 0.0019473117, 0.029409645, -0.042506568, 0.004011114, -0.014021531, -0.014381531, -0.014269692, -0.020249901, 0.030832484, -0.07642016, -0.0026038045, 0.037272472, 0.051614203, 0.012044262, 0.052521028, -0.03617593, 0.04055536, -0.004027521, 0.016730195, 0.041457765, -0.0038732889, 0.056133803, -0.062542446, -0.022353707, 0.06330804, -0.0060576596, -0.011066357, -0.042443935, 0.055803407, 0.038767766, -0.014718598, 0.023924444, -1.9789824e-05, -0.007739876, -0.046362527, -0.015765602, 0.015962284, 0.04973045, 0.041456964, 0.012699638, 0.05009221, 0.012051276, 0.074898146, 0.019731555, -0.011734199, -0.011661645, 0.0023040492, -0.019773332, -0.05066894, 0.009127933, -0.019998165, -0.036299594, -0.018391924, -0.0067880526, 0.02246822, -0.037592206, 0.068397075, 0.0073300553, 0.00041577793, -0.08359658, 0.014653357, -0.096273966, -0.041303296, 0.010342047, 0.048747532, -0.013436011, 0.04876754, -0.05170383, -0.00076579716, -0.0072609275, -0.0052444553, -0.00093792233, 0.0015273027, 0.019568363, -0.018718366, -0.047339823, 0.047667183, -0.039057665, 0.0011886429, 0.009722846, -0.006679693, -0.08177143, 0.01222316, 0.034308292, -0.033761535, -0.016829522, 0.037529435, 0.01803207, -0.0648394, 0.036310043, 0.021769151, 0.036896847, 0.029875515, 0.037497763, -0.004877638, -0.0042402497, 0.053173304, 0.020740403, -0.023285815, 0.03827156, 0.015417016, 0.00967715, -0.014138025, -0.0051836944, -0.06563142, -0.035070445, 0.022240903, -0.014125117, -0.020936709, -0.0327174, -0.030085174, 0.01255635, -0.16427214, 0.021860933, -0.0077079814, 0.024296112, 0.033821076, 0.018941693, -0.0063460995, -0.004685961, -0.013916018, 0.031645365, 0.0052287285, -0.02906917, 0.03217683, 0.041595247, 0.022953553, -0.020302651, 0.009174939, -0.06315438, 0.022216577, 0.03768549, -0.052169517, 0.021567846, 0.07788591, -0.0050195926, -0.008183276, -0.0102587, 0.06771711, 0.06323456, 0.0011603591, -0.05317066, 0.018945277, -0.0022143424, 0.01748997, -0.031482983, 0.030259205, 0.041263193, 0.05143827, -0.04730533, 0.006952777, 0.01529006, 0.038960807, -0.0038889046, 0.034462366, -0.013798745, 0.024104426, 0.042487435, -0.01129078, 0.03201121, -0.012329151, -0.0012934816, 0.00092693383, 0.02031288, 0.0071969293, -0.006472007, -0.018631374, -0.012993632, 0.017339818, -0.012965905, 0.005038055, -0.0021935846, -0.014685283, 0.003979586, -0.003916417, 0.0012786387, 0.019098746, -0.022586653, 0.04293155, 0.048421822, -0.019685091, 0.081391096, -0.07777315, -0.013351598, 0.02980831, -0.027211858, -0.028810736, 0.055679955, 0.034320198, -0.015921518, -0.04131677, 0.0583929, -0.0015555291, 0.050795756, 0.016211726, 0.0054898565, 0.025035612, -0.010023132, 0.04471724, -0.027703945, -0.0130786095, -0.031696297, 0.05089817, 0.0059649297, 0.045238774, 0.04450452, -0.0012574809, -0.035650663, -0.01537394, -0.006490433, 0.010037181, -0.026099509, 0.03332727, -0.034238726, -0.020362092, 0.024658814, -0.015854906, 0.03548635, 0.010260863, -0.03981858, 0.06611227, -0.07921888, -0.028015364, 0.020619363, 0.022970656, -0.006928849, 0.004360248, 0.012065512, -0.0071472516, 0.032154527, -0.029890727, 0.034580946, -0.0053927777, -0.037641943, 0.005139052, -0.0041534943, 0.0015794508, 0.018822584, 0.054768365, 0.033303175, -0.0033839555, 0.007818507, 0.03240108, 0.02706343, -0.035166375, -0.014723804, 0.019960923, -0.0039956765, -0.003445905, -0.02383298, -0.020501124, 0.018130424, 0.025223408, 0.038457364, -0.0484456, -0.02353034, -0.036428187, -0.037467483, 0.03250683, 0.055204924, -0.0021467663, 0.021278132, 0.005784253, 0.03362573, -0.016187964, 0.03530381, 0.040686704, -0.018550027, 0.035161074, -0.016902454, -0.055259794, 0.0131223295, 0.04700162, 0.03929324, -0.061401185, -0.049154602, -0.047035724, 0.018856961, -0.0074210567, 0.04315922, 0.054031435, -0.029086558, -0.039639965, 0.007671103, 0.0023044006, 0.0025197256, -0.023725554, 0.03465643, -0.039490458, 0.0047906092, 0.009959909, -0.024294745, 0.047831047, -0.029961823, -0.021507444, 0.045742493, 0.06912992, 0.0545993, -0.021282349, -0.01951858, -0.05659222, 0.01832819, -0.036865667, 0.04102405, 0.058882542, 0.017965797, 0.032373004, -0.010963981, 0.04952352, 0.020704377, -0.01738575, -0.01682206, -0.042813253, -0.0040368577, 0.025521154, 0.01090064, -0.03274211, -0.04198018, -0.0487083, 0.0152567, 0.042214513, -0.017050149, 0.022788655, 0.008570806, 0.03530945, -0.008368085, -0.029850854, 0.08104423, 0.049656894, 0.04936958, 0.033732872, 0.07937448, 0.012000559, 0.052216172, 0.039146706, -0.007047631, -0.0013768731, 0.015724335, 0.0381525, 0.017061293, 0.015585088, 0.050621245, -0.0027336623, 0.028795406, 0.0085211685, 0.09262725, 0.0032820753, -0.023974173, -0.032783743, -0.022499016, 0.016418226, -0.020218307, 0.012576636, -0.01087612, -0.059496906, 0.0128563875, 0.0025499468, -0.016720273, -0.026636017, 0.02936531, 0.009829779, -0.03352291, -0.021941414, 0.08802833, 0.0052335807, 0.051597912, 0.039014686, -0.036561158, 0.044466008, -0.0041561, 0.023762226, -0.023993677, -0.04097535, -0.025920412, 0.023075942, -0.022476664, 0.0015394227, 0.035389144, 0.02254812, 0.0038311528, 0.07253486, -0.019707456, 0.010106696, 0.025517022, 0.004364208, -0.008170654, 0.0016817425, 0.011208583, 0.019563869, -0.02868615, 0.037688937, 0.020283507, -0.015647411, -0.026917338, 0.045680616, -0.028692853, -0.01104029, 0.007360831, 0.06532814, -0.009093374, -0.027484516, -0.035384133, -0.024118671, -0.059769537, 0.018281808, 0.0021237058, 0.01071852, 0.00032055264, -0.049318615, -0.0002597951, -0.08600135, -0.03106611, 0.02065796, 0.018991841, 0.00018441059, 0.003550499, -0.010450337, -0.0062490376, 0.047152307, -0.03969871, 0.0016933344, 0.009327735, -0.03492172, -0.0052903653, 0.03294722, -0.043872867, 0.017344892, 0.037879355, 0.077939354, -0.044055685, 0.0031824554, 0.033066157, -0.028475912, -0.0044136797, 0.08309093, -0.035525717, 0.00163906, 0.021723129, 0.041331135, 0.04676286, -0.041847788, 0.039305594, 0.060223036, -0.0072911982, -0.01308596, 0.056757923, 0.009157886, 0.05246784, -0.024124123, -0.017324153, -0.019909194, -0.007549678, -0.033312835, 0.03638511, 0.010868866, 0.009606072, -0.026420288, -0.017497981, -0.0047282223, 0.02541612, -0.032167014, -0.0076316157, -0.05621701, 0.022456747, -0.013611441, 0.00017310606, 0.038680002, -0.048038647, -0.0041150083, 0.019668974, -0.0019520354, -0.05832844, 0.025233593, -0.015814308, -0.0045183217, -0.035136122, 0.010597112, -0.005170696, 0.013873066, -0.03892953, 0.001845214, -0.022829685, 0.04492269, -0.04234643, -0.01509783, -0.044912063, 0.014122962, -0.014328425, -0.015035797, 0.01225091, -0.022465952, 0.034727268, 0.013187503, 0.037632942, -0.029831817, -0.014022417, -0.0063450565, 0.035489038, -0.053074796, -0.009871067, -0.010888838, -0.014599871, 0.0043528136, 0.011015819, -0.0333024, 0.01348302, -0.035098188, -0.02600979, 0.021390723, -0.010300852, 0.044137634, -0.017464014, 0.036167074, 0.06421815, -0.0012345362, 0.05772093, -0.030202858, 0.0031121534, 0.07287807, 0.0260139, 0.016208228, -0.05357747, -0.01843162, -0.050125077, -0.009443709, 0.018686816, 0.01317159, 0.04029161, -0.020993758, 0.039224792, 0.019699523, -0.04246284, -0.026467694, -0.017308662, 0.0075215, -0.038201164, 0.07427193, 0.013118963, -0.06723887, -0.011837352, -0.0037534041, -0.0041227355, 0.01060785, -0.010905287, -0.025766818, -0.08649361, -0.04698203, -0.03211341, 0.015263274, -0.033745244, 0.01925663, -0.024861852, 0.034865323, -0.056400735, 0.038740758, 0.017356595, -0.09925265, 0.047755085, -0.011859279, -0.0072105015, -0.018558588, 0.009293071, 0.03965552, 0.020692462], 'updated_at': '2025-05-28T15:42:35.362Z'}
2025-05-30 17:03:19,672 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-30 17:03:19,673 - hr_assistant - INFO - Processing query for employee EMP103: 
2025-05-30 17:03:19,673 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-30 17:03:19,673 - hr_assistant - ERROR - Error generating response: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:09:37,554 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 17:09:37,555 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 17:09:37,555 - hr_assistant - INFO - Employee module uses new self-initialization pattern
2025-05-30 17:10:34,213 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 17:10:34,214 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 17:10:34,214 - hr_assistant - INFO - Employee module uses new self-initialization pattern
2025-05-30 17:10:45,591 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 17:10:45,591 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-30 17:10:45,591 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-30 17:10:45,591 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-30 17:10:47,881 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-30 17:10:49,272 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1617.png'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-05-08T18:22:52.022Z', 'remoteLocation': {'lastLocation': '0.0,0.0', 'lastLocationUpdatedAt': '2025-05-08T18:22:52.022Z'}, 'embedding': [0.002205212, 0.00285921, -0.059483066, 0.019030724, 0.050706837, -0.01869734, 0.012920594, -0.001617878, -0.038660724, 0.06249923, 0.000777125, 0.026957497, 0.07338242, -0.031352155, -0.049548548, -0.010899217, 0.028730307, 0.03562604, -0.05738091, -0.032833878, -0.039503995, -0.002274718, 0.03257489, -0.0102704065, -0.012959295, -0.0051532383, 0.0013071707, -0.008692862, -0.04290293, -0.02073418, 0.030691944, 0.028072672, -0.05941178, -0.0003463132, 0.031903986, 0.006974004, -0.02387422, 0.0046408977, 0.008333496, -0.044026922, -0.009740245, -0.0064237486, 0.0019402984, 0.04388184, -0.06675343, 0.006636593, -0.04859796, -0.006202303, -0.046875235, 0.06744456, 0.08863753, 0.009302009, -0.007225605, 0.015915329, -0.013295711, -0.043277547, 0.004504701, -0.05025339, -0.052261032, -0.00048895896, 0.015875692, -0.013588414, -0.019038836, -0.065606266, 0.05160887, 0.015458598, -0.017000217, 0.03818617, -0.07518022, 0.031863466, -0.00607514, -0.022688726, -0.03057954, -0.0044976166, -0.02359274, -0.053374745, 0.00022307428, -0.07374233, 0.058230415, 0.06037047, -0.03276823, -0.0050179153, 0.048336893, 0.04433282, 0.026665268, 0.059834614, 0.02562604, -0.0623707, 0.008699851, 0.01709501, 0.11952662, 0.030067569, 0.006819686, -0.0135437315, 0.023264812, -0.045678727, -0.09871082, -0.075507835, 0.15884617, 0.026932815, 0.015900154, 0.015039173, 0.006541729, 0.035962623, 0.01675806, 0.0047552236, -0.081020795, -0.08034172, -0.04513326, -0.014393127, -0.027813198, -0.01142399, 0.02142499, -0.044262175, -0.010398603, 0.00247414, -0.01642532, -0.009459997, -0.03996089, 0.0656101, 0.025927866, -0.0075022904, -0.029373754, 0.05474576, 0.046424255, 0.02023116, 0.043019358, -0.010531643, -0.029622292, -0.015629409, 0.106638886, -0.030264309, -0.01662702, 0.0026821347, -0.070680834, -0.018871574, 0.04357191, -0.05919491, 0.020387223, -0.01612898, -0.0022312023, -0.042562477, -0.09765691, 0.07086077, -0.037498623, 0.003673292, -0.0014789666, 0.07510889, -0.010619753, -0.017924523, -0.002676995, 0.04776361, 0.04924764, 0.017654683, 0.007907522, -0.026155317, -0.0038855968, -0.050311428, 0.046426136, -0.014598353, 0.025916766, -0.043635577, -0.034040328, 0.007595149, -0.03865503, -0.014880088, -0.020611016, 0.0059195, -0.046619814, 0.030190958, -0.037327446, -0.025897749, -0.071250774, -0.013883153, 0.011393201, 0.06504889, -0.026741179, -0.056475986, 0.04888968, 0.0062058065, 0.030760124, 0.06595981, -0.03937182, -0.06854315, 0.0077646384, -0.01756428, -0.026998464, 0.050817776, 0.029169424, 0.033642042, 0.018854132, -0.022464061, 0.003840226, 0.058958087, -0.047273807, -0.020709628, -0.047979936, -0.028537001, 0.023346638, -0.04998974, 0.05343451, 0.038934257, -0.014376808, -0.047358304, 0.0019473117, 0.029409645, -0.042506568, 0.004011114, -0.014021531, -0.014381531, -0.014269692, -0.020249901, 0.030832484, -0.07642016, -0.0026038045, 0.037272472, 0.051614203, 0.012044262, 0.052521028, -0.03617593, 0.04055536, -0.004027521, 0.016730195, 0.041457765, -0.0038732889, 0.056133803, -0.062542446, -0.022353707, 0.06330804, -0.0060576596, -0.011066357, -0.042443935, 0.055803407, 0.038767766, -0.014718598, 0.023924444, -1.9789824e-05, -0.007739876, -0.046362527, -0.015765602, 0.015962284, 0.04973045, 0.041456964, 0.012699638, 0.05009221, 0.012051276, 0.074898146, 0.019731555, -0.011734199, -0.011661645, 0.0023040492, -0.019773332, -0.05066894, 0.009127933, -0.019998165, -0.036299594, -0.018391924, -0.0067880526, 0.02246822, -0.037592206, 0.068397075, 0.0073300553, 0.00041577793, -0.08359658, 0.014653357, -0.096273966, -0.041303296, 0.010342047, 0.048747532, -0.013436011, 0.04876754, -0.05170383, -0.00076579716, -0.0072609275, -0.0052444553, -0.00093792233, 0.0015273027, 0.019568363, -0.018718366, -0.047339823, 0.047667183, -0.039057665, 0.0011886429, 0.009722846, -0.006679693, -0.08177143, 0.01222316, 0.034308292, -0.033761535, -0.016829522, 0.037529435, 0.01803207, -0.0648394, 0.036310043, 0.021769151, 0.036896847, 0.029875515, 0.037497763, -0.004877638, -0.0042402497, 0.053173304, 0.020740403, -0.023285815, 0.03827156, 0.015417016, 0.00967715, -0.014138025, -0.0051836944, -0.06563142, -0.035070445, 0.022240903, -0.014125117, -0.020936709, -0.0327174, -0.030085174, 0.01255635, -0.16427214, 0.021860933, -0.0077079814, 0.024296112, 0.033821076, 0.018941693, -0.0063460995, -0.004685961, -0.013916018, 0.031645365, 0.0052287285, -0.02906917, 0.03217683, 0.041595247, 0.022953553, -0.020302651, 0.009174939, -0.06315438, 0.022216577, 0.03768549, -0.052169517, 0.021567846, 0.07788591, -0.0050195926, -0.008183276, -0.0102587, 0.06771711, 0.06323456, 0.0011603591, -0.05317066, 0.018945277, -0.0022143424, 0.01748997, -0.031482983, 0.030259205, 0.041263193, 0.05143827, -0.04730533, 0.006952777, 0.01529006, 0.038960807, -0.0038889046, 0.034462366, -0.013798745, 0.024104426, 0.042487435, -0.01129078, 0.03201121, -0.012329151, -0.0012934816, 0.00092693383, 0.02031288, 0.0071969293, -0.006472007, -0.018631374, -0.012993632, 0.017339818, -0.012965905, 0.005038055, -0.0021935846, -0.014685283, 0.003979586, -0.003916417, 0.0012786387, 0.019098746, -0.022586653, 0.04293155, 0.048421822, -0.019685091, 0.081391096, -0.07777315, -0.013351598, 0.02980831, -0.027211858, -0.028810736, 0.055679955, 0.034320198, -0.015921518, -0.04131677, 0.0583929, -0.0015555291, 0.050795756, 0.016211726, 0.0054898565, 0.025035612, -0.010023132, 0.04471724, -0.027703945, -0.0130786095, -0.031696297, 0.05089817, 0.0059649297, 0.045238774, 0.04450452, -0.0012574809, -0.035650663, -0.01537394, -0.006490433, 0.010037181, -0.026099509, 0.03332727, -0.034238726, -0.020362092, 0.024658814, -0.015854906, 0.03548635, 0.010260863, -0.03981858, 0.06611227, -0.07921888, -0.028015364, 0.020619363, 0.022970656, -0.006928849, 0.004360248, 0.012065512, -0.0071472516, 0.032154527, -0.029890727, 0.034580946, -0.0053927777, -0.037641943, 0.005139052, -0.0041534943, 0.0015794508, 0.018822584, 0.054768365, 0.033303175, -0.0033839555, 0.007818507, 0.03240108, 0.02706343, -0.035166375, -0.014723804, 0.019960923, -0.0039956765, -0.003445905, -0.02383298, -0.020501124, 0.018130424, 0.025223408, 0.038457364, -0.0484456, -0.02353034, -0.036428187, -0.037467483, 0.03250683, 0.055204924, -0.0021467663, 0.021278132, 0.005784253, 0.03362573, -0.016187964, 0.03530381, 0.040686704, -0.018550027, 0.035161074, -0.016902454, -0.055259794, 0.0131223295, 0.04700162, 0.03929324, -0.061401185, -0.049154602, -0.047035724, 0.018856961, -0.0074210567, 0.04315922, 0.054031435, -0.029086558, -0.039639965, 0.007671103, 0.0023044006, 0.0025197256, -0.023725554, 0.03465643, -0.039490458, 0.0047906092, 0.009959909, -0.024294745, 0.047831047, -0.029961823, -0.021507444, 0.045742493, 0.06912992, 0.0545993, -0.021282349, -0.01951858, -0.05659222, 0.01832819, -0.036865667, 0.04102405, 0.058882542, 0.017965797, 0.032373004, -0.010963981, 0.04952352, 0.020704377, -0.01738575, -0.01682206, -0.042813253, -0.0040368577, 0.025521154, 0.01090064, -0.03274211, -0.04198018, -0.0487083, 0.0152567, 0.042214513, -0.017050149, 0.022788655, 0.008570806, 0.03530945, -0.008368085, -0.029850854, 0.08104423, 0.049656894, 0.04936958, 0.033732872, 0.07937448, 0.012000559, 0.052216172, 0.039146706, -0.007047631, -0.0013768731, 0.015724335, 0.0381525, 0.017061293, 0.015585088, 0.050621245, -0.0027336623, 0.028795406, 0.0085211685, 0.09262725, 0.0032820753, -0.023974173, -0.032783743, -0.022499016, 0.016418226, -0.020218307, 0.012576636, -0.01087612, -0.059496906, 0.0128563875, 0.0025499468, -0.016720273, -0.026636017, 0.02936531, 0.009829779, -0.03352291, -0.021941414, 0.08802833, 0.0052335807, 0.051597912, 0.039014686, -0.036561158, 0.044466008, -0.0041561, 0.023762226, -0.023993677, -0.04097535, -0.025920412, 0.023075942, -0.022476664, 0.0015394227, 0.035389144, 0.02254812, 0.0038311528, 0.07253486, -0.019707456, 0.010106696, 0.025517022, 0.004364208, -0.008170654, 0.0016817425, 0.011208583, 0.019563869, -0.02868615, 0.037688937, 0.020283507, -0.015647411, -0.026917338, 0.045680616, -0.028692853, -0.01104029, 0.007360831, 0.06532814, -0.009093374, -0.027484516, -0.035384133, -0.024118671, -0.059769537, 0.018281808, 0.0021237058, 0.01071852, 0.00032055264, -0.049318615, -0.0002597951, -0.08600135, -0.03106611, 0.02065796, 0.018991841, 0.00018441059, 0.003550499, -0.010450337, -0.0062490376, 0.047152307, -0.03969871, 0.0016933344, 0.009327735, -0.03492172, -0.0052903653, 0.03294722, -0.043872867, 0.017344892, 0.037879355, 0.077939354, -0.044055685, 0.0031824554, 0.033066157, -0.028475912, -0.0044136797, 0.08309093, -0.035525717, 0.00163906, 0.021723129, 0.041331135, 0.04676286, -0.041847788, 0.039305594, 0.060223036, -0.0072911982, -0.01308596, 0.056757923, 0.009157886, 0.05246784, -0.024124123, -0.017324153, -0.019909194, -0.007549678, -0.033312835, 0.03638511, 0.010868866, 0.009606072, -0.026420288, -0.017497981, -0.0047282223, 0.02541612, -0.032167014, -0.0076316157, -0.05621701, 0.022456747, -0.013611441, 0.00017310606, 0.038680002, -0.048038647, -0.0041150083, 0.019668974, -0.0019520354, -0.05832844, 0.025233593, -0.015814308, -0.0045183217, -0.035136122, 0.010597112, -0.005170696, 0.013873066, -0.03892953, 0.001845214, -0.022829685, 0.04492269, -0.04234643, -0.01509783, -0.044912063, 0.014122962, -0.014328425, -0.015035797, 0.01225091, -0.022465952, 0.034727268, 0.013187503, 0.037632942, -0.029831817, -0.014022417, -0.0063450565, 0.035489038, -0.053074796, -0.009871067, -0.010888838, -0.014599871, 0.0043528136, 0.011015819, -0.0333024, 0.01348302, -0.035098188, -0.02600979, 0.021390723, -0.010300852, 0.044137634, -0.017464014, 0.036167074, 0.06421815, -0.0012345362, 0.05772093, -0.030202858, 0.0031121534, 0.07287807, 0.0260139, 0.016208228, -0.05357747, -0.01843162, -0.050125077, -0.009443709, 0.018686816, 0.01317159, 0.04029161, -0.020993758, 0.039224792, 0.019699523, -0.04246284, -0.026467694, -0.017308662, 0.0075215, -0.038201164, 0.07427193, 0.013118963, -0.06723887, -0.011837352, -0.0037534041, -0.0041227355, 0.01060785, -0.010905287, -0.025766818, -0.08649361, -0.04698203, -0.03211341, 0.015263274, -0.033745244, 0.01925663, -0.024861852, 0.034865323, -0.056400735, 0.038740758, 0.017356595, -0.09925265, 0.047755085, -0.011859279, -0.0072105015, -0.018558588, 0.009293071, 0.03965552, 0.020692462], 'updated_at': '2025-05-28T15:42:35.362Z'}
2025-05-30 17:10:49,274 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-30 17:10:49,276 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-30 17:10:49,276 - hr_assistant - WARNING - Method 1 failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:10:49,276 - hr_assistant - WARNING - Method 2 failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:10:49,276 - hr_assistant - INFO - OpenAI client initialized with legacy method
2025-05-30 17:10:49,276 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:10:49,276 - hr_assistant - INFO - Creating new HR assistant
2025-05-30 17:10:49,276 - hr_assistant - WARNING - OpenAI Assistant failed: Assistant ID not found and creation logic not implemented
2025-05-30 17:10:49,276 - hr_assistant - INFO - Falling back to new employee module
2025-05-30 17:10:49,276 - hr_assistant - INFO - Employee data query: 'Hi' from requester: EMP103
2025-05-30 17:10:50,825 - hr_assistant - INFO - Successfully connected to MongoDB
2025-05-30 17:10:50,825 - hr_assistant - INFO - MongoDB service initialized
2025-05-30 17:10:50,826 - hr_assistant - WARNING - OpenAI client initialization failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:10:50,826 - hr_assistant - INFO - OpenAI initialized with legacy method
2025-05-30 17:10:50,826 - hr_assistant - INFO - Vector search service initialized
2025-05-30 17:10:50,826 - hr_assistant - INFO - OpenAI not available for query parsing, using rule-based parsing: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:10:50,826 - hr_assistant - INFO - Query parser service initialized
2025-05-30 17:10:50,826 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 17:10:50,833 - hr_assistant - INFO - Parsed query: {'original_query': 'Hi', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {}, 'data_requested': [], 'confidence': 0.0}
2025-05-30 17:10:50,949 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:10:51,023 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 17:10:51,023 - hr_assistant - INFO - Using fallback text search for: Hi
2025-05-30 17:10:51,140 - hr_assistant - INFO - Regex search for 'Hi' returned 1 results
2025-05-30 17:17:37,127 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 17:17:37,128 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-30 17:17:37,128 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:17:37,128 - hr_assistant - INFO - Creating new HR assistant
2025-05-30 17:17:37,128 - hr_assistant - WARNING - OpenAI Assistant failed: Assistant ID not found and creation logic not implemented
2025-05-30 17:17:37,129 - hr_assistant - INFO - Falling back to new employee module
2025-05-30 17:17:37,129 - hr_assistant - INFO - Employee data query: 'show my information' from requester: EMP103
2025-05-30 17:17:37,129 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 17:17:37,129 - hr_assistant - INFO - Parsed query: {'original_query': 'show my information', 'intent': <QueryIntent.GET_EMPLOYEE_INFO: 'get_employee_info'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 17:17:37,503 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:17:37,558 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 17:17:37,835 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:17:56,684 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 17:17:56,685 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-30 17:17:56,685 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:17:56,686 - hr_assistant - INFO - Creating new HR assistant
2025-05-30 17:17:56,686 - hr_assistant - WARNING - OpenAI Assistant failed: Assistant ID not found and creation logic not implemented
2025-05-30 17:17:56,686 - hr_assistant - INFO - Falling back to new employee module
2025-05-30 17:17:56,686 - hr_assistant - INFO - Employee data query: 'give my team information' from requester: EMP103
2025-05-30 17:17:56,686 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 17:17:56,686 - hr_assistant - INFO - Parsed query: {'original_query': 'give my team information', 'intent': <QueryIntent.GET_DEPARTMENT_INFO: 'get_department_info'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 17:17:56,811 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:17:56,867 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 17:17:56,933 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:18:05,330 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 17:18:05,330 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-30 17:18:05,330 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:18:05,330 - hr_assistant - INFO - Creating new HR assistant
2025-05-30 17:18:05,330 - hr_assistant - WARNING - OpenAI Assistant failed: Assistant ID not found and creation logic not implemented
2025-05-30 17:18:05,330 - hr_assistant - INFO - Falling back to new employee module
2025-05-30 17:18:05,331 - hr_assistant - INFO - Employee data query: 'Show my attendance this month' from requester: EMP103
2025-05-30 17:18:05,331 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 17:18:05,331 - hr_assistant - INFO - Parsed query: {'original_query': 'Show my attendance this month', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.5}
2025-05-30 17:18:05,451 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:18:05,508 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 17:18:05,570 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:18:18,148 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 17:18:18,148 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-30 17:18:18,149 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:18:18,149 - hr_assistant - INFO - Creating new HR assistant
2025-05-30 17:18:18,149 - hr_assistant - WARNING - OpenAI Assistant failed: Assistant ID not found and creation logic not implemented
2025-05-30 17:18:18,149 - hr_assistant - INFO - Falling back to new employee module
2025-05-30 17:18:18,149 - hr_assistant - INFO - Employee data query: 'what si my leave balance' from requester: EMP103
2025-05-30 17:18:18,149 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 17:18:18,150 - hr_assistant - INFO - Parsed query: {'original_query': 'what si my leave balance', 'intent': <QueryIntent.GET_LEAVE_BALANCE: 'get_leave_balance'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': ['leave_balance'], 'confidence': 0.7999999999999999}
2025-05-30 17:18:18,263 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:18:18,317 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 17:18:18,375 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:19:05,997 - hr_assistant - INFO - Successfully connected to MongoDB
2025-05-30 17:19:05,997 - hr_assistant - WARNING - OpenAI client initialization failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:19:05,997 - hr_assistant - INFO - OpenAI initialized with legacy method
2025-05-30 17:19:05,997 - hr_assistant - INFO - OpenAI not available for query parsing, using rule-based parsing: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:19:05,997 - hr_assistant - INFO - New services initialized successfully
2025-05-30 17:20:07,275 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-30 17:20:07,276 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-30 17:20:07,277 - hr_assistant - INFO - Employee module uses new self-initialization pattern
2025-05-30 17:20:36,155 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 17:20:36,156 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-30 17:20:36,156 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-30 17:20:36,156 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-30 17:20:38,601 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-30 17:20:39,944 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1617.png'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-05-08T18:22:52.022Z', 'remoteLocation': {'lastLocation': '0.0,0.0', 'lastLocationUpdatedAt': '2025-05-08T18:22:52.022Z'}, 'embedding': [0.002205212, 0.00285921, -0.059483066, 0.019030724, 0.050706837, -0.01869734, 0.012920594, -0.001617878, -0.038660724, 0.06249923, 0.000777125, 0.026957497, 0.07338242, -0.031352155, -0.049548548, -0.010899217, 0.028730307, 0.03562604, -0.05738091, -0.032833878, -0.039503995, -0.002274718, 0.03257489, -0.0102704065, -0.012959295, -0.0051532383, 0.0013071707, -0.008692862, -0.04290293, -0.02073418, 0.030691944, 0.028072672, -0.05941178, -0.0003463132, 0.031903986, 0.006974004, -0.02387422, 0.0046408977, 0.008333496, -0.044026922, -0.009740245, -0.0064237486, 0.0019402984, 0.04388184, -0.06675343, 0.006636593, -0.04859796, -0.006202303, -0.046875235, 0.06744456, 0.08863753, 0.009302009, -0.007225605, 0.015915329, -0.013295711, -0.043277547, 0.004504701, -0.05025339, -0.052261032, -0.00048895896, 0.015875692, -0.013588414, -0.019038836, -0.065606266, 0.05160887, 0.015458598, -0.017000217, 0.03818617, -0.07518022, 0.031863466, -0.00607514, -0.022688726, -0.03057954, -0.0044976166, -0.02359274, -0.053374745, 0.00022307428, -0.07374233, 0.058230415, 0.06037047, -0.03276823, -0.0050179153, 0.048336893, 0.04433282, 0.026665268, 0.059834614, 0.02562604, -0.0623707, 0.008699851, 0.01709501, 0.11952662, 0.030067569, 0.006819686, -0.0135437315, 0.023264812, -0.045678727, -0.09871082, -0.075507835, 0.15884617, 0.026932815, 0.015900154, 0.015039173, 0.006541729, 0.035962623, 0.01675806, 0.0047552236, -0.081020795, -0.08034172, -0.04513326, -0.014393127, -0.027813198, -0.01142399, 0.02142499, -0.044262175, -0.010398603, 0.00247414, -0.01642532, -0.009459997, -0.03996089, 0.0656101, 0.025927866, -0.0075022904, -0.029373754, 0.05474576, 0.046424255, 0.02023116, 0.043019358, -0.010531643, -0.029622292, -0.015629409, 0.106638886, -0.030264309, -0.01662702, 0.0026821347, -0.070680834, -0.018871574, 0.04357191, -0.05919491, 0.020387223, -0.01612898, -0.0022312023, -0.042562477, -0.09765691, 0.07086077, -0.037498623, 0.003673292, -0.0014789666, 0.07510889, -0.010619753, -0.017924523, -0.002676995, 0.04776361, 0.04924764, 0.017654683, 0.007907522, -0.026155317, -0.0038855968, -0.050311428, 0.046426136, -0.014598353, 0.025916766, -0.043635577, -0.034040328, 0.007595149, -0.03865503, -0.014880088, -0.020611016, 0.0059195, -0.046619814, 0.030190958, -0.037327446, -0.025897749, -0.071250774, -0.013883153, 0.011393201, 0.06504889, -0.026741179, -0.056475986, 0.04888968, 0.0062058065, 0.030760124, 0.06595981, -0.03937182, -0.06854315, 0.0077646384, -0.01756428, -0.026998464, 0.050817776, 0.029169424, 0.033642042, 0.018854132, -0.022464061, 0.003840226, 0.058958087, -0.047273807, -0.020709628, -0.047979936, -0.028537001, 0.023346638, -0.04998974, 0.05343451, 0.038934257, -0.014376808, -0.047358304, 0.0019473117, 0.029409645, -0.042506568, 0.004011114, -0.014021531, -0.014381531, -0.014269692, -0.020249901, 0.030832484, -0.07642016, -0.0026038045, 0.037272472, 0.051614203, 0.012044262, 0.052521028, -0.03617593, 0.04055536, -0.004027521, 0.016730195, 0.041457765, -0.0038732889, 0.056133803, -0.062542446, -0.022353707, 0.06330804, -0.0060576596, -0.011066357, -0.042443935, 0.055803407, 0.038767766, -0.014718598, 0.023924444, -1.9789824e-05, -0.007739876, -0.046362527, -0.015765602, 0.015962284, 0.04973045, 0.041456964, 0.012699638, 0.05009221, 0.012051276, 0.074898146, 0.019731555, -0.011734199, -0.011661645, 0.0023040492, -0.019773332, -0.05066894, 0.009127933, -0.019998165, -0.036299594, -0.018391924, -0.0067880526, 0.02246822, -0.037592206, 0.068397075, 0.0073300553, 0.00041577793, -0.08359658, 0.014653357, -0.096273966, -0.041303296, 0.010342047, 0.048747532, -0.013436011, 0.04876754, -0.05170383, -0.00076579716, -0.0072609275, -0.0052444553, -0.00093792233, 0.0015273027, 0.019568363, -0.018718366, -0.047339823, 0.047667183, -0.039057665, 0.0011886429, 0.009722846, -0.006679693, -0.08177143, 0.01222316, 0.034308292, -0.033761535, -0.016829522, 0.037529435, 0.01803207, -0.0648394, 0.036310043, 0.021769151, 0.036896847, 0.029875515, 0.037497763, -0.004877638, -0.0042402497, 0.053173304, 0.020740403, -0.023285815, 0.03827156, 0.015417016, 0.00967715, -0.014138025, -0.0051836944, -0.06563142, -0.035070445, 0.022240903, -0.014125117, -0.020936709, -0.0327174, -0.030085174, 0.01255635, -0.16427214, 0.021860933, -0.0077079814, 0.024296112, 0.033821076, 0.018941693, -0.0063460995, -0.004685961, -0.013916018, 0.031645365, 0.0052287285, -0.02906917, 0.03217683, 0.041595247, 0.022953553, -0.020302651, 0.009174939, -0.06315438, 0.022216577, 0.03768549, -0.052169517, 0.021567846, 0.07788591, -0.0050195926, -0.008183276, -0.0102587, 0.06771711, 0.06323456, 0.0011603591, -0.05317066, 0.018945277, -0.0022143424, 0.01748997, -0.031482983, 0.030259205, 0.041263193, 0.05143827, -0.04730533, 0.006952777, 0.01529006, 0.038960807, -0.0038889046, 0.034462366, -0.013798745, 0.024104426, 0.042487435, -0.01129078, 0.03201121, -0.012329151, -0.0012934816, 0.00092693383, 0.02031288, 0.0071969293, -0.006472007, -0.018631374, -0.012993632, 0.017339818, -0.012965905, 0.005038055, -0.0021935846, -0.014685283, 0.003979586, -0.003916417, 0.0012786387, 0.019098746, -0.022586653, 0.04293155, 0.048421822, -0.019685091, 0.081391096, -0.07777315, -0.013351598, 0.02980831, -0.027211858, -0.028810736, 0.055679955, 0.034320198, -0.015921518, -0.04131677, 0.0583929, -0.0015555291, 0.050795756, 0.016211726, 0.0054898565, 0.025035612, -0.010023132, 0.04471724, -0.027703945, -0.0130786095, -0.031696297, 0.05089817, 0.0059649297, 0.045238774, 0.04450452, -0.0012574809, -0.035650663, -0.01537394, -0.006490433, 0.010037181, -0.026099509, 0.03332727, -0.034238726, -0.020362092, 0.024658814, -0.015854906, 0.03548635, 0.010260863, -0.03981858, 0.06611227, -0.07921888, -0.028015364, 0.020619363, 0.022970656, -0.006928849, 0.004360248, 0.012065512, -0.0071472516, 0.032154527, -0.029890727, 0.034580946, -0.0053927777, -0.037641943, 0.005139052, -0.0041534943, 0.0015794508, 0.018822584, 0.054768365, 0.033303175, -0.0033839555, 0.007818507, 0.03240108, 0.02706343, -0.035166375, -0.014723804, 0.019960923, -0.0039956765, -0.003445905, -0.02383298, -0.020501124, 0.018130424, 0.025223408, 0.038457364, -0.0484456, -0.02353034, -0.036428187, -0.037467483, 0.03250683, 0.055204924, -0.0021467663, 0.021278132, 0.005784253, 0.03362573, -0.016187964, 0.03530381, 0.040686704, -0.018550027, 0.035161074, -0.016902454, -0.055259794, 0.0131223295, 0.04700162, 0.03929324, -0.061401185, -0.049154602, -0.047035724, 0.018856961, -0.0074210567, 0.04315922, 0.054031435, -0.029086558, -0.039639965, 0.007671103, 0.0023044006, 0.0025197256, -0.023725554, 0.03465643, -0.039490458, 0.0047906092, 0.009959909, -0.024294745, 0.047831047, -0.029961823, -0.021507444, 0.045742493, 0.06912992, 0.0545993, -0.021282349, -0.01951858, -0.05659222, 0.01832819, -0.036865667, 0.04102405, 0.058882542, 0.017965797, 0.032373004, -0.010963981, 0.04952352, 0.020704377, -0.01738575, -0.01682206, -0.042813253, -0.0040368577, 0.025521154, 0.01090064, -0.03274211, -0.04198018, -0.0487083, 0.0152567, 0.042214513, -0.017050149, 0.022788655, 0.008570806, 0.03530945, -0.008368085, -0.029850854, 0.08104423, 0.049656894, 0.04936958, 0.033732872, 0.07937448, 0.012000559, 0.052216172, 0.039146706, -0.007047631, -0.0013768731, 0.015724335, 0.0381525, 0.017061293, 0.015585088, 0.050621245, -0.0027336623, 0.028795406, 0.0085211685, 0.09262725, 0.0032820753, -0.023974173, -0.032783743, -0.022499016, 0.016418226, -0.020218307, 0.012576636, -0.01087612, -0.059496906, 0.0128563875, 0.0025499468, -0.016720273, -0.026636017, 0.02936531, 0.009829779, -0.03352291, -0.021941414, 0.08802833, 0.0052335807, 0.051597912, 0.039014686, -0.036561158, 0.044466008, -0.0041561, 0.023762226, -0.023993677, -0.04097535, -0.025920412, 0.023075942, -0.022476664, 0.0015394227, 0.035389144, 0.02254812, 0.0038311528, 0.07253486, -0.019707456, 0.010106696, 0.025517022, 0.004364208, -0.008170654, 0.0016817425, 0.011208583, 0.019563869, -0.02868615, 0.037688937, 0.020283507, -0.015647411, -0.026917338, 0.045680616, -0.028692853, -0.01104029, 0.007360831, 0.06532814, -0.009093374, -0.027484516, -0.035384133, -0.024118671, -0.059769537, 0.018281808, 0.0021237058, 0.01071852, 0.00032055264, -0.049318615, -0.0002597951, -0.08600135, -0.03106611, 0.02065796, 0.018991841, 0.00018441059, 0.003550499, -0.010450337, -0.0062490376, 0.047152307, -0.03969871, 0.0016933344, 0.009327735, -0.03492172, -0.0052903653, 0.03294722, -0.043872867, 0.017344892, 0.037879355, 0.077939354, -0.044055685, 0.0031824554, 0.033066157, -0.028475912, -0.0044136797, 0.08309093, -0.035525717, 0.00163906, 0.021723129, 0.041331135, 0.04676286, -0.041847788, 0.039305594, 0.060223036, -0.0072911982, -0.01308596, 0.056757923, 0.009157886, 0.05246784, -0.024124123, -0.017324153, -0.019909194, -0.007549678, -0.033312835, 0.03638511, 0.010868866, 0.009606072, -0.026420288, -0.017497981, -0.0047282223, 0.02541612, -0.032167014, -0.0076316157, -0.05621701, 0.022456747, -0.013611441, 0.00017310606, 0.038680002, -0.048038647, -0.0041150083, 0.019668974, -0.0019520354, -0.05832844, 0.025233593, -0.015814308, -0.0045183217, -0.035136122, 0.010597112, -0.005170696, 0.013873066, -0.03892953, 0.001845214, -0.022829685, 0.04492269, -0.04234643, -0.01509783, -0.044912063, 0.014122962, -0.014328425, -0.015035797, 0.01225091, -0.022465952, 0.034727268, 0.013187503, 0.037632942, -0.029831817, -0.014022417, -0.0063450565, 0.035489038, -0.053074796, -0.009871067, -0.010888838, -0.014599871, 0.0043528136, 0.011015819, -0.0333024, 0.01348302, -0.035098188, -0.02600979, 0.021390723, -0.010300852, 0.044137634, -0.017464014, 0.036167074, 0.06421815, -0.0012345362, 0.05772093, -0.030202858, 0.0031121534, 0.07287807, 0.0260139, 0.016208228, -0.05357747, -0.01843162, -0.050125077, -0.009443709, 0.018686816, 0.01317159, 0.04029161, -0.020993758, 0.039224792, 0.019699523, -0.04246284, -0.026467694, -0.017308662, 0.0075215, -0.038201164, 0.07427193, 0.013118963, -0.06723887, -0.011837352, -0.0037534041, -0.0041227355, 0.01060785, -0.010905287, -0.025766818, -0.08649361, -0.04698203, -0.03211341, 0.015263274, -0.033745244, 0.01925663, -0.024861852, 0.034865323, -0.056400735, 0.038740758, 0.017356595, -0.09925265, 0.047755085, -0.011859279, -0.0072105015, -0.018558588, 0.009293071, 0.03965552, 0.020692462], 'updated_at': '2025-05-28T15:42:35.362Z'}
2025-05-30 17:20:39,946 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-30 17:20:39,947 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-30 17:20:39,948 - hr_assistant - WARNING - Method 1 failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:20:39,948 - hr_assistant - WARNING - Method 2 failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:20:39,948 - hr_assistant - INFO - OpenAI client initialized with legacy method
2025-05-30 17:20:39,948 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:20:39,948 - hr_assistant - INFO - Creating new HR assistant
2025-05-30 17:20:39,948 - hr_assistant - WARNING - OpenAI Assistant failed: Assistant ID not found and creation logic not implemented
2025-05-30 17:20:39,948 - hr_assistant - INFO - Falling back to new employee module
2025-05-30 17:20:39,948 - hr_assistant - INFO - Employee data query: 'Hi' from requester: EMP103
2025-05-30 17:20:41,099 - hr_assistant - INFO - Successfully connected to MongoDB
2025-05-30 17:20:41,099 - hr_assistant - INFO - MongoDB service initialized
2025-05-30 17:20:41,099 - hr_assistant - WARNING - OpenAI client initialization failed: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:20:41,100 - hr_assistant - INFO - OpenAI initialized with legacy method
2025-05-30 17:20:41,100 - hr_assistant - INFO - Vector search service initialized
2025-05-30 17:20:41,100 - hr_assistant - INFO - OpenAI not available for query parsing, using rule-based parsing: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:20:41,100 - hr_assistant - INFO - Query parser service initialized
2025-05-30 17:20:41,100 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 17:20:41,106 - hr_assistant - INFO - Parsed query: {'original_query': 'Hi', 'intent': <QueryIntent.UNKNOWN: 'unknown'>, 'parameters': {}, 'data_requested': [], 'confidence': 0.0}
2025-05-30 17:20:41,227 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:20:41,285 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 17:20:41,285 - hr_assistant - INFO - Using fallback text search for: Hi
2025-05-30 17:20:41,411 - hr_assistant - INFO - Regex search for 'Hi' returned 1 results
2025-05-30 17:21:19,841 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-30 17:21:19,841 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-30 17:21:19,842 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Client.__init__() got an unexpected keyword argument 'proxies'
2025-05-30 17:21:19,842 - hr_assistant - INFO - Creating new HR assistant
2025-05-30 17:21:19,842 - hr_assistant - WARNING - OpenAI Assistant failed: Assistant ID not found and creation logic not implemented
2025-05-30 17:21:19,842 - hr_assistant - INFO - Falling back to new employee module
2025-05-30 17:21:19,842 - hr_assistant - INFO - Employee data query: 'Give my team details' from requester: EMP103
2025-05-30 17:21:19,842 - hr_assistant - INFO - Employee module services initialized successfully
2025-05-30 17:21:19,842 - hr_assistant - INFO - Parsed query: {'original_query': 'Give my team details', 'intent': <QueryIntent.GET_DEPARTMENT_INFO: 'get_department_info'>, 'parameters': {'employee_id': 'EMP103', 'is_self_query': True}, 'data_requested': [], 'confidence': 0.7999999999999999}
2025-05-30 17:21:19,965 - hr_assistant - INFO - Found employee by ID: EMP103
2025-05-30 17:21:20,025 - hr_assistant - INFO - Found 6 team members for manager EMP103
2025-05-30 17:21:20,105 - hr_assistant - INFO - Found employee by ID: EMP103
