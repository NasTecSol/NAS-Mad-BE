2025-04-24 15:35:44,612 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 16:48:22,119 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 16:48:38,014 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 16:48:38,014 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 16:48:38,014 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 16:48:40,163 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 16:48:40,163 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 16:48:41,069 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 16:48:41,070 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 16:48:41,073 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 16:48:41,075 - hr_assistant - ERROR - Unexpected error in chat endpoint: 1 validation error for ChatResponse
thread_id
  Field required [type=missing, input_value={'response': "Good aftern... may I help you today?"}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-04-24 18:39:09,109 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:39:43,381 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:40:29,324 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:40:40,427 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:40:40,427 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:40:40,427 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:40:42,499 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:40:42,499 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 18:40:43,412 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:40:43,412 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:40:43,414 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 18:40:49,295 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:40:49,295 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:40:50,263 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:40:50,263 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:40:50,266 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 18:40:50,266 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:40:50,266 - hr_assistant - ERROR - Error generating response: name 'OpenAI' is not defined
2025-04-24 18:41:34,914 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:41:34,914 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:41:36,054 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:41:36,055 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:41:36,057 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 18:41:36,057 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:41:36,057 - hr_assistant - ERROR - Error generating response: name 'OpenAI' is not defined
2025-04-24 18:42:02,172 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:42:31,297 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:42:44,783 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:42:44,783 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:42:44,783 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:42:46,251 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:42:46,251 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 18:42:47,154 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:42:47,155 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:42:47,156 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 18:42:56,767 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:42:56,767 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:42:57,685 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:42:57,686 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:42:57,688 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 18:42:57,688 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:42:58,982 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:42:59,250 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:43:00,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 18:43:01,326 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/messages "HTTP/1.1 200 OK"
2025-04-24 18:43:03,806 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs "HTTP/1.1 200 OK"
2025-04-24 18:43:05,010 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:22,782 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 500 Internal Server Error"
2025-04-24 18:43:22,783 - openai._base_client - INFO - Retrying request to /threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK in 0.401150 seconds
2025-04-24 18:43:24,485 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:24,488 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 18:43:24,488 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: this_month, include_team: None)
2025-04-24 18:43:24,488 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:43:25,451 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:43:25,451 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:43:25,453 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: False
2025-04-24 18:43:25,453 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 18:43:25,453 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:43:26,368 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:43:26,368 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:43:26,370 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:43:27,319 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:43:29,093 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:30,611 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:32,150 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:32,150 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 18:43:32,151 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 18:43:32,151 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:43:33,075 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:43:33,075 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:43:33,078 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:43:49,859 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:43:51,640 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:53,168 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:54,705 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:02,229 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:03,725 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:05,228 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:06,796 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:08,334 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:09,829 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:11,343 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:12,904 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:14,747 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:16,242 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:17,813 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:19,377 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:20,378 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 18:46:30,263 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:46:58,228 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:47:03,662 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:47:03,662 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:03,662 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:47:05,147 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:47:05,147 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 18:47:06,080 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:06,080 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:06,082 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 18:47:09,846 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:47:09,846 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:10,847 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:10,847 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:10,850 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 18:47:10,850 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:47:12,415 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:47:12,423 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:47:13,438 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 18:47:14,565 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/messages "HTTP/1.1 200 OK"
2025-04-24 18:47:17,296 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs "HTTP/1.1 200 OK"
2025-04-24 18:47:17,841 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:19,481 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:19,483 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 18:47:19,483 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 18:47:19,483 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:20,468 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:20,468 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:20,471 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:47:21,380 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:47:22,965 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:24,486 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:24,487 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 18:47:24,487 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: this_month, include_team: None)
2025-04-24 18:47:24,487 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:25,389 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:25,389 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:25,391 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: False
2025-04-24 18:47:25,391 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 18:47:25,391 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:26,298 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:26,299 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:26,302 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:47:29,310 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:47:31,067 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:32,561 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:32,997 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/messages "HTTP/1.1 200 OK"
2025-04-24 18:48:36,821 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:48:42,334 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-24 18:48:42,334 - hr_assistant - INFO - Fetching employee data for: EMP105
2025-04-24 18:48:42,334 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP105', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:48:43,774 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:48:43,774 - hr_assistant - INFO - Login successful for user: EMP105
2025-04-24 18:48:44,685 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP105
2025-04-24 18:48:44,685 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}]}
2025-04-24 18:48:44,687 - hr_assistant - INFO - Sending initial greeting to employee: EMP105
2025-04-24 18:48:58,423 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-24 18:48:58,423 - hr_assistant - INFO - Fetching employee data for: EMP105
2025-04-24 18:48:59,413 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP105
2025-04-24 18:48:59,413 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}]}
2025-04-24 18:48:59,415 - hr_assistant - INFO - Processing query for employee EMP105: Show my attendance this month
2025-04-24 18:48:59,415 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:49:01,130 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:49:01,135 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:49:01,674 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 18:49:02,291 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/messages "HTTP/1.1 200 OK"
2025-04-24 18:49:03,681 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs "HTTP/1.1 200 OK"
2025-04-24 18:49:04,134 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:06,135 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:07,588 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:09,080 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:11,286 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:12,752 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:14,232 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:15,848 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:17,345 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:18,878 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:20,367 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:21,850 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:23,359 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:24,826 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:26,295 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:27,815 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:29,322 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:30,862 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:32,398 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:33,936 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:34,941 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 18:58:46,779 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:58:54,279 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:58:54,279 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:58:54,279 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:58:56,266 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:58:56,266 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 18:58:57,186 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:58:57,186 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:58:57,188 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 18:59:03,431 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:59:03,431 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:59:04,437 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:59:04,437 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:59:04,439 - hr_assistant - INFO - Processing query for employee EMP103: What's my leave balance?
2025-04-24 18:59:04,439 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-24 18:59:06,225 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:59:06,230 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:59:06,231 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-24 18:59:06,694 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 18:59:07,806 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 18:59:09,688 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs "HTTP/1.1 200 OK"
2025-04-24 18:59:10,160 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:12,161 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:12,164 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-24 18:59:12,164 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-24 18:59:12,164 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:59:13,142 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:59:13,142 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:59:13,144 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:59:14,122 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:59:16,218 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:17,848 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:19,377 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:19,811 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 18:59:42,582 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:59:42,582 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:59:43,574 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:59:43,574 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:59:43,577 - hr_assistant - INFO - Processing query for employee EMP103: Show my profile details
2025-04-24 18:59:44,410 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:59:44,411 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:59:44,875 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr "HTTP/1.1 200 OK"
2025-04-24 18:59:44,876 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_S4z0z5g2AkjJ2dtW8vsfQajr
2025-04-24 18:59:45,549 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 18:59:46,928 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs "HTTP/1.1 200 OK"
2025-04-24 18:59:47,383 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:48,875 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:50,346 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:54,697 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:56,214 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:56,590 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 19:00:15,219 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:00:15,220 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:00:16,127 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:00:16,127 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:00:16,129 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 19:00:17,253 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 19:00:17,254 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 19:00:18,306 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr "HTTP/1.1 200 OK"
2025-04-24 19:00:18,307 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_S4z0z5g2AkjJ2dtW8vsfQajr
2025-04-24 19:00:18,904 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 19:00:22,582 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs "HTTP/1.1 200 OK"
2025-04-24 19:00:23,072 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:24,698 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:26,303 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:28,192 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:29,670 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:31,373 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:33,004 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:34,540 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:36,186 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:37,732 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:39,533 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:41,066 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:42,642 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:44,154 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:45,630 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:47,142 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:48,797 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:50,327 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:53,894 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:55,507 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:56,511 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 19:12:54,077 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:16:15,907 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:16:19,864 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:16:19,864 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:16:19,864 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:16:22,471 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:16:22,471 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:16:23,461 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:16:23,462 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:16:23,465 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 19:16:28,349 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:16:28,349 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:16:28,350 - hr_assistant - ERROR - Error retrieving employee data: 'success'
2025-04-24 19:17:14,071 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:17:20,268 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:17:20,268 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:17:20,268 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:17:21,765 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:17:21,765 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:17:22,789 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:17:22,789 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:17:22,791 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 19:17:29,171 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:17:29,171 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:17:29,171 - hr_assistant - ERROR - Error retrieving employee data: 'success'
2025-04-24 19:17:42,568 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:17:44,171 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:17:44,171 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:17:44,172 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:17:45,591 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:17:45,591 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:17:46,495 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:17:46,495 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:17:46,497 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 19:17:46,497 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-24 19:17:48,185 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 19:17:48,190 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 19:17:48,190 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-24 19:17:49,474 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 19:17:50,161 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/messages "HTTP/1.1 200 OK"
2025-04-24 19:17:51,839 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs "HTTP/1.1 200 OK"
2025-04-24 19:17:53,066 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:17:54,740 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:17:56,205 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:17:56,206 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 19:17:56,206 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 19:17:56,206 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:17:56,206 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 19:18:08,241 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 19:18:09,946 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:11,639 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:13,370 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:14,911 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:16,422 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:21,718 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:23,590 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:25,151 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:26,687 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:28,223 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:29,759 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:31,328 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:32,817 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:32,818 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-24 19:18:32,818 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:18:33,945 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 19:18:35,479 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:36,924 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:36,925 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 19:18:36,925 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 19:18:36,925 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:18:36,925 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 19:18:37,859 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 19:18:39,385 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:40,922 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:41,924 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 19:19:19,127 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:19:31,065 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:19:33,624 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:19:33,625 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:19:33,625 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:19:35,092 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:19:35,092 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:19:35,996 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:19:35,996 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:19:35,998 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 19:19:40,960 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:19:40,960 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:19:40,960 - hr_assistant - ERROR - Error - retrieving employee data: 'success'
2025-04-24 19:22:02,779 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:22:06,402 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:22:06,403 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:22:06,403 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:22:07,928 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:22:07,928 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:22:08,854 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:22:08,854 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:22:08,857 - hr_assistant - WARNING - Cache extracting employee name: {'success': True, 'data': {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}, 'message': 'Employee data retrieved successfully'}
2025-04-24 19:22:08,858 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 19:22:08,858 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-24 19:22:10,028 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 19:22:10,036 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 19:22:10,036 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-24 19:22:10,641 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 19:22:11,870 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/messages "HTTP/1.1 200 OK"
2025-04-24 19:22:13,348 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs "HTTP/1.1 200 OK"
2025-04-24 19:22:13,888 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:15,371 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:17,194 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:18,731 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:20,369 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:21,905 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:23,543 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:25,282 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:26,923 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:28,611 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:31,122 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:36,187 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:37,777 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:39,432 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:41,273 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:43,298 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:44,886 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:46,402 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:48,116 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:49,665 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:50,668 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 19:22:58,835 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:23:02,086 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:23:02,086 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:23:02,086 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:23:03,685 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:23:03,685 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:23:04,655 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:23:04,655 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:23:04,657 - hr_assistant - WARNING - Cache extracting employee name: {'success': True, 'data': {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}, 'message': 'Employee data retrieved successfully'}
2025-04-24 19:23:04,658 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 19:23:38,241 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:23:38,242 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:23:38,242 - hr_assistant - WARNING - Cache extracting employee name: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:23:38,242 - hr_assistant - ERROR - Error - retrieving employee data: 'success'
2025-04-25 15:06:15,008 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:07:21,367 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:07:21,367 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:07:21,367 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:07:23,492 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:07:23,492 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:07:23,494 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:07:23,494 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:07:23,494 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:07:47,872 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:07:53,061 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:07:53,062 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:07:53,062 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:07:55,504 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:07:55,504 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:07:55,505 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:07:55,505 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:07:55,505 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:08:22,269 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:08:27,083 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-25 15:08:27,083 - hr_assistant - INFO - Fetching employee data for: EMP105
2025-04-25 15:08:27,083 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP105', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:08:28,487 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:08:28,487 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:08:28,489 - hr_assistant - ERROR - Failed to get token for employee: EMP105
2025-04-25 15:08:28,489 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:08:28,489 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:08:36,199 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:08:36,199 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:08:36,199 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:08:37,659 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:08:37,660 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:08:37,661 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:08:37,661 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:08:37,661 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:08:47,785 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:08:47,785 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:08:47,785 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:08:49,227 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:08:49,227 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:08:49,229 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:08:49,229 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:08:49,229 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:14:52,758 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:14:58,919 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:16:12,227 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:16:12,228 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:16:12,228 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:16:12,228 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:16:13,661 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:16:13,661 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:16:13,663 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:16:13,664 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:20:07,450 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:20:10,289 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:20:10,289 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:20:10,290 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:20:10,290 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:20:12,343 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:20:13,251 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-25 15:20:13,251 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:20:13,253 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 15:20:35,379 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:20:35,379 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 15:20:35,379 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 15:20:35,379 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 15:20:37,011 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 15:20:37,022 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 15:20:37,022 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 15:20:37,898 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 15:20:38,788 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/messages "HTTP/1.1 200 OK"
2025-04-25 15:20:40,433 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs "HTTP/1.1 200 OK"
2025-04-25 15:20:40,937 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:42,688 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:42,691 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:20:42,691 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 15:20:42,691 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:20:42,692 - hr_assistant - ERROR - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:20:42,692 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:20:44,398 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:20:46,060 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:47,704 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:47,705 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-25 15:20:47,705 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:20:51,082 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:20:52,584 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:54,148 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:54,149 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:20:54,150 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 15:20:54,150 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:20:54,150 - hr_assistant - ERROR - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:20:54,151 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:20:55,186 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:20:56,812 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:58,381 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:58,383 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:20:58,383 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-25 15:20:58,383 - hr_assistant - ERROR - Error executing function get_team_attendance: 'HRService' object has no attribute 'get_team_data'
2025-04-25 15:20:59,435 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:21:01,060 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:21:02,585 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:21:02,586 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:21:02,586 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-25 15:21:02,586 - hr_assistant - ERROR - Error executing function get_team_attendance: 'HRService' object has no attribute 'get_team_data'
2025-04-25 15:21:03,662 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:21:05,281 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:21:06,891 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:21:07,695 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/messages "HTTP/1.1 200 OK"
2025-04-25 15:29:44,660 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:29:44,661 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 15:29:44,661 - hr_assistant - INFO - Processing query for employee EMP103: show my personal attendance
2025-04-25 15:29:46,712 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 15:29:46,713 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 15:29:47,359 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn "HTTP/1.1 200 OK"
2025-04-25 15:29:47,359 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_TlyO5FKfYrXDfglBFovlKZVn
2025-04-25 15:29:47,915 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/messages "HTTP/1.1 200 OK"
2025-04-25 15:29:49,413 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs "HTTP/1.1 200 OK"
2025-04-25 15:29:50,736 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:29:52,332 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:29:52,333 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-25 15:29:52,333 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-25 15:29:52,333 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:29:52,333 - hr_assistant - ERROR - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:29:52,333 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:29:55,441 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:29:56,972 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:29:58,510 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:29:58,511 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-25 15:29:58,511 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: recent, include_team: None)
2025-04-25 15:29:58,511 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:29:58,511 - hr_assistant - ERROR - Error executing function get_attendance: 'success'
2025-04-25 15:29:59,604 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:30:01,139 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:30:02,900 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:30:04,884 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:30:05,276 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/messages "HTTP/1.1 200 OK"
2025-04-25 15:33:58,811 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:34:23,367 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:35:26,595 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:35:26,596 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:35:26,596 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:35:26,596 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:35:28,441 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:35:29,376 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-25 15:35:29,377 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:35:29,379 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 15:35:33,263 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:35:33,264 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 15:35:33,264 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 15:35:33,264 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 15:35:34,848 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 15:35:34,853 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 15:35:34,853 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 15:35:35,393 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 15:35:35,971 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/messages "HTTP/1.1 200 OK"
2025-04-25 15:35:37,775 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs "HTTP/1.1 200 OK"
2025-04-25 15:35:38,595 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:40,158 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:40,160 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:35:40,160 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 15:35:40,160 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:35:40,160 - hr_assistant - INFO - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:35:40,161 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:35:41,098 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:42,655 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:44,239 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:44,240 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-25 15:35:44,240 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:35:45,907 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:47,461 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:49,009 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:49,010 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:35:49,010 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 15:35:49,010 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:35:49,011 - hr_assistant - INFO - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:35:49,011 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:35:50,337 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:51,910 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:52,463 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:35:52,464 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-25 15:35:52,464 - hr_assistant - ERROR - Error executing function get_team_attendance: 'HRService' object has no attribute 'get_team_data'
2025-04-25 15:35:53,630 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:55,333 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:55,334 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 15:35:55,335 - hr_assistant - ERROR - Error executing function get_team_data: 'HRService' object has no attribute 'get_team_data'
2025-04-25 15:35:56,811 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:58,334 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:59,849 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:36:00,467 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/messages "HTTP/1.1 200 OK"
2025-04-25 15:36:17,824 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:36:17,825 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 15:36:17,826 - hr_assistant - INFO - Processing query for employee EMP103: get my personal attendance
2025-04-25 15:36:19,037 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 15:36:19,038 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 15:36:19,571 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ "HTTP/1.1 200 OK"
2025-04-25 15:36:19,572 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_bSO9KuAB5szhkUtDbKea1WEZ
2025-04-25 15:36:20,212 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/messages "HTTP/1.1 200 OK"
2025-04-25 15:36:29,178 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs "HTTP/1.1 200 OK"
2025-04-25 15:36:29,708 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:30,314 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-25 15:36:30,314 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-25 15:36:30,314 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:36:30,314 - hr_assistant - INFO - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:36:30,315 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:36:31,735 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:36:33,415 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:35,731 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:36,396 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-25 15:36:36,396 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:36:37,792 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:36:39,325 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:41,195 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:43,249 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': '66d824a199b629cbdb2e0f2d', 'date_type': 'recent'}
2025-04-25 15:36:43,249 - hr_assistant - INFO - Fetching personal attendance for employee: 66d824a199b629cbdb2e0f2d (date_type: recent)
2025-04-25 15:36:43,249 - hr_assistant - INFO - Attempting login for user: {'empId': '66d824a199b629cbdb2e0f2d', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:36:44,153 - hr_assistant - ERROR - Login error: argument of type 'NoneType' is not iterable
2025-04-25 15:36:44,155 - hr_assistant - ERROR - Failed to get token for employee: 66d824a199b629cbdb2e0f2d
2025-04-25 15:36:47,622 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:36:50,713 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:51,528 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/messages "HTTP/1.1 200 OK"
2025-04-25 15:47:09,764 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:47:25,898 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:47:25,898 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:47:25,898 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 15:47:25,898 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 15:47:28,209 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:47:29,245 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 15:47:29,247 - hr_assistant - WARNING - Error extracting employee name: 'list' object has no attribute 'get'
2025-04-25 15:47:29,247 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 15:49:06,276 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:49:15,061 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:49:15,061 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:49:15,061 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 15:49:15,062 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 15:49:16,686 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:49:17,601 - hr_assistant - ERROR - Error retrieving employee data: 'list' object has no attribute 'first'
2025-04-25 15:49:17,602 - hr_assistant - ERROR - Failed to get employee data: Failed to retrieve employee data: 'list' object has no attribute 'first'
2025-04-25 15:51:44,492 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:51:48,544 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:51:48,544 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:51:48,544 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 15:51:48,544 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 15:51:50,138 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:51:51,127 - hr_assistant - ERROR - Error retrieving employee data: 'list' object has no attribute 'first'
2025-04-25 15:51:51,128 - hr_assistant - ERROR - Failed to get employee data: Failed to retrieve employee data: 'list' object has no attribute 'first'
2025-04-25 15:52:30,005 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:52:52,122 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:53:02,077 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:53:02,077 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:53:02,077 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 15:53:02,077 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 15:53:03,765 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:53:04,705 - hr_assistant - INFO - Retrieved employee data: [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]
2025-04-25 15:53:04,706 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 15:53:04,708 - hr_assistant - WARNING - Error extracting employee name: 'list' object has no attribute 'get'
2025-04-25 15:53:04,708 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:11:16,670 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:11:29,173 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:11:29,173 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 16:11:29,173 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 16:11:29,173 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 16:11:30,634 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 16:11:31,560 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 16:11:31,561 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 16:11:31,563 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:11:37,492 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:11:37,492 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:11:37,492 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 16:11:37,492 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:11:39,087 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:11:39,100 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:11:39,100 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 16:11:40,013 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:11:40,833 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/messages "HTTP/1.1 200 OK"
2025-04-25 16:11:42,921 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs "HTTP/1.1 200 OK"
2025-04-25 16:11:43,553 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:45,231 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:46,829 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:46,834 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 16:11:46,834 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 16:11:47,923 - hr_assistant - INFO - Successfully retrieved attendance data for employee: EMP103
2025-04-25 16:11:49,096 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:11:51,274 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:52,737 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:53,810 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/messages "HTTP/1.1 200 OK"
2025-04-25 16:15:50,920 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:15:50,921 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:15:50,921 - hr_assistant - INFO - Processing query for employee EMP103: get my personal attendance
2025-04-25 16:15:52,108 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:15:52,109 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:15:53,244 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ "HTTP/1.1 200 OK"
2025-04-25 16:15:53,245 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_EVuvYpQes3oIWpSm0wdLb2OJ
2025-04-25 16:15:53,807 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/messages "HTTP/1.1 200 OK"
2025-04-25 16:15:54,918 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs "HTTP/1.1 200 OK"
2025-04-25 16:15:55,487 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq "HTTP/1.1 200 OK"
2025-04-25 16:15:57,023 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq "HTTP/1.1 200 OK"
2025-04-25 16:15:57,024 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-25 16:15:57,024 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-25 16:15:58,560 - hr_assistant - INFO - Successfully retrieved attendance data for employee: EMP103
2025-04-25 16:15:59,892 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:16:01,428 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq "HTTP/1.1 200 OK"
2025-04-25 16:16:02,947 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq "HTTP/1.1 200 OK"
2025-04-25 16:16:03,372 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/messages "HTTP/1.1 200 OK"
2025-04-25 16:17:55,317 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:18:03,506 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:18:21,706 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:18:21,706 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 16:18:21,706 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 16:18:21,706 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 16:18:23,162 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 16:18:24,097 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 16:18:24,098 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 16:18:24,099 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:18:27,488 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:18:27,489 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:18:27,489 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 16:18:27,489 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:18:29,147 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:18:29,153 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:18:29,153 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 16:18:29,589 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:18:30,106 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/messages "HTTP/1.1 200 OK"
2025-04-25 16:18:31,655 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs "HTTP/1.1 200 OK"
2025-04-25 16:18:32,153 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:33,689 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:35,225 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:35,228 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 16:18:35,229 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 16:18:35,229 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-01/2025-04-25?page=0&limit=50
2025-04-25 16:18:36,454 - hr_assistant - INFO - Successfully retrieved attendance data for employee: EMP103
2025-04-25 16:18:37,335 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:18:38,850 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:40,345 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:40,714 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/messages "HTTP/1.1 200 OK"
2025-04-25 16:19:32,945 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:19:47,040 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-25 16:19:47,040 - hr_assistant - INFO - Fetching fresh employee data for employee EMP105
2025-04-25 16:19:47,040 - hr_assistant - INFO - Requesting employee data for: EMP105
2025-04-25 16:19:47,040 - hr_assistant - INFO - Attempting login for user: EMP105
2025-04-25 16:19:48,871 - hr_assistant - INFO - Login successful for user: EMP105
2025-04-25 16:19:49,893 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-25 16:19:49,894 - hr_assistant - INFO - Successfully retrieved data for employee: EMP105
2025-04-25 16:19:49,896 - hr_assistant - INFO - Sending initial greeting to employee: EMP105
2025-04-25 16:20:15,372 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-25 16:20:15,372 - hr_assistant - INFO - Using cached employee data for employee EMP105
2025-04-25 16:20:15,372 - hr_assistant - INFO - Processing query for employee EMP105: Show my attendance this month
2025-04-25 16:20:15,372 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:20:16,442 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:20:16,450 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:20:16,451 - hr_assistant - INFO - Creating new thread for employee EMP105
2025-04-25 16:20:17,016 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:20:18,357 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/messages "HTTP/1.1 200 OK"
2025-04-25 16:20:20,286 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs "HTTP/1.1 200 OK"
2025-04-25 16:20:20,899 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD "HTTP/1.1 200 OK"
2025-04-25 16:20:22,970 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD "HTTP/1.1 200 OK"
2025-04-25 16:20:22,971 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP105', 'date_type': 'this_month'}
2025-04-25 16:20:22,971 - hr_assistant - INFO - Fetching personal attendance for employee: EMP105 (date_type: this_month)
2025-04-25 16:20:22,972 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a/2025-04-01/2025-04-25?page=0&limit=50
2025-04-25 16:20:24,056 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}}
2025-04-25 16:20:24,903 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:20:26,532 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD "HTTP/1.1 200 OK"
2025-04-25 16:20:28,598 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD "HTTP/1.1 200 OK"
2025-04-25 16:20:29,157 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/messages "HTTP/1.1 200 OK"
2025-04-25 16:23:09,645 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:23:12,587 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:23:26,100 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:23:30,975 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:23:30,976 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 16:23:30,976 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 16:23:30,976 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 16:23:32,478 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 16:23:33,406 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 16:23:33,407 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 16:23:33,408 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:23:39,627 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:23:39,627 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:23:39,627 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 16:23:39,628 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:23:40,638 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:23:40,645 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:23:40,645 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 16:23:41,084 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:23:41,623 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/messages "HTTP/1.1 200 OK"
2025-04-25 16:23:42,740 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs "HTTP/1.1 200 OK"
2025-04-25 16:23:43,315 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:44,877 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:46,343 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:46,355 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 16:23:46,373 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 16:23:46,374 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 16:23:47,543 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 17, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 16:23:48,564 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:23:50,099 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:51,737 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:53,273 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:54,809 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:56,345 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:58,095 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:24:00,556 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:24:02,150 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:24:03,660 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:24:04,142 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/messages "HTTP/1.1 200 OK"
2025-04-25 16:30:21,946 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:30:41,592 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:30:41,592 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 16:30:41,592 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 16:30:41,592 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 16:30:43,909 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 16:30:44,841 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 16:30:44,842 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 16:30:44,843 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:31:00,346 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:31:00,346 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:31:00,346 - hr_assistant - INFO - Processing query for employee EMP103: show my team attendance
2025-04-25 16:31:00,346 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:31:01,526 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:31:01,532 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:31:01,532 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 16:31:02,055 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:31:02,596 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/messages "HTTP/1.1 200 OK"
2025-04-25 16:31:07,588 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs "HTTP/1.1 200 OK"
2025-04-25 16:31:08,263 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:09,788 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:11,785 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:13,269 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:13,271 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103'}
2025-04-25 16:31:13,271 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-25 16:31:13,271 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 16:31:14,034 - hr_assistant - ERROR - Error retrieving team data: 404 Client Error: Not Found for url: https://dev.nashrms.com/api/c-employee/getEmployeesByManagerId/66d824a199b629cbdb2e0f2d
2025-04-25 16:31:14,904 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:31:16,751 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:18,288 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:18,289 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 16:31:18,289 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 16:31:20,785 - hr_assistant - ERROR - Error retrieving team data: 404 Client Error: Not Found for url: https://dev.nashrms.com/api/c-employee/getEmployeesByManagerId/66d824a199b629cbdb2e0f2d
2025-04-25 16:31:21,732 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:31:23,315 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:25,558 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:25,945 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/messages "HTTP/1.1 200 OK"
2025-04-25 17:18:12,145 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:18:45,695 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:18:45,695 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:18:45,696 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:18:45,696 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:18:47,860 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:18:48,828 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:18:48,829 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:18:48,830 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:18:58,629 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:18:58,629 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:18:58,629 - hr_assistant - INFO - Processing query for employee EMP103: get my team data
2025-04-25 17:18:58,630 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:19:00,005 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:19:00,013 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:19:00,013 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:19:00,631 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:19:01,172 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/messages "HTTP/1.1 200 OK"
2025-04-25 17:19:02,508 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs "HTTP/1.1 200 OK"
2025-04-25 17:19:03,371 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:04,996 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:06,676 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:06,679 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:19:06,679 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:19:06,679 - hr_assistant - INFO - cache data for manager EMP103
2025-04-25 17:19:07,745 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Branch not found", "data": null}
2025-04-25 17:19:08,708 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:19:10,197 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:11,719 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:11,720 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:19:11,720 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:19:11,720 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-04-25 17:19:15,775 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:19:17,351 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:18,885 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:18,887 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103'}
2025-04-25 17:19:18,887 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-25 17:19:18,887 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:19:18,887 - hr_assistant - INFO - cache data for manager EMP103
2025-04-25 17:19:19,818 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Branch not found", "data": null}
2025-04-25 17:19:20,741 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:19:22,309 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:23,905 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:25,379 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:26,480 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/messages "HTTP/1.1 200 OK"
2025-04-25 17:20:00,789 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:20:08,096 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:20:08,097 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:20:08,097 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:20:08,097 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:20:09,696 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:20:10,610 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:20:10,610 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:20:10,612 - hr_assistant - INFO - Processing query for employee EMP103: get my team data
2025-04-25 17:20:10,612 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:20:11,314 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:20:11,320 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:20:11,320 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:20:12,168 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:20:12,951 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/messages "HTTP/1.1 200 OK"
2025-04-25 17:20:14,389 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs "HTTP/1.1 200 OK"
2025-04-25 17:20:15,163 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ "HTTP/1.1 200 OK"
2025-04-25 17:20:16,965 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ "HTTP/1.1 200 OK"
2025-04-25 17:20:16,970 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:20:16,970 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:20:16,970 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:20:17,906 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Branch not found", "data": null}
2025-04-25 17:20:19,096 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:20:20,621 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ "HTTP/1.1 200 OK"
2025-04-25 17:20:22,139 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ "HTTP/1.1 200 OK"
2025-04-25 17:20:22,580 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/messages "HTTP/1.1 200 OK"
2025-04-25 17:21:47,607 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:21:53,680 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:21:53,680 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:21:53,680 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:21:53,680 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:21:55,180 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:21:56,187 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:21:56,188 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:21:56,190 - hr_assistant - INFO - Processing query for employee EMP103: get my team data
2025-04-25 17:21:56,190 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:21:58,724 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:21:58,730 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:21:58,731 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:21:59,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:22:00,363 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/messages "HTTP/1.1 200 OK"
2025-04-25 17:22:01,796 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs "HTTP/1.1 200 OK"
2025-04-25 17:22:02,620 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:04,240 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:04,241 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:22:04,241 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:22:04,242 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:22:05,233 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 0 team members
2025-04-25 17:22:06,255 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:22:07,703 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:09,278 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:11,906 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:13,379 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:14,903 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:16,418 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:17,884 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:19,334 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:20,781 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:22,274 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:24,020 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:25,795 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:27,395 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:28,870 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:30,414 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:31,977 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:33,646 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:35,276 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:36,300 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-25 17:22:48,536 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:22:56,857 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:23:03,027 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:23:03,028 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:23:03,028 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:23:03,028 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:23:04,676 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:23:07,450 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:23:07,450 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:23:07,452 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:23:29,648 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:23:29,648 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:23:29,648 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:23:29,648 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:23:30,693 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:23:30,700 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:23:30,700 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:23:32,300 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:23:33,036 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/messages "HTTP/1.1 200 OK"
2025-04-25 17:23:34,469 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs "HTTP/1.1 200 OK"
2025-04-25 17:23:34,986 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT "HTTP/1.1 200 OK"
2025-04-25 17:23:36,461 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT "HTTP/1.1 200 OK"
2025-04-25 17:23:36,463 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:23:36,463 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:23:36,463 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:23:36,463 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:23:36,464 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:23:38,568 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 0 team members
2025-04-25 17:23:38,570 - hr_assistant - WARNING - No team members found for employee: EMP103
2025-04-25 17:23:39,819 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:23:41,336 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT "HTTP/1.1 200 OK"
2025-04-25 17:23:42,819 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT "HTTP/1.1 200 OK"
2025-04-25 17:23:43,181 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/messages "HTTP/1.1 200 OK"
2025-04-25 17:25:29,252 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:25:34,962 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:25:47,993 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:25:47,993 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:25:47,993 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:25:47,993 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:25:49,555 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:25:50,590 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:25:50,591 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:25:50,593 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:25:56,212 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:25:56,212 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:25:56,212 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:25:56,212 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:25:57,279 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:25:57,287 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:25:57,287 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:25:57,820 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:25:58,319 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/messages "HTTP/1.1 200 OK"
2025-04-25 17:26:00,000 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs "HTTP/1.1 200 OK"
2025-04-25 17:26:00,632 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx "HTTP/1.1 200 OK"
2025-04-25 17:26:02,735 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx "HTTP/1.1 200 OK"
2025-04-25 17:26:02,737 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:26:02,737 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:26:02,737 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:26:02,738 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:26:02,738 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:26:03,708 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 0 team members
2025-04-25 17:26:03,710 - hr_assistant - WARNING - No team members found for employee: EMP103
2025-04-25 17:26:07,138 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:26:08,673 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx "HTTP/1.1 200 OK"
2025-04-25 17:26:10,209 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx "HTTP/1.1 200 OK"
2025-04-25 17:26:10,610 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/messages "HTTP/1.1 200 OK"
2025-04-25 17:26:56,841 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:27:02,277 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:27:02,277 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:27:02,278 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:27:02,278 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:27:03,986 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:27:04,966 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:27:04,966 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:27:04,968 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:27:04,968 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:27:06,410 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:27:06,416 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:27:06,416 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:27:06,937 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:27:07,552 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/messages "HTTP/1.1 200 OK"
2025-04-25 17:27:13,692 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs "HTTP/1.1 200 OK"
2025-04-25 17:27:14,167 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:16,286 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:17,827 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:17,830 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:27:17,830 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:27:17,830 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:27:17,830 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:27:17,831 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:27:19,022 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:27:19,022 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 0 team members
2025-04-25 17:27:19,024 - hr_assistant - WARNING - No team members found for employee: EMP103
2025-04-25 17:27:20,601 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:27:22,068 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:23,541 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:24,427 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/messages "HTTP/1.1 200 OK"
2025-04-25 17:28:06,765 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:28:12,902 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:28:23,859 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:28:23,859 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:28:23,859 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:28:23,859 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:28:25,392 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:28:26,318 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:28:26,318 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:28:26,320 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:28:30,492 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:28:30,492 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:28:30,492 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:28:30,493 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:28:32,210 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:28:32,216 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:28:32,216 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:28:32,737 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:28:34,020 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/messages "HTTP/1.1 200 OK"
2025-04-25 17:28:36,965 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs "HTTP/1.1 200 OK"
2025-04-25 17:28:37,421 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:38,874 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:40,318 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:40,320 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:28:40,320 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:28:40,320 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:28:40,320 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:28:40,321 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:28:41,310 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:28:41,311 - hr_assistant - ERROR - Error retrieving team data: '_id'
2025-04-25 17:28:42,268 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:28:43,804 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:45,427 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:45,429 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:28:45,429 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:28:45,429 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:28:45,430 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:28:47,407 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:28:47,407 - hr_assistant - ERROR - Error retrieving team data: '_id'
2025-04-25 17:28:48,414 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:28:49,972 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:51,483 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:51,485 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103'}
2025-04-25 17:28:51,485 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-25 17:28:51,485 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:28:51,485 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:28:51,485 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:28:52,490 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:28:52,490 - hr_assistant - ERROR - Error retrieving team data: '_id'
2025-04-25 17:28:53,838 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:28:55,322 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:56,762 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:58,216 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:59,699 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:29:01,283 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:29:01,648 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/messages "HTTP/1.1 200 OK"
2025-04-25 17:30:50,319 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:32:40,566 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:32:46,927 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:32:46,927 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:32:46,927 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:32:46,927 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:32:48,940 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:32:49,926 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:32:49,927 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:32:49,929 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:32:49,929 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:32:51,814 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:32:51,821 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:32:51,821 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:32:52,245 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:32:52,740 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/messages "HTTP/1.1 200 OK"
2025-04-25 17:32:53,842 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs "HTTP/1.1 200 OK"
2025-04-25 17:32:54,353 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21 "HTTP/1.1 200 OK"
2025-04-25 17:32:55,903 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21 "HTTP/1.1 200 OK"
2025-04-25 17:32:55,905 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:32:55,905 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:32:55,905 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:32:55,905 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:32:55,905 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:32:56,835 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:32:56,835 - hr_assistant - ERROR - Error retrieving team data: GlobalHRCache.set_team_data() takes 3 positional arguments but 4 were given
2025-04-25 17:32:58,499 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:33:00,481 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21 "HTTP/1.1 200 OK"
2025-04-25 17:33:02,064 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21 "HTTP/1.1 200 OK"
2025-04-25 17:33:02,430 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/messages "HTTP/1.1 200 OK"
2025-04-25 17:33:55,654 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:34:01,836 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:34:11,057 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:34:11,057 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:34:11,057 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:34:11,058 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:34:12,828 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:34:13,934 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:34:13,934 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:34:13,936 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:34:33,292 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:34:33,293 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:34:33,293 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance data for today
2025-04-25 17:34:33,293 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:34:34,996 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:34:35,003 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:34:35,003 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:34:35,519 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:34:36,555 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/messages "HTTP/1.1 200 OK"
2025-04-25 17:34:38,101 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs "HTTP/1.1 200 OK"
2025-04-25 17:34:38,709 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:40,445 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:40,447 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:34:40,447 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:34:40,447 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:34:40,448 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:34:40,448 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:34:41,361 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:34:41,361 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:34:41,361 - hr_assistant - ERROR - Error retrieving team data: GlobalHRCache.set_team_data() takes 3 positional arguments but 4 were given
2025-04-25 17:34:42,807 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:34:44,284 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:45,751 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:47,335 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:47,336 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:34:47,337 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:34:47,337 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:34:47,338 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:34:48,294 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:34:48,294 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:34:48,294 - hr_assistant - ERROR - Error retrieving team data: GlobalHRCache.set_team_data() takes 3 positional arguments but 4 were given
2025-04-25 17:34:49,310 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:34:50,792 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:52,297 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:52,298 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today', 'include_team': True}
2025-04-25 17:34:52,298 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: today, include_team: True)
2025-04-25 17:34:52,298 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:34:52,298 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-04-25 17:34:52,298 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: True
2025-04-25 17:34:52,298 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:34:52,298 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:34:52,298 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:34:52,299 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:34:53,215 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:34:53,215 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:34:53,215 - hr_assistant - ERROR - Error retrieving team data: GlobalHRCache.set_team_data() takes 3 positional arguments but 4 were given
2025-04-25 17:34:55,339 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:34:56,791 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:58,400 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:59,865 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:35:01,060 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/messages "HTTP/1.1 200 OK"
2025-04-25 17:35:10,139 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:35:15,226 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:35:15,227 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:35:15,227 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:35:15,227 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:35:16,718 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:35:17,832 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:35:17,833 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:35:17,835 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance data for today
2025-04-25 17:35:17,835 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:35:18,822 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:35:19,019 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:35:19,019 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:35:19,578 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:35:20,089 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/messages "HTTP/1.1 200 OK"
2025-04-25 17:35:21,497 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs "HTTP/1.1 200 OK"
2025-04-25 17:35:21,958 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:23,438 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:23,441 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:35:23,441 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:35:23,441 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:35:23,441 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:35:23,442 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:35:24,353 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:35:24,353 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:35:24,353 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-25 17:35:25,479 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-25 17:35:26,431 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:35:27,899 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:29,513 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:31,064 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:32,533 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:32,896 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/messages "HTTP/1.1 200 OK"
2025-04-25 17:36:11,926 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:36:11,926 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:36:11,926 - hr_assistant - INFO - Processing query for employee EMP103: what was my team attendance yesterday
2025-04-25 17:36:13,837 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:36:13,838 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:36:14,449 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee "HTTP/1.1 200 OK"
2025-04-25 17:36:14,450 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_NkK7wIVZnCeipiTLLjSsA5ee
2025-04-25 17:36:14,958 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/messages "HTTP/1.1 200 OK"
2025-04-25 17:36:21,215 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs "HTTP/1.1 200 OK"
2025-04-25 17:36:21,668 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:23,189 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:24,677 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:24,678 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': '2025-04-24'}
2025-04-25 17:36:24,678 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: 2025-04-24)
2025-04-25 17:36:24,678 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:36:24,679 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:36:24,679 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:36:25,579 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:36:25,579 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:36:25,579 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-25 17:36:26,735 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-25 17:36:27,656 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:36:29,212 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:30,732 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:32,200 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:32,649 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/messages "HTTP/1.1 200 OK"
2025-04-25 17:41:08,572 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:41:34,866 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:41:40,145 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:41:40,145 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:41:40,145 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:41:40,146 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:41:41,613 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:41:42,640 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:41:42,641 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:41:42,643 - hr_assistant - INFO - Processing query for employee EMP103: what was my team attendance yesterday
2025-04-25 17:41:42,643 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:41:44,162 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:41:44,170 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:41:44,170 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:41:44,591 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:41:45,135 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/messages "HTTP/1.1 200 OK"
2025-04-25 17:41:46,613 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs "HTTP/1.1 200 OK"
2025-04-25 17:41:47,096 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:41:48,773 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:41:48,775 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'month_04_2025'}
2025-04-25 17:41:48,775 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: month_04_2025)
2025-04-25 17:41:48,775 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:41:48,775 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:41:48,776 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:41:49,707 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-25 17:41:49,709 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-25/2025-04-18?page=0&limit=50
2025-04-25 17:41:50,901 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-25 17:41:54,507 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:41:56,043 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:41:57,529 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:41:59,034 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:42:00,678 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:42:02,184 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:42:03,723 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:42:04,132 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/messages "HTTP/1.1 200 OK"
2025-04-25 17:48:54,772 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:48:55,544 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:48:55,544 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:48:55,544 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:48:55,544 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:48:57,829 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:48:58,822 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:48:58,823 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:48:58,824 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 17:48:58,824 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:48:59,907 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:48:59,918 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:48:59,918 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:49:00,427 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:49:00,981 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/messages "HTTP/1.1 200 OK"
2025-04-25 17:51:11,211 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs "HTTP/1.1 500 Internal Server Error"
2025-04-25 17:51:11,218 - openai._base_client - INFO - Retrying request to /threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs in 0.496392 seconds
2025-04-25 17:51:12,989 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs "HTTP/1.1 200 OK"
2025-04-25 17:51:14,166 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:15,800 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:15,803 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 17:51:15,803 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 17:51:15,803 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 17:51:16,998 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 17, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 17:51:18,109 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:51:19,555 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:21,070 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:22,537 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:24,095 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:25,569 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:27,013 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:27,390 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/messages "HTTP/1.1 200 OK"
2025-04-25 17:55:56,411 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:56:00,617 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:56:00,617 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:56:00,617 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:56:00,617 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:56:02,114 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:56:03,069 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:56:03,070 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:56:03,072 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:56:11,700 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:56:11,700 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:56:11,700 - hr_assistant - INFO - Processing query for employee EMP103: What is my current months attendance ?
2025-04-25 17:56:11,700 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:56:12,762 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:56:12,770 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:56:12,770 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:56:13,974 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:56:14,588 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/messages "HTTP/1.1 200 OK"
2025-04-25 17:56:15,977 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs "HTTP/1.1 200 OK"
2025-04-25 17:56:16,535 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:18,155 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:18,157 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 17:56:18,157 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 17:56:18,157 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 17:56:19,288 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 17, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 17:56:20,425 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:56:21,909 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:23,394 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:25,137 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:26,636 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:28,208 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:29,671 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:31,312 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:32,974 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:34,555 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:36,091 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:37,588 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:37,948 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/messages "HTTP/1.1 200 OK"
2025-04-25 18:04:11,272 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 18:04:11,273 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 18:04:11,273 - hr_assistant - INFO - Processing query for employee EMP103: What is my team attendance for current month ?
2025-04-25 18:04:12,673 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 18:04:12,674 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 18:04:13,161 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW "HTTP/1.1 200 OK"
2025-04-25 18:04:13,162 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_sbrfqQReFZDPzkpiZb60vWjW
2025-04-25 18:04:15,954 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/messages "HTTP/1.1 200 OK"
2025-04-25 18:04:17,788 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs "HTTP/1.1 200 OK"
2025-04-25 18:04:18,308 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:19,832 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:21,327 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:21,328 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 18:04:21,328 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-25 18:04:21,328 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 18:04:21,328 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 18:04:21,329 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 18:04:22,955 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-25 18:04:22,957 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 18:04:24,559 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-25 18:04:26,205 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 18:04:27,730 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:29,291 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:31,210 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:32,728 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:34,180 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:35,719 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:37,185 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:38,687 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:40,181 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:41,757 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:42,163 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/messages "HTTP/1.1 200 OK"
2025-04-25 18:21:01,152 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 18:21:12,058 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 18:21:12,058 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 18:21:12,059 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 18:21:12,059 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 18:21:16,832 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 18:21:18,388 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 18:21:18,389 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 18:21:18,391 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 18:21:34,475 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 18:21:34,476 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 18:21:34,476 - hr_assistant - INFO - Processing query for employee EMP103: Was anns present yesterday?
2025-04-25 18:21:34,476 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 18:21:36,825 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 18:21:36,831 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 18:21:36,831 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 18:21:38,336 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 18:21:39,313 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/messages "HTTP/1.1 200 OK"
2025-04-25 18:21:42,304 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs "HTTP/1.1 200 OK"
2025-04-25 18:21:43,099 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:45,498 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:45,505 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': '2025-04-24'}
2025-04-25 18:21:45,505 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: 2025-04-24)
2025-04-25 18:21:45,506 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-24/2025-04-24?page=0&limit=50
2025-04-25 18:21:46,887 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 18:21:50,860 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 18:21:52,379 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:53,956 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:55,593 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:58,231 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:58,601 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/messages "HTTP/1.1 200 OK"
2025-04-25 18:54:44,123 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
