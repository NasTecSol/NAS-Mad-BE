2025-04-24 15:35:44,612 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 16:48:22,119 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 16:48:38,014 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 16:48:38,014 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 16:48:38,014 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 16:48:40,163 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 16:48:40,163 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 16:48:41,069 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 16:48:41,070 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 16:48:41,073 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 16:48:41,075 - hr_assistant - ERROR - Unexpected error in chat endpoint: 1 validation error for ChatResponse
thread_id
  Field required [type=missing, input_value={'response': "Good aftern... may I help you today?"}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-04-24 18:39:09,109 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:39:43,381 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:40:29,324 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:40:40,427 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:40:40,427 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:40:40,427 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:40:42,499 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:40:42,499 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 18:40:43,412 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:40:43,412 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:40:43,414 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 18:40:49,295 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:40:49,295 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:40:50,263 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:40:50,263 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:40:50,266 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 18:40:50,266 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:40:50,266 - hr_assistant - ERROR - Error generating response: name 'OpenAI' is not defined
2025-04-24 18:41:34,914 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:41:34,914 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:41:36,054 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:41:36,055 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:41:36,057 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 18:41:36,057 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:41:36,057 - hr_assistant - ERROR - Error generating response: name 'OpenAI' is not defined
2025-04-24 18:42:02,172 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:42:31,297 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:42:44,783 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:42:44,783 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:42:44,783 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:42:46,251 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:42:46,251 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 18:42:47,154 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:42:47,155 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:42:47,156 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 18:42:56,767 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:42:56,767 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:42:57,685 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:42:57,686 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:42:57,688 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 18:42:57,688 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:42:58,982 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:42:59,250 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:43:00,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 18:43:01,326 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/messages "HTTP/1.1 200 OK"
2025-04-24 18:43:03,806 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs "HTTP/1.1 200 OK"
2025-04-24 18:43:05,010 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:22,782 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 500 Internal Server Error"
2025-04-24 18:43:22,783 - openai._base_client - INFO - Retrying request to /threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK in 0.401150 seconds
2025-04-24 18:43:24,485 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:24,488 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 18:43:24,488 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: this_month, include_team: None)
2025-04-24 18:43:24,488 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:43:25,451 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:43:25,451 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:43:25,453 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: False
2025-04-24 18:43:25,453 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 18:43:25,453 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:43:26,368 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:43:26,368 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:43:26,370 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:43:27,319 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:43:29,093 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:30,611 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:32,150 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:32,150 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 18:43:32,151 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 18:43:32,151 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:43:33,075 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:43:33,075 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:43:33,078 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:43:49,859 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:43:51,640 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:53,168 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:43:54,705 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:02,229 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:03,725 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:05,228 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:06,796 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:08,334 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:09,829 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:11,343 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:12,904 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:14,747 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:16,242 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:17,813 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:19,377 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SUAukStdOh8lZYQVnJrVIE4G/runs/run_6CG3tdgnIuETyxSLpkbq8mJK "HTTP/1.1 200 OK"
2025-04-24 18:44:20,378 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 18:46:30,263 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:46:58,228 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:47:03,662 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:47:03,662 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:03,662 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:47:05,147 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:47:05,147 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 18:47:06,080 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:06,080 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:06,082 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 18:47:09,846 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:47:09,846 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:10,847 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:10,847 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:10,850 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 18:47:10,850 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:47:12,415 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:47:12,423 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:47:13,438 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 18:47:14,565 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/messages "HTTP/1.1 200 OK"
2025-04-24 18:47:17,296 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs "HTTP/1.1 200 OK"
2025-04-24 18:47:17,841 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:19,481 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:19,483 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 18:47:19,483 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 18:47:19,483 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:20,468 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:20,468 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:20,471 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:47:21,380 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:47:22,965 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:24,486 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:24,487 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 18:47:24,487 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: this_month, include_team: None)
2025-04-24 18:47:24,487 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:25,389 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:25,389 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:25,391 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: False
2025-04-24 18:47:25,391 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 18:47:25,391 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:47:26,298 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:47:26,299 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:47:26,302 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:47:29,310 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:47:31,067 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:32,561 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/runs/run_M4NM76qaGXmCfLZwW2nysq8n "HTTP/1.1 200 OK"
2025-04-24 18:47:32,997 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GiNMh8rJck4UVaRh4aKHax3D/messages "HTTP/1.1 200 OK"
2025-04-24 18:48:36,821 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:48:42,334 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-24 18:48:42,334 - hr_assistant - INFO - Fetching employee data for: EMP105
2025-04-24 18:48:42,334 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP105', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:48:43,774 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:48:43,774 - hr_assistant - INFO - Login successful for user: EMP105
2025-04-24 18:48:44,685 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP105
2025-04-24 18:48:44,685 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}]}
2025-04-24 18:48:44,687 - hr_assistant - INFO - Sending initial greeting to employee: EMP105
2025-04-24 18:48:58,423 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-24 18:48:58,423 - hr_assistant - INFO - Fetching employee data for: EMP105
2025-04-24 18:48:59,413 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP105
2025-04-24 18:48:59,413 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}]}
2025-04-24 18:48:59,415 - hr_assistant - INFO - Processing query for employee EMP105: Show my attendance this month
2025-04-24 18:48:59,415 - hr_assistant - INFO - initialising open ai client with ID: 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
2025-04-24 18:49:01,130 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:49:01,135 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:49:01,674 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 18:49:02,291 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/messages "HTTP/1.1 200 OK"
2025-04-24 18:49:03,681 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs "HTTP/1.1 200 OK"
2025-04-24 18:49:04,134 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:06,135 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:07,588 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:09,080 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:11,286 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:12,752 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:14,232 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:15,848 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:17,345 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:18,878 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:20,367 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:21,850 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:23,359 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:24,826 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:26,295 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:27,815 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:29,322 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:30,862 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:32,398 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:33,936 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3G23YcLQfSwwn4M5xFZQSnG9/runs/run_jel6aiAoVpf4AtCc2bQ81KW0 "HTTP/1.1 200 OK"
2025-04-24 18:49:34,941 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 18:58:46,779 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 18:58:54,279 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:58:54,279 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:58:54,279 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 18:58:56,266 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 18:58:56,266 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 18:58:57,186 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:58:57,186 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:58:57,188 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 18:59:03,431 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:59:03,431 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:59:04,437 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:59:04,437 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:59:04,439 - hr_assistant - INFO - Processing query for employee EMP103: What's my leave balance?
2025-04-24 18:59:04,439 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-24 18:59:06,225 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:59:06,230 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:59:06,231 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-24 18:59:06,694 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 18:59:07,806 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 18:59:09,688 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs "HTTP/1.1 200 OK"
2025-04-24 18:59:10,160 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:12,161 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:12,164 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-24 18:59:12,164 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-24 18:59:12,164 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:59:13,142 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:59:13,142 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:59:13,144 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 18:59:14,122 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 18:59:16,218 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:17,848 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:19,377 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_CxjGoYOoqqeAG2DfK7zwT7mH "HTTP/1.1 200 OK"
2025-04-24 18:59:19,811 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 18:59:42,582 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 18:59:42,582 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 18:59:43,574 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 18:59:43,574 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 18:59:43,577 - hr_assistant - INFO - Processing query for employee EMP103: Show my profile details
2025-04-24 18:59:44,410 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 18:59:44,411 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 18:59:44,875 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr "HTTP/1.1 200 OK"
2025-04-24 18:59:44,876 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_S4z0z5g2AkjJ2dtW8vsfQajr
2025-04-24 18:59:45,549 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 18:59:46,928 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs "HTTP/1.1 200 OK"
2025-04-24 18:59:47,383 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:48,875 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:50,346 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:54,697 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:56,214 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_iMf7JioN0lBkKIDN2erbdp71 "HTTP/1.1 200 OK"
2025-04-24 18:59:56,590 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 19:00:15,219 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:00:15,220 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:00:16,127 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:00:16,127 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:00:16,129 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 19:00:17,253 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 19:00:17,254 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 19:00:18,306 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr "HTTP/1.1 200 OK"
2025-04-24 19:00:18,307 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_S4z0z5g2AkjJ2dtW8vsfQajr
2025-04-24 19:00:18,904 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/messages "HTTP/1.1 200 OK"
2025-04-24 19:00:22,582 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs "HTTP/1.1 200 OK"
2025-04-24 19:00:23,072 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:24,698 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:26,303 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:28,192 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:29,670 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:31,373 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:33,004 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:34,540 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:36,186 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:37,732 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:39,533 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:41,066 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:42,642 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:44,154 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:45,630 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:47,142 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:48,797 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:50,327 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:53,894 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:55,507 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_S4z0z5g2AkjJ2dtW8vsfQajr/runs/run_g1fNV6df7JJYG0BrphnUVzjy "HTTP/1.1 200 OK"
2025-04-24 19:00:56,511 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 19:12:54,077 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:16:15,907 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:16:19,864 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:16:19,864 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:16:19,864 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:16:22,471 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:16:22,471 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:16:23,461 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:16:23,462 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:16:23,465 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 19:16:28,349 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:16:28,349 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:16:28,350 - hr_assistant - ERROR - Error retrieving employee data: 'success'
2025-04-24 19:17:14,071 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:17:20,268 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:17:20,268 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:17:20,268 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:17:21,765 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:17:21,765 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:17:22,789 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:17:22,789 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:17:22,791 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 19:17:29,171 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:17:29,171 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:17:29,171 - hr_assistant - ERROR - Error retrieving employee data: 'success'
2025-04-24 19:17:42,568 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:17:44,171 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:17:44,171 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:17:44,172 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:17:45,591 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:17:45,591 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:17:46,495 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:17:46,495 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:17:46,497 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 19:17:46,497 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-24 19:17:48,185 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 19:17:48,190 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 19:17:48,190 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-24 19:17:49,474 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 19:17:50,161 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/messages "HTTP/1.1 200 OK"
2025-04-24 19:17:51,839 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs "HTTP/1.1 200 OK"
2025-04-24 19:17:53,066 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:17:54,740 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:17:56,205 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:17:56,206 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 19:17:56,206 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 19:17:56,206 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:17:56,206 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 19:18:08,241 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 19:18:09,946 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:11,639 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:13,370 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:14,911 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:16,422 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:21,718 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:23,590 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:25,151 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:26,687 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:28,223 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:29,759 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:31,328 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:32,817 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:32,818 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-24 19:18:32,818 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:18:33,945 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 19:18:35,479 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:36,924 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:36,925 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-24 19:18:36,925 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-24 19:18:36,925 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:18:36,925 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-24 19:18:37,859 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-24 19:18:39,385 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:40,922 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eKXf8t3Gxgn153HEYT4KyUzF/runs/run_jvK4bWcjBvuXRKRkUiw0B3lu "HTTP/1.1 200 OK"
2025-04-24 19:18:41,924 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 19:19:19,127 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:19:31,065 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:19:33,624 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:19:33,625 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:19:33,625 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:19:35,092 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:19:35,092 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:19:35,996 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:19:35,996 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:19:35,998 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 19:19:40,960 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:19:40,960 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:19:40,960 - hr_assistant - ERROR - Error - retrieving employee data: 'success'
2025-04-24 19:22:02,779 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:22:06,402 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:22:06,403 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:22:06,403 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:22:07,928 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:22:07,928 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:22:08,854 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:22:08,854 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:22:08,857 - hr_assistant - WARNING - Cache extracting employee name: {'success': True, 'data': {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}, 'message': 'Employee data retrieved successfully'}
2025-04-24 19:22:08,858 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-24 19:22:08,858 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-24 19:22:10,028 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-24 19:22:10,036 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-24 19:22:10,036 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-24 19:22:10,641 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-24 19:22:11,870 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/messages "HTTP/1.1 200 OK"
2025-04-24 19:22:13,348 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs "HTTP/1.1 200 OK"
2025-04-24 19:22:13,888 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:15,371 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:17,194 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:18,731 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:20,369 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:21,905 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:23,543 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:25,282 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:26,923 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:28,611 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:31,122 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:36,187 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:37,777 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:39,432 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:41,273 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:43,298 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:44,886 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:46,402 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:48,116 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:49,665 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VOdX5dz1F7YBpgIdwR8xNCQx/runs/run_bgofmeEl8rezBhSKmWF7pi4r "HTTP/1.1 200 OK"
2025-04-24 19:22:50,668 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-24 19:22:58,835 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-24 19:23:02,086 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:23:02,086 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:23:02,086 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-24 19:23:03,685 - hr_assistant - INFO - JWT decoded and verified successfully.
2025-04-24 19:23:03,685 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-24 19:23:04,655 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-24 19:23:04,655 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:23:04,657 - hr_assistant - WARNING - Cache extracting employee name: {'success': True, 'data': {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}, 'message': 'Employee data retrieved successfully'}
2025-04-24 19:23:04,658 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-24 19:23:38,241 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-24 19:23:38,242 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-24 19:23:38,242 - hr_assistant - WARNING - Cache extracting employee name: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-24 19:23:38,242 - hr_assistant - ERROR - Error - retrieving employee data: 'success'
2025-04-25 15:06:15,008 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:07:21,367 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:07:21,367 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:07:21,367 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:07:23,492 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:07:23,492 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:07:23,494 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:07:23,494 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:07:23,494 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:07:47,872 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:07:53,061 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:07:53,062 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:07:53,062 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:07:55,504 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:07:55,504 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:07:55,505 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:07:55,505 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:07:55,505 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:08:22,269 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:08:27,083 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-25 15:08:27,083 - hr_assistant - INFO - Fetching employee data for: EMP105
2025-04-25 15:08:27,083 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP105', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:08:28,487 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:08:28,487 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:08:28,489 - hr_assistant - ERROR - Failed to get token for employee: EMP105
2025-04-25 15:08:28,489 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:08:28,489 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:08:36,199 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:08:36,199 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:08:36,199 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:08:37,659 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:08:37,660 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:08:37,661 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:08:37,661 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:08:37,661 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:08:47,785 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:08:47,785 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:08:47,785 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:08:49,227 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:08:49,227 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:08:49,229 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:08:49,229 - hr_assistant - WARNING - Cache extracting employee name: {'success': False, 'message': 'Authentication failed'}
2025-04-25 15:08:49,229 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:14:52,758 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:14:58,919 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:16:12,227 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:16:12,228 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:16:12,228 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:16:12,228 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:16:13,661 - hr_assistant - ERROR - An unexpected error occurred during JWT processing: The token is not yet valid (iat)
2025-04-25 15:16:13,661 - hr_assistant - ERROR - Login error: JWT processing error: The token is not yet valid (iat)
2025-04-25 15:16:13,663 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-25 15:16:13,664 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-25 15:20:07,450 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:20:10,289 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:20:10,289 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:20:10,290 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:20:10,290 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:20:12,343 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:20:13,251 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-25 15:20:13,251 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:20:13,253 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 15:20:35,379 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:20:35,379 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 15:20:35,379 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 15:20:35,379 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 15:20:37,011 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 15:20:37,022 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 15:20:37,022 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 15:20:37,898 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 15:20:38,788 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/messages "HTTP/1.1 200 OK"
2025-04-25 15:20:40,433 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs "HTTP/1.1 200 OK"
2025-04-25 15:20:40,937 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:42,688 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:42,691 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:20:42,691 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 15:20:42,691 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:20:42,692 - hr_assistant - ERROR - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:20:42,692 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:20:44,398 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:20:46,060 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:47,704 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:47,705 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-25 15:20:47,705 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:20:51,082 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:20:52,584 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:54,148 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:54,149 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:20:54,150 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 15:20:54,150 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:20:54,150 - hr_assistant - ERROR - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:20:54,151 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:20:55,186 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:20:56,812 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:58,381 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:20:58,383 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:20:58,383 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-25 15:20:58,383 - hr_assistant - ERROR - Error executing function get_team_attendance: 'HRService' object has no attribute 'get_team_data'
2025-04-25 15:20:59,435 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:21:01,060 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:21:02,585 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:21:02,586 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:21:02,586 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-25 15:21:02,586 - hr_assistant - ERROR - Error executing function get_team_attendance: 'HRService' object has no attribute 'get_team_data'
2025-04-25 15:21:03,662 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:21:05,281 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:21:06,891 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_OwGbgCibXLSba1SRIXy1JSDV "HTTP/1.1 200 OK"
2025-04-25 15:21:07,695 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/messages "HTTP/1.1 200 OK"
2025-04-25 15:29:44,660 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:29:44,661 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 15:29:44,661 - hr_assistant - INFO - Processing query for employee EMP103: show my personal attendance
2025-04-25 15:29:46,712 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 15:29:46,713 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 15:29:47,359 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn "HTTP/1.1 200 OK"
2025-04-25 15:29:47,359 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_TlyO5FKfYrXDfglBFovlKZVn
2025-04-25 15:29:47,915 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/messages "HTTP/1.1 200 OK"
2025-04-25 15:29:49,413 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs "HTTP/1.1 200 OK"
2025-04-25 15:29:50,736 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:29:52,332 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:29:52,333 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-25 15:29:52,333 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-25 15:29:52,333 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:29:52,333 - hr_assistant - ERROR - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:29:52,333 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:29:55,441 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:29:56,972 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:29:58,510 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:29:58,511 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-25 15:29:58,511 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: recent, include_team: None)
2025-04-25 15:29:58,511 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:29:58,511 - hr_assistant - ERROR - Error executing function get_attendance: 'success'
2025-04-25 15:29:59,604 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:30:01,139 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:30:02,900 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:30:04,884 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/runs/run_GvnOEu7BCZhvcr6HQ5syUPNY "HTTP/1.1 200 OK"
2025-04-25 15:30:05,276 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TlyO5FKfYrXDfglBFovlKZVn/messages "HTTP/1.1 200 OK"
2025-04-25 15:33:58,811 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:34:23,367 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:35:26,595 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:35:26,596 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:35:26,596 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:35:26,596 - hr_assistant - INFO - Attempting login for user: {'empId': 'EMP103', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:35:28,441 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:35:29,376 - hr_assistant - INFO - Successfully retrieved ID for employee: EMP103
2025-04-25 15:35:29,377 - hr_assistant - INFO - Successfully retrieved Data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:35:29,379 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 15:35:33,263 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:35:33,264 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 15:35:33,264 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 15:35:33,264 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 15:35:34,848 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 15:35:34,853 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 15:35:34,853 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 15:35:35,393 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 15:35:35,971 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/messages "HTTP/1.1 200 OK"
2025-04-25 15:35:37,775 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs "HTTP/1.1 200 OK"
2025-04-25 15:35:38,595 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:40,158 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:40,160 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:35:40,160 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 15:35:40,160 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:35:40,160 - hr_assistant - INFO - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:35:40,161 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:35:41,098 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:42,655 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:44,239 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:44,240 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-25 15:35:44,240 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:35:45,907 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:47,461 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:49,009 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:49,010 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:35:49,010 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 15:35:49,010 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:35:49,011 - hr_assistant - INFO - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:35:49,011 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:35:50,337 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:51,910 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:52,463 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 15:35:52,464 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-25 15:35:52,464 - hr_assistant - ERROR - Error executing function get_team_attendance: 'HRService' object has no attribute 'get_team_data'
2025-04-25 15:35:53,630 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:55,333 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:55,334 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 15:35:55,335 - hr_assistant - ERROR - Error executing function get_team_data: 'HRService' object has no attribute 'get_team_data'
2025-04-25 15:35:56,811 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:35:58,334 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:35:59,849 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_iQCTb3uqG3jaAQa0szf2AMv4 "HTTP/1.1 200 OK"
2025-04-25 15:36:00,467 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/messages "HTTP/1.1 200 OK"
2025-04-25 15:36:17,824 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:36:17,825 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 15:36:17,826 - hr_assistant - INFO - Processing query for employee EMP103: get my personal attendance
2025-04-25 15:36:19,037 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 15:36:19,038 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 15:36:19,571 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ "HTTP/1.1 200 OK"
2025-04-25 15:36:19,572 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_bSO9KuAB5szhkUtDbKea1WEZ
2025-04-25 15:36:20,212 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/messages "HTTP/1.1 200 OK"
2025-04-25 15:36:29,178 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs "HTTP/1.1 200 OK"
2025-04-25 15:36:29,708 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:30,314 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-25 15:36:30,314 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-25 15:36:30,314 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:36:30,314 - hr_assistant - INFO - cache employee database for {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]}
2025-04-25 15:36:30,315 - hr_assistant - ERROR - Missing employee database ID for EMP103
2025-04-25 15:36:31,735 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:36:33,415 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:35,731 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:36,396 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-25 15:36:36,396 - hr_assistant - INFO - Fetching employee data for: EMP103
2025-04-25 15:36:37,792 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:36:39,325 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:41,195 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:43,249 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': '66d824a199b629cbdb2e0f2d', 'date_type': 'recent'}
2025-04-25 15:36:43,249 - hr_assistant - INFO - Fetching personal attendance for employee: 66d824a199b629cbdb2e0f2d (date_type: recent)
2025-04-25 15:36:43,249 - hr_assistant - INFO - Attempting login for user: {'empId': '66d824a199b629cbdb2e0f2d', 'password': '123456', 'macAddress': '206.84.153.69'}
2025-04-25 15:36:44,153 - hr_assistant - ERROR - Login error: argument of type 'NoneType' is not iterable
2025-04-25 15:36:44,155 - hr_assistant - ERROR - Failed to get token for employee: 66d824a199b629cbdb2e0f2d
2025-04-25 15:36:47,622 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 15:36:50,713 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/runs/run_8dqrfwhq0l0hPXuxFIgLLv0P "HTTP/1.1 200 OK"
2025-04-25 15:36:51,528 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bSO9KuAB5szhkUtDbKea1WEZ/messages "HTTP/1.1 200 OK"
2025-04-25 15:47:09,764 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:47:25,898 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:47:25,898 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:47:25,898 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 15:47:25,898 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 15:47:28,209 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:47:29,245 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 15:47:29,247 - hr_assistant - WARNING - Error extracting employee name: 'list' object has no attribute 'get'
2025-04-25 15:47:29,247 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 15:49:06,276 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:49:15,061 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:49:15,061 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:49:15,061 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 15:49:15,062 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 15:49:16,686 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:49:17,601 - hr_assistant - ERROR - Error retrieving employee data: 'list' object has no attribute 'first'
2025-04-25 15:49:17,602 - hr_assistant - ERROR - Failed to get employee data: Failed to retrieve employee data: 'list' object has no attribute 'first'
2025-04-25 15:51:44,492 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:51:48,544 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:51:48,544 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:51:48,544 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 15:51:48,544 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 15:51:50,138 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:51:51,127 - hr_assistant - ERROR - Error retrieving employee data: 'list' object has no attribute 'first'
2025-04-25 15:51:51,128 - hr_assistant - ERROR - Failed to get employee data: Failed to retrieve employee data: 'list' object has no attribute 'first'
2025-04-25 15:52:30,005 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:52:52,122 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 15:53:02,077 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 15:53:02,077 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 15:53:02,077 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 15:53:02,077 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 15:53:03,765 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 15:53:04,705 - hr_assistant - INFO - Retrieved employee data: [{'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}]
2025-04-25 15:53:04,706 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 15:53:04,708 - hr_assistant - WARNING - Error extracting employee name: 'list' object has no attribute 'get'
2025-04-25 15:53:04,708 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:11:16,670 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:11:29,173 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:11:29,173 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 16:11:29,173 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 16:11:29,173 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 16:11:30,634 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 16:11:31,560 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 16:11:31,561 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 16:11:31,563 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:11:37,492 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:11:37,492 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:11:37,492 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 16:11:37,492 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:11:39,087 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:11:39,100 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:11:39,100 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 16:11:40,013 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:11:40,833 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/messages "HTTP/1.1 200 OK"
2025-04-25 16:11:42,921 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs "HTTP/1.1 200 OK"
2025-04-25 16:11:43,553 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:45,231 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:46,829 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:46,834 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 16:11:46,834 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 16:11:47,923 - hr_assistant - INFO - Successfully retrieved attendance data for employee: EMP103
2025-04-25 16:11:49,096 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:11:51,274 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:52,737 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_qyaf5mYz2mWg7YPyziaeiYN5 "HTTP/1.1 200 OK"
2025-04-25 16:11:53,810 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/messages "HTTP/1.1 200 OK"
2025-04-25 16:15:50,920 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:15:50,921 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:15:50,921 - hr_assistant - INFO - Processing query for employee EMP103: get my personal attendance
2025-04-25 16:15:52,108 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:15:52,109 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:15:53,244 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ "HTTP/1.1 200 OK"
2025-04-25 16:15:53,245 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_EVuvYpQes3oIWpSm0wdLb2OJ
2025-04-25 16:15:53,807 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/messages "HTTP/1.1 200 OK"
2025-04-25 16:15:54,918 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs "HTTP/1.1 200 OK"
2025-04-25 16:15:55,487 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq "HTTP/1.1 200 OK"
2025-04-25 16:15:57,023 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq "HTTP/1.1 200 OK"
2025-04-25 16:15:57,024 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-25 16:15:57,024 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-25 16:15:58,560 - hr_assistant - INFO - Successfully retrieved attendance data for employee: EMP103
2025-04-25 16:15:59,892 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:16:01,428 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq "HTTP/1.1 200 OK"
2025-04-25 16:16:02,947 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/runs/run_7cqlP2v4zeiCu1Ocdrs7MfLq "HTTP/1.1 200 OK"
2025-04-25 16:16:03,372 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EVuvYpQes3oIWpSm0wdLb2OJ/messages "HTTP/1.1 200 OK"
2025-04-25 16:17:55,317 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:18:03,506 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:18:21,706 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:18:21,706 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 16:18:21,706 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 16:18:21,706 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 16:18:23,162 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 16:18:24,097 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 16:18:24,098 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 16:18:24,099 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:18:27,488 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:18:27,489 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:18:27,489 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 16:18:27,489 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:18:29,147 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:18:29,153 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:18:29,153 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 16:18:29,589 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:18:30,106 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/messages "HTTP/1.1 200 OK"
2025-04-25 16:18:31,655 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs "HTTP/1.1 200 OK"
2025-04-25 16:18:32,153 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:33,689 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:35,225 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:35,228 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 16:18:35,229 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 16:18:35,229 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-01/2025-04-25?page=0&limit=50
2025-04-25 16:18:36,454 - hr_assistant - INFO - Successfully retrieved attendance data for employee: EMP103
2025-04-25 16:18:37,335 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:18:38,850 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:40,345 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/runs/run_97Jd48wYDKXc2Kpc467OFM29 "HTTP/1.1 200 OK"
2025-04-25 16:18:40,714 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3tWbPCBLt8XHEJ3AVTnh43gm/messages "HTTP/1.1 200 OK"
2025-04-25 16:19:32,945 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:19:47,040 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-25 16:19:47,040 - hr_assistant - INFO - Fetching fresh employee data for employee EMP105
2025-04-25 16:19:47,040 - hr_assistant - INFO - Requesting employee data for: EMP105
2025-04-25 16:19:47,040 - hr_assistant - INFO - Attempting login for user: EMP105
2025-04-25 16:19:48,871 - hr_assistant - INFO - Login successful for user: EMP105
2025-04-25 16:19:49,893 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-25 16:19:49,894 - hr_assistant - INFO - Successfully retrieved data for employee: EMP105
2025-04-25 16:19:49,896 - hr_assistant - INFO - Sending initial greeting to employee: EMP105
2025-04-25 16:20:15,372 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-25 16:20:15,372 - hr_assistant - INFO - Using cached employee data for employee EMP105
2025-04-25 16:20:15,372 - hr_assistant - INFO - Processing query for employee EMP105: Show my attendance this month
2025-04-25 16:20:15,372 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:20:16,442 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:20:16,450 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:20:16,451 - hr_assistant - INFO - Creating new thread for employee EMP105
2025-04-25 16:20:17,016 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:20:18,357 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/messages "HTTP/1.1 200 OK"
2025-04-25 16:20:20,286 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs "HTTP/1.1 200 OK"
2025-04-25 16:20:20,899 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD "HTTP/1.1 200 OK"
2025-04-25 16:20:22,970 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD "HTTP/1.1 200 OK"
2025-04-25 16:20:22,971 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP105', 'date_type': 'this_month'}
2025-04-25 16:20:22,971 - hr_assistant - INFO - Fetching personal attendance for employee: EMP105 (date_type: this_month)
2025-04-25 16:20:22,972 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a/2025-04-01/2025-04-25?page=0&limit=50
2025-04-25 16:20:24,056 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}}
2025-04-25 16:20:24,903 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:20:26,532 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD "HTTP/1.1 200 OK"
2025-04-25 16:20:28,598 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/runs/run_4sRcYUZWY8dfZICERh9PhEfD "HTTP/1.1 200 OK"
2025-04-25 16:20:29,157 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yDtoEXtR7BJKNuO6conjZ4la/messages "HTTP/1.1 200 OK"
2025-04-25 16:23:09,645 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:23:12,587 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:23:26,100 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:23:30,975 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:23:30,976 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 16:23:30,976 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 16:23:30,976 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 16:23:32,478 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 16:23:33,406 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 16:23:33,407 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 16:23:33,408 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:23:39,627 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:23:39,627 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:23:39,627 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 16:23:39,628 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:23:40,638 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:23:40,645 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:23:40,645 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 16:23:41,084 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:23:41,623 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/messages "HTTP/1.1 200 OK"
2025-04-25 16:23:42,740 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs "HTTP/1.1 200 OK"
2025-04-25 16:23:43,315 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:44,877 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:46,343 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:46,355 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 16:23:46,373 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 16:23:46,374 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 16:23:47,543 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 17, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 16:23:48,564 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:23:50,099 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:51,737 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:53,273 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:54,809 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:56,345 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:23:58,095 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:24:00,556 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:24:02,150 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:24:03,660 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/runs/run_YFSIk1jUq9REzoeWsCcp58Dj "HTTP/1.1 200 OK"
2025-04-25 16:24:04,142 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_m855yXtIEHyqGQdujt9esWa2/messages "HTTP/1.1 200 OK"
2025-04-25 16:30:21,946 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 16:30:41,592 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:30:41,592 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 16:30:41,592 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 16:30:41,592 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 16:30:43,909 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 16:30:44,841 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 16:30:44,842 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 16:30:44,843 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 16:31:00,346 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 16:31:00,346 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 16:31:00,346 - hr_assistant - INFO - Processing query for employee EMP103: show my team attendance
2025-04-25 16:31:00,346 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 16:31:01,526 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 16:31:01,532 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 16:31:01,532 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 16:31:02,055 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 16:31:02,596 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/messages "HTTP/1.1 200 OK"
2025-04-25 16:31:07,588 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs "HTTP/1.1 200 OK"
2025-04-25 16:31:08,263 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:09,788 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:11,785 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:13,269 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:13,271 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103'}
2025-04-25 16:31:13,271 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-25 16:31:13,271 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 16:31:14,034 - hr_assistant - ERROR - Error retrieving team data: 404 Client Error: Not Found for url: https://dev.nashrms.com/api/c-employee/getEmployeesByManagerId/66d824a199b629cbdb2e0f2d
2025-04-25 16:31:14,904 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:31:16,751 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:18,288 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:18,289 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 16:31:18,289 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 16:31:20,785 - hr_assistant - ERROR - Error retrieving team data: 404 Client Error: Not Found for url: https://dev.nashrms.com/api/c-employee/getEmployeesByManagerId/66d824a199b629cbdb2e0f2d
2025-04-25 16:31:21,732 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 16:31:23,315 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:25,558 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/runs/run_PrhdNV5QhamH8VaL55KY9E4s "HTTP/1.1 200 OK"
2025-04-25 16:31:25,945 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_B1aHrUQlxBQUdoZZW480z2av/messages "HTTP/1.1 200 OK"
2025-04-25 17:18:12,145 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:18:45,695 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:18:45,695 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:18:45,696 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:18:45,696 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:18:47,860 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:18:48,828 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:18:48,829 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:18:48,830 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:18:58,629 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:18:58,629 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:18:58,629 - hr_assistant - INFO - Processing query for employee EMP103: get my team data
2025-04-25 17:18:58,630 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:19:00,005 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:19:00,013 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:19:00,013 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:19:00,631 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:19:01,172 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/messages "HTTP/1.1 200 OK"
2025-04-25 17:19:02,508 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs "HTTP/1.1 200 OK"
2025-04-25 17:19:03,371 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:04,996 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:06,676 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:06,679 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:19:06,679 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:19:06,679 - hr_assistant - INFO - cache data for manager EMP103
2025-04-25 17:19:07,745 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Branch not found", "data": null}
2025-04-25 17:19:08,708 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:19:10,197 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:11,719 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:11,720 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:19:11,720 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:19:11,720 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-04-25 17:19:15,775 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:19:17,351 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:18,885 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:18,887 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103'}
2025-04-25 17:19:18,887 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-25 17:19:18,887 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:19:18,887 - hr_assistant - INFO - cache data for manager EMP103
2025-04-25 17:19:19,818 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Branch not found", "data": null}
2025-04-25 17:19:20,741 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:19:22,309 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:23,905 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:25,379 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/runs/run_D6xyQJRXBHr8UNVpQIEYmeRs "HTTP/1.1 200 OK"
2025-04-25 17:19:26,480 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q2jMDxReNgEdAxtnbzCNHYwq/messages "HTTP/1.1 200 OK"
2025-04-25 17:20:00,789 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:20:08,096 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:20:08,097 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:20:08,097 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:20:08,097 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:20:09,696 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:20:10,610 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:20:10,610 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:20:10,612 - hr_assistant - INFO - Processing query for employee EMP103: get my team data
2025-04-25 17:20:10,612 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:20:11,314 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:20:11,320 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:20:11,320 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:20:12,168 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:20:12,951 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/messages "HTTP/1.1 200 OK"
2025-04-25 17:20:14,389 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs "HTTP/1.1 200 OK"
2025-04-25 17:20:15,163 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ "HTTP/1.1 200 OK"
2025-04-25 17:20:16,965 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ "HTTP/1.1 200 OK"
2025-04-25 17:20:16,970 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:20:16,970 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:20:16,970 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:20:17,906 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Branch not found", "data": null}
2025-04-25 17:20:19,096 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:20:20,621 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ "HTTP/1.1 200 OK"
2025-04-25 17:20:22,139 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/runs/run_2Ux9Dv8nRBKQIztnzKtQP6dZ "HTTP/1.1 200 OK"
2025-04-25 17:20:22,580 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_i3empUhszHEG2klsIAezTFsL/messages "HTTP/1.1 200 OK"
2025-04-25 17:21:47,607 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:21:53,680 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:21:53,680 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:21:53,680 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:21:53,680 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:21:55,180 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:21:56,187 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:21:56,188 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:21:56,190 - hr_assistant - INFO - Processing query for employee EMP103: get my team data
2025-04-25 17:21:56,190 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:21:58,724 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:21:58,730 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:21:58,731 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:21:59,752 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:22:00,363 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/messages "HTTP/1.1 200 OK"
2025-04-25 17:22:01,796 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs "HTTP/1.1 200 OK"
2025-04-25 17:22:02,620 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:04,240 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:04,241 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:22:04,241 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:22:04,242 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:22:05,233 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 0 team members
2025-04-25 17:22:06,255 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:22:07,703 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:09,278 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:11,906 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:13,379 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:14,903 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:16,418 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:17,884 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:19,334 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:20,781 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:22,274 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:24,020 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:25,795 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:27,395 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:28,870 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:30,414 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:31,977 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:33,646 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:35,276 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A4UqijwdA2f0oy7iFh9767nN/runs/run_UD3MQQRLYN22BxkIzbNmncQW "HTTP/1.1 200 OK"
2025-04-25 17:22:36,300 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-25 17:22:48,536 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:22:56,857 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:23:03,027 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:23:03,028 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:23:03,028 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:23:03,028 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:23:04,676 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:23:07,450 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:23:07,450 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:23:07,452 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:23:29,648 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:23:29,648 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:23:29,648 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:23:29,648 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:23:30,693 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:23:30,700 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:23:30,700 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:23:32,300 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:23:33,036 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/messages "HTTP/1.1 200 OK"
2025-04-25 17:23:34,469 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs "HTTP/1.1 200 OK"
2025-04-25 17:23:34,986 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT "HTTP/1.1 200 OK"
2025-04-25 17:23:36,461 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT "HTTP/1.1 200 OK"
2025-04-25 17:23:36,463 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:23:36,463 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:23:36,463 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:23:36,463 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:23:36,464 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:23:38,568 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 0 team members
2025-04-25 17:23:38,570 - hr_assistant - WARNING - No team members found for employee: EMP103
2025-04-25 17:23:39,819 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:23:41,336 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT "HTTP/1.1 200 OK"
2025-04-25 17:23:42,819 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/runs/run_6S0nf2tfR8Fnv7Eyob5EhOIT "HTTP/1.1 200 OK"
2025-04-25 17:23:43,181 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iwPsiWJjZDkVneAbyov2Xq1u/messages "HTTP/1.1 200 OK"
2025-04-25 17:25:29,252 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:25:34,962 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:25:47,993 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:25:47,993 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:25:47,993 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:25:47,993 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:25:49,555 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:25:50,590 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:25:50,591 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:25:50,593 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:25:56,212 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:25:56,212 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:25:56,212 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:25:56,212 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:25:57,279 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:25:57,287 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:25:57,287 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:25:57,820 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:25:58,319 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/messages "HTTP/1.1 200 OK"
2025-04-25 17:26:00,000 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs "HTTP/1.1 200 OK"
2025-04-25 17:26:00,632 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx "HTTP/1.1 200 OK"
2025-04-25 17:26:02,735 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx "HTTP/1.1 200 OK"
2025-04-25 17:26:02,737 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:26:02,737 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:26:02,737 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:26:02,738 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:26:02,738 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:26:03,708 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 0 team members
2025-04-25 17:26:03,710 - hr_assistant - WARNING - No team members found for employee: EMP103
2025-04-25 17:26:07,138 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:26:08,673 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx "HTTP/1.1 200 OK"
2025-04-25 17:26:10,209 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/runs/run_XnlViqpaM1u3H5hBrdDPooqx "HTTP/1.1 200 OK"
2025-04-25 17:26:10,610 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Z6wW3QSNjgb5oKgGa3U91681/messages "HTTP/1.1 200 OK"
2025-04-25 17:26:56,841 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:27:02,277 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:27:02,277 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:27:02,278 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:27:02,278 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:27:03,986 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:27:04,966 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:27:04,966 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:27:04,968 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:27:04,968 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:27:06,410 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:27:06,416 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:27:06,416 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:27:06,937 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:27:07,552 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/messages "HTTP/1.1 200 OK"
2025-04-25 17:27:13,692 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs "HTTP/1.1 200 OK"
2025-04-25 17:27:14,167 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:16,286 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:17,827 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:17,830 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:27:17,830 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:27:17,830 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:27:17,830 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:27:17,831 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:27:19,022 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:27:19,022 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 0 team members
2025-04-25 17:27:19,024 - hr_assistant - WARNING - No team members found for employee: EMP103
2025-04-25 17:27:20,601 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:27:22,068 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:23,541 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/runs/run_V3r0ovYAqDZl7TAixt3LV1tx "HTTP/1.1 200 OK"
2025-04-25 17:27:24,427 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ywy73MMYaiR2eEoFGFmBZ9vu/messages "HTTP/1.1 200 OK"
2025-04-25 17:28:06,765 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:28:12,902 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:28:23,859 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:28:23,859 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:28:23,859 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:28:23,859 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:28:25,392 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:28:26,318 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:28:26,318 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:28:26,320 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:28:30,492 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:28:30,492 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:28:30,492 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:28:30,493 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:28:32,210 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:28:32,216 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:28:32,216 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:28:32,737 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:28:34,020 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/messages "HTTP/1.1 200 OK"
2025-04-25 17:28:36,965 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs "HTTP/1.1 200 OK"
2025-04-25 17:28:37,421 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:38,874 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:40,318 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:40,320 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:28:40,320 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:28:40,320 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:28:40,320 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:28:40,321 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:28:41,310 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:28:41,311 - hr_assistant - ERROR - Error retrieving team data: '_id'
2025-04-25 17:28:42,268 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:28:43,804 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:45,427 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:45,429 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:28:45,429 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:28:45,429 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:28:45,430 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:28:47,407 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:28:47,407 - hr_assistant - ERROR - Error retrieving team data: '_id'
2025-04-25 17:28:48,414 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:28:49,972 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:51,483 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:51,485 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103'}
2025-04-25 17:28:51,485 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-25 17:28:51,485 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:28:51,485 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:28:51,485 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:28:52,490 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:28:52,490 - hr_assistant - ERROR - Error retrieving team data: '_id'
2025-04-25 17:28:53,838 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:28:55,322 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:56,762 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:58,216 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:28:59,699 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:29:01,283 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/runs/run_lqwLfMiWAw5VfHp5SJauSYSm "HTTP/1.1 200 OK"
2025-04-25 17:29:01,648 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_oIZ3jqX1fcAM3z1TsJMA6N6j/messages "HTTP/1.1 200 OK"
2025-04-25 17:30:50,319 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:32:40,566 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:32:46,927 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:32:46,927 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:32:46,927 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:32:46,927 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:32:48,940 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:32:49,926 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:32:49,927 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:32:49,929 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for today
2025-04-25 17:32:49,929 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:32:51,814 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:32:51,821 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:32:51,821 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:32:52,245 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:32:52,740 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/messages "HTTP/1.1 200 OK"
2025-04-25 17:32:53,842 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs "HTTP/1.1 200 OK"
2025-04-25 17:32:54,353 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21 "HTTP/1.1 200 OK"
2025-04-25 17:32:55,903 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21 "HTTP/1.1 200 OK"
2025-04-25 17:32:55,905 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:32:55,905 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:32:55,905 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:32:55,905 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:32:55,905 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:32:56,835 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:32:56,835 - hr_assistant - ERROR - Error retrieving team data: GlobalHRCache.set_team_data() takes 3 positional arguments but 4 were given
2025-04-25 17:32:58,499 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:33:00,481 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21 "HTTP/1.1 200 OK"
2025-04-25 17:33:02,064 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/runs/run_H61nGfyvoAMWIu8u7F8v7S21 "HTTP/1.1 200 OK"
2025-04-25 17:33:02,430 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gDB8zWE4K6ESZPv5FhZctYWL/messages "HTTP/1.1 200 OK"
2025-04-25 17:33:55,654 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:34:01,836 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:34:11,057 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:34:11,057 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:34:11,057 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:34:11,058 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:34:12,828 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:34:13,934 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:34:13,934 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:34:13,936 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:34:33,292 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:34:33,293 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:34:33,293 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance data for today
2025-04-25 17:34:33,293 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:34:34,996 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:34:35,003 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:34:35,003 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:34:35,519 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:34:36,555 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/messages "HTTP/1.1 200 OK"
2025-04-25 17:34:38,101 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs "HTTP/1.1 200 OK"
2025-04-25 17:34:38,709 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:40,445 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:40,447 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:34:40,447 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:34:40,447 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:34:40,448 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:34:40,448 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:34:41,361 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:34:41,361 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:34:41,361 - hr_assistant - ERROR - Error retrieving team data: GlobalHRCache.set_team_data() takes 3 positional arguments but 4 were given
2025-04-25 17:34:42,807 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:34:44,284 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:45,751 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:47,335 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:47,336 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-25 17:34:47,337 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:34:47,337 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:34:47,338 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:34:48,294 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:34:48,294 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:34:48,294 - hr_assistant - ERROR - Error retrieving team data: GlobalHRCache.set_team_data() takes 3 positional arguments but 4 were given
2025-04-25 17:34:49,310 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:34:50,792 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:52,297 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:52,298 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today', 'include_team': True}
2025-04-25 17:34:52,298 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: today, include_team: True)
2025-04-25 17:34:52,298 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:34:52,298 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-04-25 17:34:52,298 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: True
2025-04-25 17:34:52,298 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:34:52,298 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:34:52,298 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:34:52,299 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:34:53,215 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:34:53,215 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:34:53,215 - hr_assistant - ERROR - Error retrieving team data: GlobalHRCache.set_team_data() takes 3 positional arguments but 4 were given
2025-04-25 17:34:55,339 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:34:56,791 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:58,400 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:34:59,865 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/runs/run_PZFopoYWMSbKIGHGjyppQXn8 "HTTP/1.1 200 OK"
2025-04-25 17:35:01,060 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hN2RH0FslTGQ3VY6QEioTBRb/messages "HTTP/1.1 200 OK"
2025-04-25 17:35:10,139 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:35:15,226 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:35:15,227 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:35:15,227 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:35:15,227 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:35:16,718 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:35:17,832 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:35:17,833 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:35:17,835 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance data for today
2025-04-25 17:35:17,835 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:35:18,822 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:35:19,019 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:35:19,019 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:35:19,578 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:35:20,089 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/messages "HTTP/1.1 200 OK"
2025-04-25 17:35:21,497 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs "HTTP/1.1 200 OK"
2025-04-25 17:35:21,958 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:23,438 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:23,441 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-25 17:35:23,441 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-25 17:35:23,441 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:35:23,441 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:35:23,442 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:35:24,353 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:35:24,353 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:35:24,353 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-25 17:35:25,479 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-25 17:35:26,431 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:35:27,899 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:29,513 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:31,064 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:32,533 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_3MLKCAr0mZ5Xt3dlx82uBSUm "HTTP/1.1 200 OK"
2025-04-25 17:35:32,896 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/messages "HTTP/1.1 200 OK"
2025-04-25 17:36:11,926 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:36:11,926 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:36:11,926 - hr_assistant - INFO - Processing query for employee EMP103: what was my team attendance yesterday
2025-04-25 17:36:13,837 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:36:13,838 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:36:14,449 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee "HTTP/1.1 200 OK"
2025-04-25 17:36:14,450 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_NkK7wIVZnCeipiTLLjSsA5ee
2025-04-25 17:36:14,958 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/messages "HTTP/1.1 200 OK"
2025-04-25 17:36:21,215 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs "HTTP/1.1 200 OK"
2025-04-25 17:36:21,668 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:23,189 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:24,677 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:24,678 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': '2025-04-24'}
2025-04-25 17:36:24,678 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: 2025-04-24)
2025-04-25 17:36:24,678 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:36:24,679 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:36:24,679 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:36:25,579 - hr_assistant - INFO - Team data : {'teamId': 'TEAM105', 'teamData': [{'empId': 'EMP101', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP109', 'employeeId': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'designation': 'Software Engineer', 'grade': 'L0'}, {'empId': 'EMP121', 'employeeId': '680627695993fc1ee4c4f793', 'userName': 'shaan', 'designation': 'employee', 'grade': 'L4'}]}
2025-04-25 17:36:25,579 - hr_assistant - INFO - Team ID's data : ['6711f83cbb8ea69acefdb5a4', '66fa8471a8adc4a2c26c058e', '680627695993fc1ee4c4f793']
2025-04-25 17:36:25,579 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-25 17:36:26,735 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-25 17:36:27,656 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:36:29,212 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:30,732 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:32,200 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/runs/run_GzDokG9UWW5A0y9yJOrOaGmU "HTTP/1.1 200 OK"
2025-04-25 17:36:32,649 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NkK7wIVZnCeipiTLLjSsA5ee/messages "HTTP/1.1 200 OK"
2025-04-25 17:41:08,572 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:41:34,866 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:41:40,145 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:41:40,145 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:41:40,145 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:41:40,146 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:41:41,613 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:41:42,640 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:41:42,641 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:41:42,643 - hr_assistant - INFO - Processing query for employee EMP103: what was my team attendance yesterday
2025-04-25 17:41:42,643 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:41:44,162 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:41:44,170 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:41:44,170 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:41:44,591 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:41:45,135 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/messages "HTTP/1.1 200 OK"
2025-04-25 17:41:46,613 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs "HTTP/1.1 200 OK"
2025-04-25 17:41:47,096 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:41:48,773 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:41:48,775 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'month_04_2025'}
2025-04-25 17:41:48,775 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: month_04_2025)
2025-04-25 17:41:48,775 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 17:41:48,775 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-23T08:04:46.168Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:41:48,776 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 17:41:49,707 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-25 17:41:49,709 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-25/2025-04-18?page=0&limit=50
2025-04-25 17:41:50,901 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-25 17:41:54,507 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:41:56,043 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:41:57,529 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:41:59,034 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:42:00,678 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:42:02,184 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:42:03,723 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/runs/run_hLlNG0KeWrPvTjDkFlVRer2F "HTTP/1.1 200 OK"
2025-04-25 17:42:04,132 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_TNwq8bA8EXZswpLEkKf7QI4W/messages "HTTP/1.1 200 OK"
2025-04-25 17:48:54,772 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:48:55,544 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:48:55,544 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:48:55,544 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:48:55,544 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:48:57,829 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:48:58,822 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:48:58,823 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:48:58,824 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 17:48:58,824 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:48:59,907 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:48:59,918 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:48:59,918 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:49:00,427 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:49:00,981 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/messages "HTTP/1.1 200 OK"
2025-04-25 17:51:11,211 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs "HTTP/1.1 500 Internal Server Error"
2025-04-25 17:51:11,218 - openai._base_client - INFO - Retrying request to /threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs in 0.496392 seconds
2025-04-25 17:51:12,989 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs "HTTP/1.1 200 OK"
2025-04-25 17:51:14,166 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:15,800 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:15,803 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 17:51:15,803 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 17:51:15,803 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 17:51:16,998 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 17, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 17:51:18,109 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:51:19,555 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:21,070 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:22,537 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:24,095 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:25,569 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:27,013 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/runs/run_b7d3ScNDw1dDKXxYoXQbHnaX "HTTP/1.1 200 OK"
2025-04-25 17:51:27,390 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_HiIM0BmBsKz9nG2qzApfwjvU/messages "HTTP/1.1 200 OK"
2025-04-25 17:55:56,411 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 17:56:00,617 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:56:00,617 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 17:56:00,617 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 17:56:00,617 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 17:56:02,114 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 17:56:03,069 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 17:56:03,070 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 17:56:03,072 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 17:56:11,700 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 17:56:11,700 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 17:56:11,700 - hr_assistant - INFO - Processing query for employee EMP103: What is my current months attendance ?
2025-04-25 17:56:11,700 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 17:56:12,762 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 17:56:12,770 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 17:56:12,770 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 17:56:13,974 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 17:56:14,588 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/messages "HTTP/1.1 200 OK"
2025-04-25 17:56:15,977 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs "HTTP/1.1 200 OK"
2025-04-25 17:56:16,535 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:18,155 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:18,157 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 17:56:18,157 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 17:56:18,157 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 17:56:19,288 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 17, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 17:56:20,425 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 17:56:21,909 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:23,394 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:25,137 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:26,636 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:28,208 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:29,671 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:31,312 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:32,974 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:34,555 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:36,091 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:37,588 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_9B7f2OZwEaNCE4F1FMMbrysO "HTTP/1.1 200 OK"
2025-04-25 17:56:37,948 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/messages "HTTP/1.1 200 OK"
2025-04-25 18:04:11,272 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 18:04:11,273 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 18:04:11,273 - hr_assistant - INFO - Processing query for employee EMP103: What is my team attendance for current month ?
2025-04-25 18:04:12,673 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 18:04:12,674 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 18:04:13,161 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW "HTTP/1.1 200 OK"
2025-04-25 18:04:13,162 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_sbrfqQReFZDPzkpiZb60vWjW
2025-04-25 18:04:15,954 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/messages "HTTP/1.1 200 OK"
2025-04-25 18:04:17,788 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs "HTTP/1.1 200 OK"
2025-04-25 18:04:18,308 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:19,832 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:21,327 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:21,328 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 18:04:21,328 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-25 18:04:21,328 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-25 18:04:21,328 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 18:04:21,329 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-25 18:04:22,955 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-25 18:04:22,957 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 18:04:24,559 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-25 18:04:26,205 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 18:04:27,730 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:29,291 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:31,210 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:32,728 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:34,180 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:35,719 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:37,185 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:38,687 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:40,181 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:41,757 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/runs/run_rSMphkID8DsZ3scIW5PH1WZf "HTTP/1.1 200 OK"
2025-04-25 18:04:42,163 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sbrfqQReFZDPzkpiZb60vWjW/messages "HTTP/1.1 200 OK"
2025-04-25 18:21:01,152 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 18:21:12,058 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 18:21:12,058 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 18:21:12,059 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 18:21:12,059 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 18:21:16,832 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 18:21:18,388 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 18:21:18,389 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 18:21:18,391 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 18:21:34,475 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 18:21:34,476 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 18:21:34,476 - hr_assistant - INFO - Processing query for employee EMP103: Was anns present yesterday?
2025-04-25 18:21:34,476 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 18:21:36,825 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 18:21:36,831 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 18:21:36,831 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 18:21:38,336 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 18:21:39,313 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/messages "HTTP/1.1 200 OK"
2025-04-25 18:21:42,304 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs "HTTP/1.1 200 OK"
2025-04-25 18:21:43,099 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:45,498 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:45,505 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': '2025-04-24'}
2025-04-25 18:21:45,505 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: 2025-04-24)
2025-04-25 18:21:45,506 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-24/2025-04-24?page=0&limit=50
2025-04-25 18:21:46,887 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 18:21:50,860 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 18:21:52,379 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:53,956 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:55,593 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:58,231 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/runs/run_ydHwOlbpVPZwjKtOxuaLRO0e "HTTP/1.1 200 OK"
2025-04-25 18:21:58,601 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BudTrUrc1jLxv1wXUBqReCSj/messages "HTTP/1.1 200 OK"
2025-04-25 18:54:44,123 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 21:26:36,043 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 21:26:42,632 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 21:26:42,632 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 21:26:42,632 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 21:26:42,632 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 21:26:45,315 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 21:26:46,322 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 21:26:46,323 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 21:26:46,324 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 21:26:52,488 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 21:26:52,488 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 21:26:52,488 - hr_assistant - INFO - Processing query for employee EMP103: Show my profile details
2025-04-25 21:26:52,488 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 21:26:54,092 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 401 Unauthorized"
2025-04-25 21:26:54,093 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************hIEA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-04-25 21:26:54,093 - hr_assistant - INFO - Creating new HR assistant
2025-04-25 21:26:54,093 - hr_assistant - ERROR - Error generating response: Assistant ID not found and creation logic not implemented
2025-04-25 21:27:02,327 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 21:27:02,327 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 21:27:02,327 - hr_assistant - INFO - Processing query for employee EMP103: What's my leave balance?
2025-04-25 21:27:02,745 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 401 Unauthorized"
2025-04-25 21:27:02,745 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************hIEA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-04-25 21:27:02,745 - hr_assistant - INFO - Creating new HR assistant
2025-04-25 21:27:02,745 - hr_assistant - ERROR - Error generating response: Assistant ID not found and creation logic not implemented
2025-04-25 21:29:48,589 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 21:30:05,601 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 21:30:05,602 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 21:30:05,602 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 21:30:05,602 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 21:30:07,217 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 21:30:08,270 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 21:30:08,271 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 21:30:08,272 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 21:30:12,208 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 21:30:12,208 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 21:30:12,208 - hr_assistant - INFO - Processing query for employee EMP103: What's my leave balance?
2025-04-25 21:30:12,208 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 21:30:14,593 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 21:30:14,602 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 21:30:14,602 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 21:30:15,921 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 21:30:21,042 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_o8B1bGOnfiIHH1rzOICd5muG/messages "HTTP/1.1 200 OK"
2025-04-25 21:30:22,923 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_o8B1bGOnfiIHH1rzOICd5muG/runs "HTTP/1.1 200 OK"
2025-04-25 21:30:23,571 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_o8B1bGOnfiIHH1rzOICd5muG/runs/run_iN8suATgwcNbhLSGaMyDeZ7l "HTTP/1.1 200 OK"
2025-04-25 21:30:25,420 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_o8B1bGOnfiIHH1rzOICd5muG/runs/run_iN8suATgwcNbhLSGaMyDeZ7l "HTTP/1.1 200 OK"
2025-04-25 21:30:28,417 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_o8B1bGOnfiIHH1rzOICd5muG/runs/run_iN8suATgwcNbhLSGaMyDeZ7l "HTTP/1.1 200 OK"
2025-04-25 21:30:28,825 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_o8B1bGOnfiIHH1rzOICd5muG/messages "HTTP/1.1 200 OK"
2025-04-25 21:42:27,457 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 21:42:39,827 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 21:42:39,827 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 21:42:39,827 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 21:42:39,828 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 21:42:42,262 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 21:42:43,189 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 21:42:43,189 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 21:42:43,192 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 21:43:10,528 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 21:43:10,528 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 21:43:10,529 - hr_assistant - INFO - Processing query for employee EMP103: tell me my attendance for this week
2025-04-25 21:43:10,529 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 21:43:12,218 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 21:43:12,223 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 21:43:12,224 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 21:43:13,312 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 21:43:14,438 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/messages "HTTP/1.1 200 OK"
2025-04-25 21:43:15,564 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/runs "HTTP/1.1 200 OK"
2025-04-25 21:43:16,691 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/runs/run_tpQExqr4dTbBQcjywvPHnTiD "HTTP/1.1 200 OK"
2025-04-25 21:43:18,138 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/runs/run_tpQExqr4dTbBQcjywvPHnTiD "HTTP/1.1 200 OK"
2025-04-25 21:43:18,140 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 21:43:18,140 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 21:43:18,140 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 21:43:19,356 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 18, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 21:43:20,258 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/runs/run_tpQExqr4dTbBQcjywvPHnTiD/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 21:43:21,719 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/runs/run_tpQExqr4dTbBQcjywvPHnTiD "HTTP/1.1 200 OK"
2025-04-25 21:43:23,191 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/runs/run_tpQExqr4dTbBQcjywvPHnTiD "HTTP/1.1 200 OK"
2025-04-25 21:43:25,394 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/runs/run_tpQExqr4dTbBQcjywvPHnTiD "HTTP/1.1 200 OK"
2025-04-25 21:43:27,011 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/runs/run_tpQExqr4dTbBQcjywvPHnTiD "HTTP/1.1 200 OK"
2025-04-25 21:43:28,569 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/runs/run_tpQExqr4dTbBQcjywvPHnTiD "HTTP/1.1 200 OK"
2025-04-25 21:43:28,997 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_H9x8ol8Zrp1tfcf9wgquvRNQ/messages "HTTP/1.1 200 OK"
2025-04-25 21:45:35,401 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 21:45:45,919 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 21:45:45,919 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 21:45:45,919 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 21:45:45,920 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 21:45:47,439 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 21:45:48,365 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 21:45:48,366 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 21:45:48,368 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 21:45:52,937 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 21:45:52,937 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 21:45:52,937 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 21:45:52,937 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 21:45:54,076 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 21:45:54,082 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 21:45:54,082 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 21:45:54,587 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 21:45:55,163 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/messages "HTTP/1.1 200 OK"
2025-04-25 21:45:58,376 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs "HTTP/1.1 200 OK"
2025-04-25 21:45:59,369 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:00,856 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:00,859 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-25 21:46:00,859 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-25 21:46:00,859 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 21:46:02,152 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 18, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 21:46:03,550 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 21:46:05,111 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:06,564 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:08,069 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:09,532 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:11,009 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:12,605 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:14,087 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:15,681 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:17,217 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:18,753 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:20,318 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/runs/run_i9jQGz4Fn8MzhWnAQapGHpYz "HTTP/1.1 200 OK"
2025-04-25 21:46:20,697 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_yPC5J7cw7Nf1yvfFhAxT6IeU/messages "HTTP/1.1 200 OK"
2025-04-25 22:11:10,016 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 22:11:16,028 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 22:11:16,028 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-25 22:11:16,028 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-25 22:11:16,028 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-25 22:11:18,431 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-25 22:11:19,340 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-25 22:11:19,340 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-25 22:11:19,342 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-25 22:11:22,733 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 22:11:22,733 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 22:11:22,734 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 22:11:22,734 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 22:11:25,997 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 22:11:26,003 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 22:11:26,003 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-25 22:11:28,908 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 22:11:30,137 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/messages "HTTP/1.1 200 OK"
2025-04-25 22:11:31,491 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs "HTTP/1.1 200 OK"
2025-04-25 22:11:32,699 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:34,336 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:36,588 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:38,053 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:39,557 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:41,093 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:42,691 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:44,173 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:45,658 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:47,243 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:48,897 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:50,343 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:51,868 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:53,378 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:54,832 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:56,282 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:58,086 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:11:59,579 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:12:01,026 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:12:02,505 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/runs/run_iXGzTzHbjAE9t7nT9dAI0oRb "HTTP/1.1 200 OK"
2025-04-25 22:12:03,507 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-25 22:12:19,990 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-25 22:12:19,990 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-25 22:12:19,990 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-25 22:12:20,824 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 22:12:20,826 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 22:12:21,682 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ "HTTP/1.1 200 OK"
2025-04-25 22:12:21,683 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_FFh4OYgwtbBf2B2EJXuSfuDJ
2025-04-25 22:12:22,154 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_FFh4OYgwtbBf2B2EJXuSfuDJ/messages "HTTP/1.1 400 Bad Request"
2025-04-25 22:12:22,155 - hr_assistant - ERROR - Error generating response: Error code: 400 - {'error': {'message': "Can't add messages to thread_FFh4OYgwtbBf2B2EJXuSfuDJ while a run run_iXGzTzHbjAE9t7nT9dAI0oRb is active.", 'type': 'invalid_request_error', 'param': None, 'code': None}}
2025-04-25 22:12:53,016 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-25 22:12:59,413 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-25 22:12:59,414 - hr_assistant - INFO - Fetching fresh employee data for employee EMP105
2025-04-25 22:12:59,414 - hr_assistant - INFO - Requesting employee data for: EMP105
2025-04-25 22:12:59,414 - hr_assistant - INFO - Attempting login for user: EMP105
2025-04-25 22:13:01,204 - hr_assistant - INFO - Login successful for user: EMP105
2025-04-25 22:13:02,132 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-25 22:13:02,132 - hr_assistant - INFO - Successfully retrieved data for employee: EMP105
2025-04-25 22:13:02,134 - hr_assistant - INFO - Sending initial greeting to employee: EMP105
2025-04-25 22:13:06,579 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-25 22:13:06,579 - hr_assistant - INFO - Using cached employee data for employee EMP105
2025-04-25 22:13:06,579 - hr_assistant - INFO - Processing query for employee EMP105: Show my attendance this month
2025-04-25 22:13:06,579 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-25 22:13:07,904 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-25 22:13:07,910 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-25 22:13:07,911 - hr_assistant - INFO - Creating new thread for employee EMP105
2025-04-25 22:13:08,368 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-25 22:13:08,893 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/messages "HTTP/1.1 200 OK"
2025-04-25 22:13:11,900 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs "HTTP/1.1 200 OK"
2025-04-25 22:13:12,355 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:13,827 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:15,369 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:15,371 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP105', 'date_type': 'this_month'}
2025-04-25 22:13:15,372 - hr_assistant - INFO - Fetching personal attendance for employee: EMP105 (date_type: this_month)
2025-04-25 22:13:15,372 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a/2025-04-25/2025-04-01?page=0&limit=50
2025-04-25 22:13:17,408 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b280ae7e94af813bc7b5a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T06:12:49.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 467, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 57, 'penalties': [{'uniqueId': 9125, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 57, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T06:13:30.647Z', 'updatedAt': '2025-04-25T14:00:01.219Z', '__v': 0}, {'_id': '6809dba63f1d136990981079', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:39.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:35:18.892Z', 'updatedAt': '2025-04-24T14:00:01.105Z', '__v': 0}, {'_id': '6808f2613f1d136990980bcf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:01.851Z', 'updatedAt': '2025-04-23T14:00:01.851Z', '__v': 0}, {'_id': '68074202c60b619007b021e0', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:14:35.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 405, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 119, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T07:15:14.296Z', 'updatedAt': '2025-04-22T14:00:01.063Z', '__v': 0}, {'_id': '6805e1774ce909a13638a0a5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:10:24.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 469, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 55, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 55, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:11:03.722Z', 'updatedAt': '2025-04-21T14:00:00.702Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876c', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:10:05.355Z', 'updatedAt': '2025-04-19T07:10:05.355Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '2025-04-19T14:08:47.000Z', 'totalHoursWorked': 829, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:10:05.298Z', 'updatedAt': '2025-04-19T14:09:25.648Z', '__v': 0}, {'_id': '6801fb58a7f360a4cab86db7', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': '2025-04-18T07:11:44.000Z', 'clockOutTime': '2025-04-18T14:00:00.000Z', 'totalHoursWorked': 408, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 116, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-18T07:12:24.188Z', 'updatedAt': '2025-04-18T14:00:00.756Z', '__v': 0}, {'_id': '68009d51ae2a00f5a022afb1', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T06:18:18.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 461, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 63, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T06:18:57.668Z', 'updatedAt': '2025-04-17T14:00:00.735Z', '__v': 0}, {'_id': '67ff7385e16c984ef659f3f2', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T09:07:43.000Z', 'clockOutTime': '2025-04-16T14:00:00.000Z', 'totalHoursWorked': 292, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 232, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-16T09:08:21.766Z', 'updatedAt': '2025-04-16T14:00:00.780Z', '__v': 0}, {'_id': '67fdf4103f8220b6bb17fc8b', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': '2025-04-15T05:51:37.000Z', 'clockOutTime': '2025-04-15T14:00:00.000Z', 'totalHoursWorked': 488, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 36, 'penalties': [{'uniqueId': 4532, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 36, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-15T05:52:16.220Z', 'updatedAt': '2025-04-15T14:00:00.725Z', '__v': 0}, {'_id': '67fca0a1a430ce18705ee7bf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': '2025-04-14T05:43:22.000Z', 'clockOutTime': '2025-04-14T14:00:00.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 28, 'penalties': [{'uniqueId': 9867, 'action': 'salary_deduction', 'percentage': 5, 'lateMinute': 28, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-14T05:44:01.939Z', 'updatedAt': '2025-04-14T14:00:00.743Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.239Z', 'updatedAt': '2025-04-12T14:00:01.239Z', '__v': 0}, {'_id': '67f75afd2f294c6b4ef62b06', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': '2025-04-10T05:44:55.000Z', 'clockOutTime': '2025-04-10T14:00:00.000Z', 'totalHoursWorked': 495, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 29, 'penalties': [{'uniqueId': 9867, 'action': 'written_warning', 'percentage': 0, 'lateMinute': 29, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-10T05:45:33.317Z', 'updatedAt': '2025-04-10T14:00:01.757Z', '__v': 0}, {'_id': '67f60ac6cca6b0c13574f1e5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': '2025-04-09T05:50:23.000Z', 'clockOutTime': '2025-04-09T14:00:00.000Z', 'totalHoursWorked': 489, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 35, 'penalties': [{'uniqueId': 4532, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 35, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-09T05:51:02.134Z', 'updatedAt': '2025-04-09T14:00:01.730Z', '__v': 0}, {'_id': '67f4b3c445a0b733d74cb805', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': '2025-04-08T05:26:52.000Z', 'clockOutTime': '2025-04-08T13:44:10.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-08T05:26:54.000Z', 'endTime': '2025-04-08T05:27:17.000Z', 'durationMinutes': 0}], 'breakTime': 0, 'lateMinutes': 11, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-08T05:27:32.018Z', 'updatedAt': '2025-04-08T13:44:48.264Z', '__v': 0}, {'_id': '67f36199999f16b8a24d4f41', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': '2025-04-07T05:24:02.000Z', 'clockOutTime': '2025-04-07T13:57:41.000Z', 'totalHoursWorked': 513, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 9, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-07T05:24:41.345Z', 'updatedAt': '2025-04-07T13:58:20.144Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4598', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.787Z', 'updatedAt': '2025-04-05T14:00:03.787Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9511', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.240Z', 'updatedAt': '2025-04-04T14:00:01.240Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f93', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.525Z', 'updatedAt': '2025-04-03T14:00:02.525Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f28', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.218Z', 'updatedAt': '2025-04-02T14:00:01.218Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c57', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.299Z', 'updatedAt': '2025-04-01T14:00:01.299Z', '__v': 0}], 'totalRecords': 22, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-25 22:13:18,998 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-25 22:13:20,447 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:21,926 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:23,489 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:25,230 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:26,695 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:28,215 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:29,687 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:31,354 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:32,873 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:34,549 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:36,052 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:37,519 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/runs/run_TpECrtUeUxmyIw0wFpkhot0o "HTTP/1.1 200 OK"
2025-04-25 22:13:37,871 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0mDwzQUlV5U0lX3tVFDHpgqN/messages "HTTP/1.1 200 OK"
2025-04-26 02:44:47,911 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 02:45:15,445 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 02:45:15,445 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 02:45:15,446 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 02:45:15,446 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 02:45:18,160 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 02:45:19,202 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 02:45:19,203 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 02:45:19,205 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-26 02:45:27,628 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 02:45:27,628 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 02:45:27,628 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-26 02:45:27,628 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 02:45:29,530 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 02:45:29,842 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 02:45:29,842 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 02:45:31,062 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 02:45:31,677 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/messages "HTTP/1.1 200 OK"
2025-04-26 02:45:32,687 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs "HTTP/1.1 200 OK"
2025-04-26 02:45:33,118 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:35,363 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:35,365 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 02:45:35,365 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-26 02:45:35,365 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 02:45:36,594 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 18, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 02:45:38,640 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 02:45:40,894 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:42,346 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:43,838 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:45,337 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:46,831 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:48,368 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:49,903 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:51,439 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:52,912 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:54,391 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:55,844 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:57,583 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:59,157 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_zbxVIRGO2RbC8PYbpZ5ba9uZ "HTTP/1.1 200 OK"
2025-04-26 02:45:59,529 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/messages "HTTP/1.1 200 OK"
2025-04-26 02:46:44,401 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 02:46:44,401 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 02:46:44,401 - hr_assistant - INFO - Processing query for employee EMP103: get my team attendance for this week
2025-04-26 02:46:45,916 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 02:46:45,920 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 02:46:46,940 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn "HTTP/1.1 200 OK"
2025-04-26 02:46:46,941 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_SBDa28vMypKABFwqfvkg9oJn
2025-04-26 02:46:47,451 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/messages "HTTP/1.1 200 OK"
2025-04-26 02:46:49,676 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs "HTTP/1.1 200 OK"
2025-04-26 02:46:50,216 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:46:51,753 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:46:53,802 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:46:53,803 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-26 02:46:53,803 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-26 02:46:53,804 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 02:46:53,804 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 02:46:53,805 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 02:46:54,776 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 02:46:54,777 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 02:46:55,952 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 02:46:57,092 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 02:46:58,715 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:47:00,763 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:47:02,507 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:47:04,042 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:47:05,679 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:47:07,216 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:47:08,752 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:47:10,696 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/runs/run_tr7OMEBLQ9UzyIJ07P3eXxis "HTTP/1.1 200 OK"
2025-04-26 02:47:11,105 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_SBDa28vMypKABFwqfvkg9oJn/messages "HTTP/1.1 200 OK"
2025-04-26 02:58:41,152 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 02:58:54,765 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-26 02:58:54,765 - hr_assistant - INFO - Fetching fresh employee data for employee EMP105
2025-04-26 02:58:54,765 - hr_assistant - INFO - Requesting employee data for: EMP105
2025-04-26 02:58:54,765 - hr_assistant - INFO - Attempting login for user: EMP105
2025-04-26 02:58:57,104 - hr_assistant - INFO - Login successful for user: EMP105
2025-04-26 02:58:58,140 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-26 02:58:58,142 - hr_assistant - INFO - Successfully retrieved data for employee: EMP105
2025-04-26 02:58:58,144 - hr_assistant - INFO - Sending initial greeting to employee: EMP105
2025-04-26 02:59:08,966 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-26 02:59:08,967 - hr_assistant - INFO - Using cached employee data for employee EMP105
2025-04-26 02:59:08,967 - hr_assistant - INFO - Processing query for employee EMP105: Show my attendance this month
2025-04-26 02:59:08,967 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 02:59:11,338 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 02:59:11,660 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 02:59:12,771 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 02:59:12,772 - hr_assistant - INFO - Creating new thread for employee EMP105
2025-04-26 02:59:13,276 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 02:59:13,900 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/messages "HTTP/1.1 200 OK"
2025-04-26 02:59:16,560 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs "HTTP/1.1 200 OK"
2025-04-26 02:59:17,041 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:18,604 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:20,598 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:22,064 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:22,065 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP105', 'date_type': 'this_month'}
2025-04-26 02:59:22,066 - hr_assistant - INFO - Fetching personal attendance for employee: EMP105 (date_type: this_month)
2025-04-26 02:59:22,066 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 02:59:23,523 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b280ae7e94af813bc7b5a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T06:12:49.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 467, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 57, 'penalties': [{'uniqueId': 9125, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 57, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T06:13:30.647Z', 'updatedAt': '2025-04-25T14:00:01.219Z', '__v': 0}, {'_id': '6809dba63f1d136990981079', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:39.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:35:18.892Z', 'updatedAt': '2025-04-24T14:00:01.105Z', '__v': 0}, {'_id': '6808f2613f1d136990980bcf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:01.851Z', 'updatedAt': '2025-04-23T14:00:01.851Z', '__v': 0}, {'_id': '68074202c60b619007b021e0', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:14:35.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 405, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 119, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T07:15:14.296Z', 'updatedAt': '2025-04-22T14:00:01.063Z', '__v': 0}, {'_id': '6805e1774ce909a13638a0a5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:10:24.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 469, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 55, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 55, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:11:03.722Z', 'updatedAt': '2025-04-21T14:00:00.702Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876c', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:10:05.355Z', 'updatedAt': '2025-04-19T07:10:05.355Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '2025-04-19T14:08:47.000Z', 'totalHoursWorked': 829, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:10:05.298Z', 'updatedAt': '2025-04-19T14:09:25.648Z', '__v': 0}, {'_id': '6801fb58a7f360a4cab86db7', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': '2025-04-18T07:11:44.000Z', 'clockOutTime': '2025-04-18T14:00:00.000Z', 'totalHoursWorked': 408, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 116, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-18T07:12:24.188Z', 'updatedAt': '2025-04-18T14:00:00.756Z', '__v': 0}, {'_id': '68009d51ae2a00f5a022afb1', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T06:18:18.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 461, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 63, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T06:18:57.668Z', 'updatedAt': '2025-04-17T14:00:00.735Z', '__v': 0}, {'_id': '67ff7385e16c984ef659f3f2', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T09:07:43.000Z', 'clockOutTime': '2025-04-16T14:00:00.000Z', 'totalHoursWorked': 292, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 232, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-16T09:08:21.766Z', 'updatedAt': '2025-04-16T14:00:00.780Z', '__v': 0}, {'_id': '67fdf4103f8220b6bb17fc8b', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': '2025-04-15T05:51:37.000Z', 'clockOutTime': '2025-04-15T14:00:00.000Z', 'totalHoursWorked': 488, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 36, 'penalties': [{'uniqueId': 4532, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 36, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-15T05:52:16.220Z', 'updatedAt': '2025-04-15T14:00:00.725Z', '__v': 0}, {'_id': '67fca0a1a430ce18705ee7bf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': '2025-04-14T05:43:22.000Z', 'clockOutTime': '2025-04-14T14:00:00.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 28, 'penalties': [{'uniqueId': 9867, 'action': 'salary_deduction', 'percentage': 5, 'lateMinute': 28, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-14T05:44:01.939Z', 'updatedAt': '2025-04-14T14:00:00.743Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.239Z', 'updatedAt': '2025-04-12T14:00:01.239Z', '__v': 0}, {'_id': '67f75afd2f294c6b4ef62b06', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': '2025-04-10T05:44:55.000Z', 'clockOutTime': '2025-04-10T14:00:00.000Z', 'totalHoursWorked': 495, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 29, 'penalties': [{'uniqueId': 9867, 'action': 'written_warning', 'percentage': 0, 'lateMinute': 29, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-10T05:45:33.317Z', 'updatedAt': '2025-04-10T14:00:01.757Z', '__v': 0}, {'_id': '67f60ac6cca6b0c13574f1e5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': '2025-04-09T05:50:23.000Z', 'clockOutTime': '2025-04-09T14:00:00.000Z', 'totalHoursWorked': 489, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 35, 'penalties': [{'uniqueId': 4532, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 35, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-09T05:51:02.134Z', 'updatedAt': '2025-04-09T14:00:01.730Z', '__v': 0}, {'_id': '67f4b3c445a0b733d74cb805', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': '2025-04-08T05:26:52.000Z', 'clockOutTime': '2025-04-08T13:44:10.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-08T05:26:54.000Z', 'endTime': '2025-04-08T05:27:17.000Z', 'durationMinutes': 0}], 'breakTime': 0, 'lateMinutes': 11, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-08T05:27:32.018Z', 'updatedAt': '2025-04-08T13:44:48.264Z', '__v': 0}, {'_id': '67f36199999f16b8a24d4f41', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': '2025-04-07T05:24:02.000Z', 'clockOutTime': '2025-04-07T13:57:41.000Z', 'totalHoursWorked': 513, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 9, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-07T05:24:41.345Z', 'updatedAt': '2025-04-07T13:58:20.144Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4598', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.787Z', 'updatedAt': '2025-04-05T14:00:03.787Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9511', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.240Z', 'updatedAt': '2025-04-04T14:00:01.240Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f93', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.525Z', 'updatedAt': '2025-04-03T14:00:02.525Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f28', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.218Z', 'updatedAt': '2025-04-02T14:00:01.218Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c57', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.299Z', 'updatedAt': '2025-04-01T14:00:01.299Z', '__v': 0}], 'totalRecords': 22, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 02:59:25,265 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 02:59:26,903 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:28,540 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:30,035 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:31,613 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:33,103 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:34,639 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:36,140 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:37,855 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:39,304 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:40,830 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:42,467 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_vT0q1FR0eb6RVkSF4H3TYFsr "HTTP/1.1 200 OK"
2025-04-26 02:59:43,593 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/messages "HTTP/1.1 200 OK"
2025-04-26 02:59:43,780 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-26 02:59:43,780 - hr_assistant - INFO - Using cached employee data for employee EMP105
2025-04-26 02:59:43,780 - hr_assistant - INFO - Processing query for employee EMP105: Show my attendance this month
2025-04-26 02:59:44,420 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 02:59:44,421 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 02:59:45,129 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 02:59:45,743 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF "HTTP/1.1 200 OK"
2025-04-26 02:59:45,744 - hr_assistant - INFO - Using existing thread for employee EMP105: thread_LyOhGHShzwnX1X0BGSYji3zF
2025-04-26 02:59:46,261 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/messages "HTTP/1.1 200 OK"
2025-04-26 02:59:47,791 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs "HTTP/1.1 200 OK"
2025-04-26 02:59:48,303 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 02:59:49,840 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 02:59:51,376 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 02:59:51,377 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP105', 'date_type': 'this_month'}
2025-04-26 02:59:51,377 - hr_assistant - INFO - Fetching personal attendance for employee: EMP105 (date_type: this_month)
2025-04-26 02:59:51,377 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 02:59:52,911 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b280ae7e94af813bc7b5a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T06:12:49.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 467, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 57, 'penalties': [{'uniqueId': 9125, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 57, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T06:13:30.647Z', 'updatedAt': '2025-04-25T14:00:01.219Z', '__v': 0}, {'_id': '6809dba63f1d136990981079', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:39.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:35:18.892Z', 'updatedAt': '2025-04-24T14:00:01.105Z', '__v': 0}, {'_id': '6808f2613f1d136990980bcf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:01.851Z', 'updatedAt': '2025-04-23T14:00:01.851Z', '__v': 0}, {'_id': '68074202c60b619007b021e0', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:14:35.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 405, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 119, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T07:15:14.296Z', 'updatedAt': '2025-04-22T14:00:01.063Z', '__v': 0}, {'_id': '6805e1774ce909a13638a0a5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:10:24.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 469, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 55, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 55, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:11:03.722Z', 'updatedAt': '2025-04-21T14:00:00.702Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876c', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:10:05.355Z', 'updatedAt': '2025-04-19T07:10:05.355Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '2025-04-19T14:08:47.000Z', 'totalHoursWorked': 829, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:10:05.298Z', 'updatedAt': '2025-04-19T14:09:25.648Z', '__v': 0}, {'_id': '6801fb58a7f360a4cab86db7', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': '2025-04-18T07:11:44.000Z', 'clockOutTime': '2025-04-18T14:00:00.000Z', 'totalHoursWorked': 408, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 116, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-18T07:12:24.188Z', 'updatedAt': '2025-04-18T14:00:00.756Z', '__v': 0}, {'_id': '68009d51ae2a00f5a022afb1', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T06:18:18.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 461, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 63, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T06:18:57.668Z', 'updatedAt': '2025-04-17T14:00:00.735Z', '__v': 0}, {'_id': '67ff7385e16c984ef659f3f2', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T09:07:43.000Z', 'clockOutTime': '2025-04-16T14:00:00.000Z', 'totalHoursWorked': 292, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 232, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-16T09:08:21.766Z', 'updatedAt': '2025-04-16T14:00:00.780Z', '__v': 0}, {'_id': '67fdf4103f8220b6bb17fc8b', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': '2025-04-15T05:51:37.000Z', 'clockOutTime': '2025-04-15T14:00:00.000Z', 'totalHoursWorked': 488, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 36, 'penalties': [{'uniqueId': 4532, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 36, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-15T05:52:16.220Z', 'updatedAt': '2025-04-15T14:00:00.725Z', '__v': 0}, {'_id': '67fca0a1a430ce18705ee7bf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': '2025-04-14T05:43:22.000Z', 'clockOutTime': '2025-04-14T14:00:00.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 28, 'penalties': [{'uniqueId': 9867, 'action': 'salary_deduction', 'percentage': 5, 'lateMinute': 28, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-14T05:44:01.939Z', 'updatedAt': '2025-04-14T14:00:00.743Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.239Z', 'updatedAt': '2025-04-12T14:00:01.239Z', '__v': 0}, {'_id': '67f75afd2f294c6b4ef62b06', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': '2025-04-10T05:44:55.000Z', 'clockOutTime': '2025-04-10T14:00:00.000Z', 'totalHoursWorked': 495, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 29, 'penalties': [{'uniqueId': 9867, 'action': 'written_warning', 'percentage': 0, 'lateMinute': 29, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-10T05:45:33.317Z', 'updatedAt': '2025-04-10T14:00:01.757Z', '__v': 0}, {'_id': '67f60ac6cca6b0c13574f1e5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': '2025-04-09T05:50:23.000Z', 'clockOutTime': '2025-04-09T14:00:00.000Z', 'totalHoursWorked': 489, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 35, 'penalties': [{'uniqueId': 4532, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 35, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-09T05:51:02.134Z', 'updatedAt': '2025-04-09T14:00:01.730Z', '__v': 0}, {'_id': '67f4b3c445a0b733d74cb805', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': '2025-04-08T05:26:52.000Z', 'clockOutTime': '2025-04-08T13:44:10.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-08T05:26:54.000Z', 'endTime': '2025-04-08T05:27:17.000Z', 'durationMinutes': 0}], 'breakTime': 0, 'lateMinutes': 11, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-08T05:27:32.018Z', 'updatedAt': '2025-04-08T13:44:48.264Z', '__v': 0}, {'_id': '67f36199999f16b8a24d4f41', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': '2025-04-07T05:24:02.000Z', 'clockOutTime': '2025-04-07T13:57:41.000Z', 'totalHoursWorked': 513, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 9, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-07T05:24:41.345Z', 'updatedAt': '2025-04-07T13:58:20.144Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4598', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.787Z', 'updatedAt': '2025-04-05T14:00:03.787Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9511', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.240Z', 'updatedAt': '2025-04-04T14:00:01.240Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f93', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.525Z', 'updatedAt': '2025-04-03T14:00:02.525Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f28', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.218Z', 'updatedAt': '2025-04-02T14:00:01.218Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c57', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.299Z', 'updatedAt': '2025-04-01T14:00:01.299Z', '__v': 0}], 'totalRecords': 22, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 02:59:53,863 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 02:59:55,472 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 02:59:57,112 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 02:59:58,853 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:00,483 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:02,026 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:03,562 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:05,097 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:06,560 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:08,069 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:09,552 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:11,037 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:12,575 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:14,088 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:15,644 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:17,284 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:18,819 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:20,355 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LyOhGHShzwnX1X0BGSYji3zF/runs/run_DhH4chnNdwk0dvms0iD9ID4c "HTTP/1.1 200 OK"
2025-04-26 03:00:21,356 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-26 03:02:39,461 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:02:55,359 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 03:02:55,360 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-26 03:02:55,360 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 03:02:55,360 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-26 03:02:56,923 - hr_assistant - INFO - Login successful for user: EMP101
2025-04-26 03:02:57,949 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 03:02:57,950 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-04-26 03:02:57,953 - hr_assistant - INFO - Sending initial greeting to employee: EMP101
2025-04-26 03:03:16,390 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 03:03:16,391 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 03:03:16,391 - hr_assistant - INFO - Processing query for employee EMP101: get my team attendance for this week
2025-04-26 03:03:16,391 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:03:18,018 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:03:18,023 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:03:19,157 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:03:19,158 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-04-26 03:03:19,797 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:03:20,475 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/messages "HTTP/1.1 200 OK"
2025-04-26 03:03:22,114 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs "HTTP/1.1 200 OK"
2025-04-26 03:03:22,625 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:24,775 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:26,824 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:26,826 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-26 03:03:26,826 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-26 03:03:26,826 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:03:28,463 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:03:28,466 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 03:03:28,466 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:03:29,496 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:03:29,497 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:03:29,500 - hr_assistant - ERROR - Error executing function get_team_attendance: 'NoneType' object has no attribute 'get'
2025-04-26 03:03:30,509 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:03:32,104 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:33,566 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:33,567 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-26 03:03:33,567 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 03:03:33,567 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:03:33,568 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 03:03:34,613 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 03:03:35,527 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:03:37,092 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:39,271 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:39,274 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP101', 'date_type': 'recent'}
2025-04-26 03:03:39,274 - hr_assistant - INFO - Fetching personal attendance for employee: EMP101 (date_type: recent)
2025-04-26 03:03:39,274 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:03:40,823 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956244f7033e58fa7944', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'fullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.108Z', 'updatedAt': '2025-04-25T14:00:02.108Z', '__v': 0}, {'_id': '680a43e2e7e94af813bc75d1', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'fullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-24T14:00:02.143Z', 'updatedAt': '2025-04-24T14:00:02.143Z', '__v': 0}, {'_id': '6808b0842dc875d8ce014542', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': '', 'totalHoursWorked': 3434, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [{'startTime': '2025-04-23T10:13:20.000Z', 'endTime': '2025-04-23T10:13:52.000Z', 'durationMinutes': 0}], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '680741e1c60b619007b0219f', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T09:19:00.729Z', 'updatedAt': '2025-04-23T10:13:55.660Z', '__v': 0}, {'_id': '6806dc01c60b619007b02094', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '680615419e84b3dda84cbfc4', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-22T00:00:01.579Z', 'updatedAt': '2025-04-22T00:00:01.579Z', '__v': 0}, {'_id': '68058a814ce909a136389fe9', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6803ab274ce909a1363893c6', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-21T00:00:01.595Z', 'updatedAt': '2025-04-21T00:00:01.595Z', '__v': 0}, {'_id': '68034c46a7f360a4cab88749', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:18.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:09:58.072Z', 'updatedAt': '2025-04-19T07:09:58.072Z', '__v': 0}, {'_id': '68034c46a7f360a4cab8874d', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:18.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:09:58.316Z', 'updatedAt': '2025-04-19T07:09:58.316Z', '__v': 0}], 'totalRecords': 7, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:03:40,827 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP109', 'date_type': 'recent'}
2025-04-26 03:03:40,827 - hr_assistant - INFO - Fetching personal attendance for employee: EMP109 (date_type: recent)
2025-04-26 03:03:40,827 - hr_assistant - INFO - Attempting login for user: EMP109
2025-04-26 03:03:42,490 - hr_assistant - INFO - Login successful for user: EMP109
2025-04-26 03:03:42,492 - hr_assistant - INFO - Requesting employee data for: EMP109
2025-04-26 03:03:43,527 - hr_assistant - INFO - Retrieved employee data: {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 03:03:43,527 - hr_assistant - INFO - Successfully retrieved data for employee: EMP109
2025-04-26 03:03:43,529 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66fa8471a8adc4a2c26c058e/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:03:44,745 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7937', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.940Z', 'updatedAt': '2025-04-25T14:00:01.940Z', '__v': 0}, {'_id': '680962e13f1d136990980d4f', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': '2025-04-24T06:43:52.000Z', 'totalHoursWorked': 9, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T22:00:01.205Z', 'updatedAt': '2025-04-24T06:44:31.119Z', '__v': 0}, {'_id': '68058a814ce909a136389fe7', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T00:00:01.408Z', 'updatedAt': '2025-04-21T00:00:01.408Z', '__v': 0}, {'_id': '68064f61c60b619007b01d44', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.242Z', 'updatedAt': '2025-04-21T14:00:01.242Z', '__v': 0}, {'_id': '6802e781a7f360a4cab8848d', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-19T00:00:01.408Z', 'updatedAt': '2025-04-19T00:00:01.408Z', '__v': 0}], 'totalRecords': 5, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:03:44,747 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP121', 'date_type': 'recent'}
2025-04-26 03:03:44,747 - hr_assistant - INFO - Fetching personal attendance for employee: EMP121 (date_type: recent)
2025-04-26 03:03:44,747 - hr_assistant - INFO - Attempting login for user: EMP121
2025-04-26 03:03:46,281 - hr_assistant - INFO - Login successful for user: EMP121
2025-04-26 03:03:46,284 - hr_assistant - INFO - Requesting employee data for: EMP121
2025-04-26 03:03:47,310 - hr_assistant - INFO - Retrieved employee data: {'_id': '680627695993fc1ee4c4f793', 'userName': 'shaan Naseer', 'password': '123456', 'email': [{'personalEmail': 'amad@nastecsol.com', 'workEmail': 'shan@gmail.com'}], 'firstName': 'shaan', 'middleName': '', 'lastName': 'shaan second name ', 'martialStatus': 'Married', 'religion': 'Islam', 'address': {'streetAddress': 'Commercial Market Setellite Town Raqalpindi Pakistan', 'city': 'DHA', 'country': 'Pakistan'}, 'NIC': '234234234', 'iqamaNumber': {'id': '234234244', 'issueDate': '', 'expiryDate': ''}, 'passport': {'id': '324542', 'issueDate': '2025-04-21', 'expiryDate': '2025-05-10'}, 'imigrationSatus': 'national', 'DOB': '1998-02-21', 'age': 27, 'phoneNumber': [{'mobileNumber': '+928787999', 'landlineNumber': 'null'}], 'gender': 'Male', 'role': 'developer', 'profession': 'IT', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1481.jpeg', 'familyInfo': {'fatherName': 'father', 'motherName': 'mother', 'familyAddress': {'streetAddress': 'null', 'city': 'DHA Rawalpindi', 'country': 'p'}, 'familyContactNumber': '2342424234234', 'emergencyContactInfo': [{'relationName': 'gsdfgsfg', 'relationType': 'dsfsdfgdg', 'relationContactNumber': '23424242442', 'relationAddress': 'Commercial Market Setellite Town Raqalpindi Pakistan'}]}, 'educationInfo': [{'degreeName': 'bscs', 'degreeType': 'esdfs', 'fieldofStudy': 'sesdg', 'institute': 'gsdfgsdfg', 'from': '2025-04-21', 'to': '2025-04-21', 'results': 'dsfgsdfg'}], 'experienceBackground': [{'jobTitle': '', 'company': '', 'referenceName': '', 'referenceContact': '', 'duration': '', 'from': '', 'to': '', 'description': ''}], 'bankingInfo': [{'title': '', 'accountNumber': '', 'branchCode': '', 'accountType': '', 'country': '', 'empSwiftCode': '', 'bankName': ''}], 'employeeInfo': [{'depId': '', 'depName': 'IT', 'jobTitle': '', 'jobDescription': '', 'reportingManager': 'NASAR', 'jobRank': '', 'designation': 'employee', 'grade': 'L3', 'workDomain': '', 'location': 'Islamabad', 'employeeStatus': 'offboarded', 'employeeType': 'Permanent', 'employeeShift': 'FullTime', 'joiningDate': '2025-04-21', 'leavingDate': '', 'hiringDate': '2025-04-21', 'noticePeriod': '', 'empId': 'EMP121'}], 'salaryInfo': {'baseSalary': 2000, 'currency': 'SAR', 'timeCycle_Period': '', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '', 'netSalary': ''}, 'socialLinks': [], 'loanInfo': [{'totalLoanAmount': 100, 'loanIssueDate': '2025-04-21T12:43:54.958Z', 'loanDuration': 1, 'installmentAmount': '100.00', 'paidAmount': 100, 'totalInstallments': 1, 'paidInstallments': 0}], 'assetsInfo': [], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.57223190281576|73.14783367927708', 'lastLocation': '33.57219844746315,73.14750090442337|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-23T09:27:07.430Z'}, 'contractInfo': [{'contractId': '', 'contractStatus': '', 'contractType': 'Permanent', 'contractStartDate': '2025-04-21', 'contractExpiry': '', 'probabtionStartDate': '2025-04-21', 'probationPeriod': '3months ', 'probationstatus': ''}], 'documentsInfo': [], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', 'createdAt': '2025-04-21T11:09:29.450Z', 'updatedAt': '2025-04-23T20:00:00.769Z', '__v': 1, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 1.6666666666666667, 'remaining': 1.6666666666666667, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1171}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}}}
2025-04-26 03:03:47,311 - hr_assistant - INFO - Successfully retrieved data for employee: EMP121
2025-04-26 03:03:47,313 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/680627695993fc1ee4c4f793/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:03:48,534 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956244f7033e58fa7942', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6808bbc15bdf53dfc1c477cb', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.092Z', 'updatedAt': '2025-04-25T14:00:02.092Z', '__v': 0}, {'_id': '680a43e2e7e94af813bc75cc', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6808bbc15bdf53dfc1c477cb', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-24T14:00:02.042Z', 'updatedAt': '2025-04-24T14:00:02.042Z', '__v': 0}, {'_id': '6808a20b6a3f0d53693682d2', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:17:12.000Z', 'clockOutTime': '2025-04-23T09:12:14.000Z', 'totalHoursWorked': 99, 'location': 'biometric', 'status': 'Half', 'breaksTaken': [{'startTime': '2025-04-23T08:22:45.000Z', 'endTime': '2025-04-23T08:24:20.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 182, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 227, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-23T08:17:15.914Z', 'updatedAt': '2025-04-23T20:00:00.414Z', '__v': 0}, {'_id': '6807a0e16a3f0d5369367cfd', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '68063f88c60b619007b0177d', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-22T14:00:01.867Z', 'updatedAt': '2025-04-22T14:00:01.867Z', '__v': 0}, {'_id': '68064f61c60b619007b01d4a', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.255Z', 'updatedAt': '2025-04-21T14:00:01.255Z', '__v': 0}], 'totalRecords': 5, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:03:50,088 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:03:51,604 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:53,651 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:55,710 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:57,175 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:03:59,182 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:04:01,229 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/runs/run_fvv0UhZfZ6m8kvT5J3YV9Bk4 "HTTP/1.1 200 OK"
2025-04-26 03:04:01,639 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tYERz0MGaK0yI04yPkWon5Xr/messages "HTTP/1.1 200 OK"
2025-04-26 03:08:34,455 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:08:47,953 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:08:47,953 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 03:08:47,953 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:08:47,953 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:08:49,555 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:08:50,487 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:08:50,489 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:08:50,491 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-26 03:09:20,448 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:09:20,448 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 03:09:20,448 - hr_assistant - INFO - Processing query for employee EMP103: get recent attendance for my team
2025-04-26 03:09:20,448 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:09:22,116 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:09:22,122 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:09:22,122 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 03:09:22,628 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:09:23,139 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/messages "HTTP/1.1 200 OK"
2025-04-26 03:09:24,266 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/runs "HTTP/1.1 200 OK"
2025-04-26 03:09:25,299 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/runs/run_LDSKeg4xVYjso2m0o5XeG7Q9 "HTTP/1.1 200 OK"
2025-04-26 03:09:26,822 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/runs/run_LDSKeg4xVYjso2m0o5XeG7Q9 "HTTP/1.1 200 OK"
2025-04-26 03:09:28,362 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/runs/run_LDSKeg4xVYjso2m0o5XeG7Q9 "HTTP/1.1 200 OK"
2025-04-26 03:09:28,364 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103'}
2025-04-26 03:09:28,364 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-26 03:09:28,364 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 03:09:28,364 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:09:28,365 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 03:09:29,393 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 03:09:29,396 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:09:30,602 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 03:09:31,639 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/runs/run_LDSKeg4xVYjso2m0o5XeG7Q9/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:09:33,790 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/runs/run_LDSKeg4xVYjso2m0o5XeG7Q9 "HTTP/1.1 200 OK"
2025-04-26 03:09:35,327 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/runs/run_LDSKeg4xVYjso2m0o5XeG7Q9 "HTTP/1.1 200 OK"
2025-04-26 03:09:37,067 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/runs/run_LDSKeg4xVYjso2m0o5XeG7Q9 "HTTP/1.1 200 OK"
2025-04-26 03:09:38,674 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/runs/run_LDSKeg4xVYjso2m0o5XeG7Q9 "HTTP/1.1 200 OK"
2025-04-26 03:09:39,217 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ixDeLF7Epl35RDotviHRetcY/messages "HTTP/1.1 200 OK"
2025-04-26 03:13:02,936 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:13:09,373 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:13:21,041 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:13:21,041 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 03:13:21,041 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:13:21,041 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:13:23,685 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:13:24,614 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:13:24,615 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:13:24,618 - hr_assistant - INFO - Processing query for employee EMP103: get recent attendance for my team
2025-04-26 03:13:24,618 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:13:25,928 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:13:26,161 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:13:26,161 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 03:13:27,249 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:13:27,855 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/messages "HTTP/1.1 200 OK"
2025-04-26 03:13:29,445 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/runs "HTTP/1.1 200 OK"
2025-04-26 03:13:30,503 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/runs/run_6BoGSrBBBKpzmDC6ncUen3XE "HTTP/1.1 200 OK"
2025-04-26 03:13:31,974 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/runs/run_6BoGSrBBBKpzmDC6ncUen3XE "HTTP/1.1 200 OK"
2025-04-26 03:13:31,975 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-26 03:13:31,976 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-26 03:13:31,976 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 03:13:31,976 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:13:31,977 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 03:13:32,992 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 03:13:32,994 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:13:34,199 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 03:13:35,650 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/runs/run_6BoGSrBBBKpzmDC6ncUen3XE/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:13:37,163 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/runs/run_6BoGSrBBBKpzmDC6ncUen3XE "HTTP/1.1 200 OK"
2025-04-26 03:13:38,681 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/runs/run_6BoGSrBBBKpzmDC6ncUen3XE "HTTP/1.1 200 OK"
2025-04-26 03:13:40,394 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/runs/run_6BoGSrBBBKpzmDC6ncUen3XE "HTTP/1.1 200 OK"
2025-04-26 03:13:42,365 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/runs/run_6BoGSrBBBKpzmDC6ncUen3XE "HTTP/1.1 200 OK"
2025-04-26 03:13:43,812 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/runs/run_6BoGSrBBBKpzmDC6ncUen3XE "HTTP/1.1 200 OK"
2025-04-26 03:13:44,256 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qurukKvJq52g6I8DUuliDm2i/messages "HTTP/1.1 200 OK"
2025-04-26 03:22:10,741 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:26:29,321 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:26:41,737 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:26:41,737 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 03:26:41,737 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:26:41,738 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:26:43,927 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:26:44,981 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:26:44,982 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:26:44,983 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-26 03:26:51,930 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:26:51,930 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 03:26:51,930 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-26 03:26:51,930 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:26:53,165 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:26:53,347 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:26:53,347 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 03:26:54,060 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:26:54,699 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/messages "HTTP/1.1 200 OK"
2025-04-26 03:26:56,235 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs "HTTP/1.1 200 OK"
2025-04-26 03:26:56,746 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:26:59,205 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:26:59,206 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 03:26:59,206 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-26 03:26:59,207 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 03:27:00,435 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 18, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:27:01,354 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:27:02,892 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:27:04,426 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:27:05,963 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:27:07,500 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:27:08,996 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:27:10,468 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:27:12,005 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:27:13,539 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_HpVnCJEavszZRMDNHdf9Fgdm "HTTP/1.1 200 OK"
2025-04-26 03:27:13,951 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/messages "HTTP/1.1 200 OK"
2025-04-26 03:29:02,072 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:29:02,073 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 03:29:02,073 - hr_assistant - INFO - Processing query for employee EMP103: احصل على بيانات الحضور الأخيرة لفريقي
2025-04-26 03:29:03,926 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:29:04,232 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:29:05,256 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn "HTTP/1.1 200 OK"
2025-04-26 03:29:05,257 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_QfLRQe63QqwK8MaNgxMXDUSn
2025-04-26 03:29:05,973 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/messages "HTTP/1.1 200 OK"
2025-04-26 03:29:07,815 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs "HTTP/1.1 200 OK"
2025-04-26 03:29:08,327 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:09,866 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:11,401 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:11,402 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-26 03:29:11,402 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-26 03:29:11,403 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 03:29:11,403 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:29:11,404 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 03:29:12,436 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 03:29:12,438 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:29:13,627 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 03:29:15,026 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:29:16,622 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:18,670 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:20,125 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:21,563 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:23,073 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:24,609 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:26,047 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:27,681 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/runs/run_u8WAZ0XPRsy0q87QmNHMB6Xu "HTTP/1.1 200 OK"
2025-04-26 03:29:28,079 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_QfLRQe63QqwK8MaNgxMXDUSn/messages "HTTP/1.1 200 OK"
2025-04-26 03:30:09,260 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:30:21,841 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:30:21,842 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 03:30:21,842 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:30:21,842 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:30:23,387 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:30:24,314 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:30:24,315 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:30:24,316 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-26 03:30:33,706 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:30:33,706 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 03:30:33,706 - hr_assistant - INFO - Processing query for employee EMP103: احصل على بيانات الحضور الأخيرة لفريقي
2025-04-26 03:30:33,706 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:30:35,571 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:30:35,883 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:30:35,883 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 03:30:36,902 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:30:37,516 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/messages "HTTP/1.1 200 OK"
2025-04-26 03:30:39,770 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/runs "HTTP/1.1 200 OK"
2025-04-26 03:30:40,281 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/runs/run_ajBhlOjNjntTlfD5A3tJOSbT "HTTP/1.1 200 OK"
2025-04-26 03:30:42,432 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/runs/run_ajBhlOjNjntTlfD5A3tJOSbT "HTTP/1.1 200 OK"
2025-04-26 03:30:42,436 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-26 03:30:42,436 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-26 03:30:42,436 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 03:30:42,436 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:30:42,437 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 03:30:43,461 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 03:30:43,464 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:30:44,687 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 03:30:45,708 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/runs/run_ajBhlOjNjntTlfD5A3tJOSbT/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:30:47,182 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/runs/run_ajBhlOjNjntTlfD5A3tJOSbT "HTTP/1.1 200 OK"
2025-04-26 03:30:48,677 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/runs/run_ajBhlOjNjntTlfD5A3tJOSbT "HTTP/1.1 200 OK"
2025-04-26 03:30:50,727 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/runs/run_ajBhlOjNjntTlfD5A3tJOSbT "HTTP/1.1 200 OK"
2025-04-26 03:30:52,364 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/runs/run_ajBhlOjNjntTlfD5A3tJOSbT "HTTP/1.1 200 OK"
2025-04-26 03:30:53,859 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/runs/run_ajBhlOjNjntTlfD5A3tJOSbT "HTTP/1.1 200 OK"
2025-04-26 03:30:54,196 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LFtGFVjfS953ESUgfmUcHGtj/messages "HTTP/1.1 200 OK"
2025-04-26 03:38:11,669 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:38:19,342 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:38:19,342 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 03:38:19,342 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:38:19,342 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:38:21,008 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:38:21,977 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:38:21,978 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:38:21,980 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-26 03:38:25,051 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:38:25,051 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 03:38:25,051 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-26 03:38:25,052 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:38:26,221 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:38:26,542 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:38:26,542 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 03:38:27,560 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:38:28,175 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/messages "HTTP/1.1 200 OK"
2025-04-26 03:38:29,403 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs "HTTP/1.1 200 OK"
2025-04-26 03:38:30,530 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:32,065 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:33,533 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:33,535 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 03:38:33,535 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-26 03:38:33,536 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 03:38:34,729 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 18, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:38:34,732 - hr_assistant - INFO - inititiating formatting PERSONAL response data
2025-04-26 03:38:36,248 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:38:37,811 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:39,262 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:40,770 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:42,228 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:43,841 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:45,377 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:47,015 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:48,482 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:49,933 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:51,357 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:53,467 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:54,934 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:56,436 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:57,892 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:38:59,406 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:39:00,943 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:39:02,477 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_F7S3PF6PVw0bjJh39l40XFRW/runs/run_xN1ivlwZLCJMTofxv7rNWNSc "HTTP/1.1 200 OK"
2025-04-26 03:39:02,479 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-26 03:39:44,684 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:39:46,422 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:39:46,422 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 03:39:46,422 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:39:46,422 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:39:48,659 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:39:49,685 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:39:49,686 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:39:49,687 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-26 03:39:49,687 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:39:51,643 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:39:51,909 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:39:51,909 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 03:39:52,448 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:39:53,574 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/messages "HTTP/1.1 200 OK"
2025-04-26 03:39:55,930 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs "HTTP/1.1 200 OK"
2025-04-26 03:39:56,442 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:39:58,490 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:39:58,492 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 03:39:58,492 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-26 03:39:58,492 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 03:39:59,720 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 18, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:39:59,723 - hr_assistant - INFO - inititiating formatting PERSONAL response data
2025-04-26 03:40:01,154 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:40:02,688 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:40:04,532 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:40:06,170 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:40:07,623 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:40:09,139 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:40:10,675 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:40:12,212 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:40:13,747 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/runs/run_MHFFnFdyR4crDK4CQSS9qmXM "HTTP/1.1 200 OK"
2025-04-26 03:40:14,157 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VJo6Ie6aH0ltiMhTh1hlRzqe/messages "HTTP/1.1 200 OK"
2025-04-26 03:43:39,320 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:43:48,304 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:43:48,304 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 03:43:48,304 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:43:48,304 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:43:49,820 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:43:50,837 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:43:50,838 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:43:50,839 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-26 03:43:50,839 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:43:51,959 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:43:52,272 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:43:52,272 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 03:43:53,289 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:43:53,904 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/messages "HTTP/1.1 200 OK"
2025-04-26 03:43:55,448 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs "HTTP/1.1 200 OK"
2025-04-26 03:43:55,952 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO "HTTP/1.1 200 OK"
2025-04-26 03:43:57,999 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO "HTTP/1.1 200 OK"
2025-04-26 03:43:58,001 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 03:43:58,001 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-26 03:43:58,001 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 03:43:59,231 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 18, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:43:59,234 - hr_assistant - INFO - inititiating formatting PERSONAL response data{}
2025-04-26 03:44:00,355 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:44:01,898 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO "HTTP/1.1 200 OK"
2025-04-26 03:44:03,349 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO "HTTP/1.1 200 OK"
2025-04-26 03:44:04,861 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO "HTTP/1.1 200 OK"
2025-04-26 03:44:06,427 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO "HTTP/1.1 200 OK"
2025-04-26 03:44:07,932 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO "HTTP/1.1 200 OK"
2025-04-26 03:44:09,468 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO "HTTP/1.1 200 OK"
2025-04-26 03:44:11,516 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/runs/run_dLP0swaVmf7cfz1A4SznoooO "HTTP/1.1 200 OK"
2025-04-26 03:44:11,856 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_6EhCtJc0O3oWlAdvctcxXCZo/messages "HTTP/1.1 200 OK"
2025-04-26 03:44:55,218 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:45:12,237 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:45:12,238 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 03:45:12,238 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:45:12,238 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:45:13,877 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:45:14,910 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:45:14,911 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:45:14,914 - hr_assistant - INFO - Processing query for employee EMP103: Show my recent attendance
2025-04-26 03:45:14,914 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:45:16,233 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:45:16,373 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:45:16,373 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 03:45:16,847 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:45:17,563 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/messages "HTTP/1.1 200 OK"
2025-04-26 03:45:19,407 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs "HTTP/1.1 200 OK"
2025-04-26 03:45:20,020 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO "HTTP/1.1 200 OK"
2025-04-26 03:45:21,566 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO "HTTP/1.1 200 OK"
2025-04-26 03:45:23,093 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO "HTTP/1.1 200 OK"
2025-04-26 03:45:23,094 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103'}
2025-04-26 03:45:23,095 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-26 03:45:23,095 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:45:24,424 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:45:24,426 - hr_assistant - INFO - inititiating formatting PERSONAL response data{}
2025-04-26 03:45:25,286 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:45:26,779 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO "HTTP/1.1 200 OK"
2025-04-26 03:45:28,418 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO "HTTP/1.1 200 OK"
2025-04-26 03:45:29,953 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO "HTTP/1.1 200 OK"
2025-04-26 03:45:31,741 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO "HTTP/1.1 200 OK"
2025-04-26 03:45:33,332 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO "HTTP/1.1 200 OK"
2025-04-26 03:45:34,971 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/runs/run_dqbC0GsSy1Og04uwm0kg2omO "HTTP/1.1 200 OK"
2025-04-26 03:45:35,324 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_OOXhXnGdJXT0aNCneHAjxpkG/messages "HTTP/1.1 200 OK"
2025-04-26 03:46:38,370 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:46:45,471 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:46:55,610 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:46:55,610 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 03:46:55,610 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 03:46:55,610 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 03:46:57,094 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 03:46:58,065 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 03:46:58,066 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 03:46:58,067 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-26 03:49:03,491 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:49:03,491 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 03:49:03,491 - hr_assistant - INFO - Processing query for employee EMP103: show my recent attendance
2025-04-26 03:49:03,491 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:49:05,527 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:49:05,727 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:49:05,728 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 03:49:06,709 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:49:07,882 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/messages "HTTP/1.1 200 OK"
2025-04-26 03:49:11,055 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs "HTTP/1.1 200 OK"
2025-04-26 03:49:11,565 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv "HTTP/1.1 200 OK"
2025-04-26 03:49:12,996 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv "HTTP/1.1 200 OK"
2025-04-26 03:49:15,001 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv "HTTP/1.1 200 OK"
2025-04-26 03:49:15,003 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103'}
2025-04-26 03:49:15,003 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-26 03:49:15,004 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:49:16,276 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:49:16,278 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 03:49:17,505 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:49:19,040 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv "HTTP/1.1 200 OK"
2025-04-26 03:49:20,578 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv "HTTP/1.1 200 OK"
2025-04-26 03:49:22,125 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv "HTTP/1.1 200 OK"
2025-04-26 03:49:24,103 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv "HTTP/1.1 200 OK"
2025-04-26 03:49:25,595 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv "HTTP/1.1 200 OK"
2025-04-26 03:49:27,131 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_27ludTJbI2XYQpSgpV5MMLSv "HTTP/1.1 200 OK"
2025-04-26 03:49:27,540 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/messages "HTTP/1.1 200 OK"
2025-04-26 03:50:44,809 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:50:44,809 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 03:50:44,809 - hr_assistant - INFO - Processing query for employee EMP103: my personal attendance for this week
2025-04-26 03:50:46,693 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:50:46,695 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:50:47,820 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1 "HTTP/1.1 200 OK"
2025-04-26 03:50:47,820 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_O3BYBqTwv6PvZT9hailwnxD1
2025-04-26 03:50:48,946 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/messages "HTTP/1.1 200 OK"
2025-04-26 03:50:50,688 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs "HTTP/1.1 200 OK"
2025-04-26 03:50:51,199 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D "HTTP/1.1 200 OK"
2025-04-26 03:50:54,170 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D "HTTP/1.1 200 OK"
2025-04-26 03:50:54,172 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-26 03:50:54,172 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: recent)
2025-04-26 03:50:54,172 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 03:50:55,296 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:50:55,300 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 03:50:56,217 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:50:57,753 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D "HTTP/1.1 200 OK"
2025-04-26 03:50:59,288 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D "HTTP/1.1 200 OK"
2025-04-26 03:51:00,825 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D "HTTP/1.1 200 OK"
2025-04-26 03:51:02,360 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D "HTTP/1.1 200 OK"
2025-04-26 03:51:03,900 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D "HTTP/1.1 200 OK"
2025-04-26 03:51:05,400 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D "HTTP/1.1 200 OK"
2025-04-26 03:51:07,890 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_8MIZVTjnDe4i6KX6GniI6X3D "HTTP/1.1 200 OK"
2025-04-26 03:51:08,302 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/messages "HTTP/1.1 200 OK"
2025-04-26 03:52:57,830 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 03:52:57,830 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 03:52:57,830 - hr_assistant - INFO - Processing query for employee EMP103: my personal attendance for this week
2025-04-26 03:52:59,544 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:52:59,812 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:53:00,324 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1 "HTTP/1.1 200 OK"
2025-04-26 03:53:00,325 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_O3BYBqTwv6PvZT9hailwnxD1
2025-04-26 03:53:00,835 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/messages "HTTP/1.1 200 OK"
2025-04-26 03:53:05,343 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs "HTTP/1.1 200 OK"
2025-04-26 03:53:06,365 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_O2ai7JYk8O2pbNFacQJXWQfw "HTTP/1.1 200 OK"
2025-04-26 03:53:08,003 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_O2ai7JYk8O2pbNFacQJXWQfw "HTTP/1.1 200 OK"
2025-04-26 03:53:08,004 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 03:53:08,004 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-26 03:53:08,004 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 03:53:09,234 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 18, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 03:53:09,236 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 18, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 03:53:10,758 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_O2ai7JYk8O2pbNFacQJXWQfw/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 03:53:12,817 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_O2ai7JYk8O2pbNFacQJXWQfw "HTTP/1.1 200 OK"
2025-04-26 03:53:14,352 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_O2ai7JYk8O2pbNFacQJXWQfw "HTTP/1.1 200 OK"
2025-04-26 03:53:15,838 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_O2ai7JYk8O2pbNFacQJXWQfw "HTTP/1.1 200 OK"
2025-04-26 03:53:17,322 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_O2ai7JYk8O2pbNFacQJXWQfw "HTTP/1.1 200 OK"
2025-04-26 03:53:18,960 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/runs/run_O2ai7JYk8O2pbNFacQJXWQfw "HTTP/1.1 200 OK"
2025-04-26 03:53:19,398 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O3BYBqTwv6PvZT9hailwnxD1/messages "HTTP/1.1 200 OK"
2025-04-26 03:58:37,322 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 03:58:58,154 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-26 03:58:58,154 - hr_assistant - INFO - Fetching fresh employee data for employee EMP105
2025-04-26 03:58:58,154 - hr_assistant - INFO - Requesting employee data for: EMP105
2025-04-26 03:58:58,154 - hr_assistant - INFO - Attempting login for user: EMP105
2025-04-26 03:59:00,272 - hr_assistant - INFO - Login successful for user: EMP105
2025-04-26 03:59:01,207 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-26 03:59:01,208 - hr_assistant - INFO - Successfully retrieved data for employee: EMP105
2025-04-26 03:59:01,210 - hr_assistant - INFO - Sending initial greeting to employee: EMP105
2025-04-26 03:59:22,143 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-26 03:59:22,143 - hr_assistant - INFO - Using cached employee data for employee EMP105
2025-04-26 03:59:22,143 - hr_assistant - INFO - Processing query for employee EMP105: what's my leave balance
2025-04-26 03:59:22,144 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 03:59:24,127 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 03:59:24,388 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 03:59:24,388 - hr_assistant - INFO - Creating new thread for employee EMP105
2025-04-26 03:59:25,501 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 03:59:26,072 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/messages "HTTP/1.1 200 OK"
2025-04-26 03:59:28,243 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs "HTTP/1.1 200 OK"
2025-04-26 03:59:29,605 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_x0wS6LXODPtrPjLFnHOGm6rN "HTTP/1.1 200 OK"
2025-04-26 03:59:31,095 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_x0wS6LXODPtrPjLFnHOGm6rN "HTTP/1.1 200 OK"
2025-04-26 03:59:35,083 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_x0wS6LXODPtrPjLFnHOGm6rN "HTTP/1.1 200 OK"
2025-04-26 03:59:35,454 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/messages "HTTP/1.1 200 OK"
2025-04-26 04:00:04,217 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-26 04:00:04,217 - hr_assistant - INFO - Using cached employee data for employee EMP105
2025-04-26 04:00:04,217 - hr_assistant - INFO - Processing query for employee EMP105: do i have any loan installment ?
2025-04-26 04:00:05,492 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:00:05,804 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:00:06,314 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8 "HTTP/1.1 200 OK"
2025-04-26 04:00:06,315 - hr_assistant - INFO - Using existing thread for employee EMP105: thread_AxNkWmdTVUijkV3LRXm2nSl8
2025-04-26 04:00:07,373 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/messages "HTTP/1.1 200 OK"
2025-04-26 04:00:08,567 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs "HTTP/1.1 200 OK"
2025-04-26 04:00:31,261 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_1L14cGsWDhPrgk9u9Kizn0Wl "HTTP/1.1 200 OK"
2025-04-26 04:00:31,709 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/messages "HTTP/1.1 200 OK"
2025-04-26 04:00:48,590 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-26 04:00:48,590 - hr_assistant - INFO - Using cached employee data for employee EMP105
2025-04-26 04:00:48,590 - hr_assistant - INFO - Processing query for employee EMP105: what's my team attendance ?
2025-04-26 04:00:49,834 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:00:50,142 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:00:51,167 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8 "HTTP/1.1 200 OK"
2025-04-26 04:00:51,168 - hr_assistant - INFO - Using existing thread for employee EMP105: thread_AxNkWmdTVUijkV3LRXm2nSl8
2025-04-26 04:00:51,780 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/messages "HTTP/1.1 200 OK"
2025-04-26 04:00:53,316 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs "HTTP/1.1 200 OK"
2025-04-26 04:00:53,795 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_Si1ed3nD6R2rNhG9AVFQqgoe "HTTP/1.1 200 OK"
2025-04-26 04:00:55,336 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_Si1ed3nD6R2rNhG9AVFQqgoe "HTTP/1.1 200 OK"
2025-04-26 04:00:55,338 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP105'}
2025-04-26 04:00:55,338 - hr_assistant - INFO - Fetching team attendance for manager: EMP105 (date_type: recent)
2025-04-26 04:00:55,338 - hr_assistant - INFO - Fetching team data for manager: EMP105
2025-04-26 04:00:55,339 - hr_assistant - INFO - cache data for manager {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-26 04:00:55,340 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d8250f99b629cbdb2e0f3a
2025-04-26 04:00:56,238 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 04:00:57,063 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_Si1ed3nD6R2rNhG9AVFQqgoe/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 04:00:58,535 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_Si1ed3nD6R2rNhG9AVFQqgoe "HTTP/1.1 200 OK"
2025-04-26 04:00:59,992 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_Si1ed3nD6R2rNhG9AVFQqgoe "HTTP/1.1 200 OK"
2025-04-26 04:00:59,993 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP105'}
2025-04-26 04:00:59,993 - hr_assistant - INFO - Fetching team data for manager: EMP105
2025-04-26 04:00:59,993 - hr_assistant - INFO - cache data for manager {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-26 04:00:59,994 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d8250f99b629cbdb2e0f3a
2025-04-26 04:01:00,955 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 04:01:01,795 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_Si1ed3nD6R2rNhG9AVFQqgoe/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 04:01:03,247 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_Si1ed3nD6R2rNhG9AVFQqgoe "HTTP/1.1 200 OK"
2025-04-26 04:01:05,399 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_Si1ed3nD6R2rNhG9AVFQqgoe "HTTP/1.1 200 OK"
2025-04-26 04:01:05,759 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/messages "HTTP/1.1 200 OK"
2025-04-26 04:01:26,319 - hr_assistant - INFO - Chat request received for employee: EMP105
2025-04-26 04:01:26,319 - hr_assistant - INFO - Using cached employee data for employee EMP105
2025-04-26 04:01:26,319 - hr_assistant - INFO - Processing query for employee EMP105: what's my attendance this week ?
2025-04-26 04:01:27,826 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:01:27,997 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:01:28,951 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8 "HTTP/1.1 200 OK"
2025-04-26 04:01:28,952 - hr_assistant - INFO - Using existing thread for employee EMP105: thread_AxNkWmdTVUijkV3LRXm2nSl8
2025-04-26 04:01:29,998 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/messages "HTTP/1.1 200 OK"
2025-04-26 04:01:31,613 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs "HTTP/1.1 200 OK"
2025-04-26 04:01:32,637 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_kGIwgJ9t557zrwgulOEP7lwM "HTTP/1.1 200 OK"
2025-04-26 04:01:34,170 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_kGIwgJ9t557zrwgulOEP7lwM "HTTP/1.1 200 OK"
2025-04-26 04:01:34,172 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP105', 'date_type': 'this_month'}
2025-04-26 04:01:34,172 - hr_assistant - INFO - Fetching personal attendance for employee: EMP105 (date_type: this_month)
2025-04-26 04:01:34,172 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 04:01:35,563 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b280ae7e94af813bc7b5a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T06:12:49.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 467, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 57, 'penalties': [{'uniqueId': 9125, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 57, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T06:13:30.647Z', 'updatedAt': '2025-04-25T14:00:01.219Z', '__v': 0}, {'_id': '6809dba63f1d136990981079', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:39.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:35:18.892Z', 'updatedAt': '2025-04-24T14:00:01.105Z', '__v': 0}, {'_id': '6808f2613f1d136990980bcf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:01.851Z', 'updatedAt': '2025-04-23T14:00:01.851Z', '__v': 0}, {'_id': '68074202c60b619007b021e0', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:14:35.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 405, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 119, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T07:15:14.296Z', 'updatedAt': '2025-04-22T14:00:01.063Z', '__v': 0}, {'_id': '6805e1774ce909a13638a0a5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:10:24.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 469, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 55, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 55, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:11:03.722Z', 'updatedAt': '2025-04-21T14:00:00.702Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876c', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:10:05.355Z', 'updatedAt': '2025-04-19T07:10:05.355Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '2025-04-19T14:08:47.000Z', 'totalHoursWorked': 829, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:10:05.298Z', 'updatedAt': '2025-04-19T14:09:25.648Z', '__v': 0}, {'_id': '6801fb58a7f360a4cab86db7', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': '2025-04-18T07:11:44.000Z', 'clockOutTime': '2025-04-18T14:00:00.000Z', 'totalHoursWorked': 408, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 116, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-18T07:12:24.188Z', 'updatedAt': '2025-04-18T14:00:00.756Z', '__v': 0}, {'_id': '68009d51ae2a00f5a022afb1', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T06:18:18.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 461, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 63, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T06:18:57.668Z', 'updatedAt': '2025-04-17T14:00:00.735Z', '__v': 0}, {'_id': '67ff7385e16c984ef659f3f2', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T09:07:43.000Z', 'clockOutTime': '2025-04-16T14:00:00.000Z', 'totalHoursWorked': 292, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 232, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-16T09:08:21.766Z', 'updatedAt': '2025-04-16T14:00:00.780Z', '__v': 0}, {'_id': '67fdf4103f8220b6bb17fc8b', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': '2025-04-15T05:51:37.000Z', 'clockOutTime': '2025-04-15T14:00:00.000Z', 'totalHoursWorked': 488, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 36, 'penalties': [{'uniqueId': 4532, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 36, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-15T05:52:16.220Z', 'updatedAt': '2025-04-15T14:00:00.725Z', '__v': 0}, {'_id': '67fca0a1a430ce18705ee7bf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': '2025-04-14T05:43:22.000Z', 'clockOutTime': '2025-04-14T14:00:00.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 28, 'penalties': [{'uniqueId': 9867, 'action': 'salary_deduction', 'percentage': 5, 'lateMinute': 28, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-14T05:44:01.939Z', 'updatedAt': '2025-04-14T14:00:00.743Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.239Z', 'updatedAt': '2025-04-12T14:00:01.239Z', '__v': 0}, {'_id': '67f75afd2f294c6b4ef62b06', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': '2025-04-10T05:44:55.000Z', 'clockOutTime': '2025-04-10T14:00:00.000Z', 'totalHoursWorked': 495, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 29, 'penalties': [{'uniqueId': 9867, 'action': 'written_warning', 'percentage': 0, 'lateMinute': 29, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-10T05:45:33.317Z', 'updatedAt': '2025-04-10T14:00:01.757Z', '__v': 0}, {'_id': '67f60ac6cca6b0c13574f1e5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': '2025-04-09T05:50:23.000Z', 'clockOutTime': '2025-04-09T14:00:00.000Z', 'totalHoursWorked': 489, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 35, 'penalties': [{'uniqueId': 4532, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 35, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-09T05:51:02.134Z', 'updatedAt': '2025-04-09T14:00:01.730Z', '__v': 0}, {'_id': '67f4b3c445a0b733d74cb805', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': '2025-04-08T05:26:52.000Z', 'clockOutTime': '2025-04-08T13:44:10.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-08T05:26:54.000Z', 'endTime': '2025-04-08T05:27:17.000Z', 'durationMinutes': 0}], 'breakTime': 0, 'lateMinutes': 11, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-08T05:27:32.018Z', 'updatedAt': '2025-04-08T13:44:48.264Z', '__v': 0}, {'_id': '67f36199999f16b8a24d4f41', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': '2025-04-07T05:24:02.000Z', 'clockOutTime': '2025-04-07T13:57:41.000Z', 'totalHoursWorked': 513, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 9, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-07T05:24:41.345Z', 'updatedAt': '2025-04-07T13:58:20.144Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4598', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.787Z', 'updatedAt': '2025-04-05T14:00:03.787Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9511', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.240Z', 'updatedAt': '2025-04-04T14:00:01.240Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f93', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.525Z', 'updatedAt': '2025-04-03T14:00:02.525Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f28', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.218Z', 'updatedAt': '2025-04-02T14:00:01.218Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c57', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.299Z', 'updatedAt': '2025-04-01T14:00:01.299Z', '__v': 0}], 'totalRecords': 22, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 04:01:35,566 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b280ae7e94af813bc7b5a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T06:12:49.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 467, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 57, 'penalties': [{'uniqueId': 9125, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 57, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T06:13:30.647Z', 'updatedAt': '2025-04-25T14:00:01.219Z', '__v': 0}, {'_id': '6809dba63f1d136990981079', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:39.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:35:18.892Z', 'updatedAt': '2025-04-24T14:00:01.105Z', '__v': 0}, {'_id': '6808f2613f1d136990980bcf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:01.851Z', 'updatedAt': '2025-04-23T14:00:01.851Z', '__v': 0}, {'_id': '68074202c60b619007b021e0', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:14:35.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 405, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 119, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T07:15:14.296Z', 'updatedAt': '2025-04-22T14:00:01.063Z', '__v': 0}, {'_id': '6805e1774ce909a13638a0a5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:10:24.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 469, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 55, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 55, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:11:03.722Z', 'updatedAt': '2025-04-21T14:00:00.702Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876c', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:10:05.355Z', 'updatedAt': '2025-04-19T07:10:05.355Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '2025-04-19T14:08:47.000Z', 'totalHoursWorked': 829, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:10:05.298Z', 'updatedAt': '2025-04-19T14:09:25.648Z', '__v': 0}, {'_id': '6801fb58a7f360a4cab86db7', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': '2025-04-18T07:11:44.000Z', 'clockOutTime': '2025-04-18T14:00:00.000Z', 'totalHoursWorked': 408, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 116, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-18T07:12:24.188Z', 'updatedAt': '2025-04-18T14:00:00.756Z', '__v': 0}, {'_id': '68009d51ae2a00f5a022afb1', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T06:18:18.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 461, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 63, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T06:18:57.668Z', 'updatedAt': '2025-04-17T14:00:00.735Z', '__v': 0}, {'_id': '67ff7385e16c984ef659f3f2', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T09:07:43.000Z', 'clockOutTime': '2025-04-16T14:00:00.000Z', 'totalHoursWorked': 292, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 232, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-16T09:08:21.766Z', 'updatedAt': '2025-04-16T14:00:00.780Z', '__v': 0}, {'_id': '67fdf4103f8220b6bb17fc8b', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': '2025-04-15T05:51:37.000Z', 'clockOutTime': '2025-04-15T14:00:00.000Z', 'totalHoursWorked': 488, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 36, 'penalties': [{'uniqueId': 4532, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 36, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-15T05:52:16.220Z', 'updatedAt': '2025-04-15T14:00:00.725Z', '__v': 0}, {'_id': '67fca0a1a430ce18705ee7bf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': '2025-04-14T05:43:22.000Z', 'clockOutTime': '2025-04-14T14:00:00.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 28, 'penalties': [{'uniqueId': 9867, 'action': 'salary_deduction', 'percentage': 5, 'lateMinute': 28, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-14T05:44:01.939Z', 'updatedAt': '2025-04-14T14:00:00.743Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.239Z', 'updatedAt': '2025-04-12T14:00:01.239Z', '__v': 0}, {'_id': '67f75afd2f294c6b4ef62b06', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': '2025-04-10T05:44:55.000Z', 'clockOutTime': '2025-04-10T14:00:00.000Z', 'totalHoursWorked': 495, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 29, 'penalties': [{'uniqueId': 9867, 'action': 'written_warning', 'percentage': 0, 'lateMinute': 29, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-10T05:45:33.317Z', 'updatedAt': '2025-04-10T14:00:01.757Z', '__v': 0}, {'_id': '67f60ac6cca6b0c13574f1e5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': '2025-04-09T05:50:23.000Z', 'clockOutTime': '2025-04-09T14:00:00.000Z', 'totalHoursWorked': 489, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 35, 'penalties': [{'uniqueId': 4532, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 35, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-09T05:51:02.134Z', 'updatedAt': '2025-04-09T14:00:01.730Z', '__v': 0}, {'_id': '67f4b3c445a0b733d74cb805', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': '2025-04-08T05:26:52.000Z', 'clockOutTime': '2025-04-08T13:44:10.000Z', 'totalHoursWorked': 496, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-08T05:26:54.000Z', 'endTime': '2025-04-08T05:27:17.000Z', 'durationMinutes': 0}], 'breakTime': 0, 'lateMinutes': 11, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-08T05:27:32.018Z', 'updatedAt': '2025-04-08T13:44:48.264Z', '__v': 0}, {'_id': '67f36199999f16b8a24d4f41', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': '2025-04-07T05:24:02.000Z', 'clockOutTime': '2025-04-07T13:57:41.000Z', 'totalHoursWorked': 513, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 9, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-07T05:24:41.345Z', 'updatedAt': '2025-04-07T13:58:20.144Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4598', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.787Z', 'updatedAt': '2025-04-05T14:00:03.787Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9511', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.240Z', 'updatedAt': '2025-04-04T14:00:01.240Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f93', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.525Z', 'updatedAt': '2025-04-03T14:00:02.525Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f28', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.218Z', 'updatedAt': '2025-04-02T14:00:01.218Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c57', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.299Z', 'updatedAt': '2025-04-01T14:00:01.299Z', '__v': 0}], 'totalRecords': 22, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 04:01:37,554 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_kGIwgJ9t557zrwgulOEP7lwM/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 04:01:39,057 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_kGIwgJ9t557zrwgulOEP7lwM "HTTP/1.1 200 OK"
2025-04-26 04:01:40,569 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_kGIwgJ9t557zrwgulOEP7lwM "HTTP/1.1 200 OK"
2025-04-26 04:01:42,162 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_kGIwgJ9t557zrwgulOEP7lwM "HTTP/1.1 200 OK"
2025-04-26 04:01:43,696 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_kGIwgJ9t557zrwgulOEP7lwM "HTTP/1.1 200 OK"
2025-04-26 04:01:45,233 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_kGIwgJ9t557zrwgulOEP7lwM "HTTP/1.1 200 OK"
2025-04-26 04:01:46,703 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/runs/run_kGIwgJ9t557zrwgulOEP7lwM "HTTP/1.1 200 OK"
2025-04-26 04:01:47,178 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_AxNkWmdTVUijkV3LRXm2nSl8/messages "HTTP/1.1 200 OK"
2025-04-26 04:02:28,260 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 04:02:32,636 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 04:02:32,637 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 04:02:32,637 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 04:02:32,637 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 04:02:34,358 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 04:02:36,135 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 04:02:36,136 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 04:02:36,138 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-26 04:02:58,209 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 04:02:58,209 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 04:02:58,209 - hr_assistant - INFO - Processing query for employee EMP103: what's my team attendance for this week ?
2025-04-26 04:02:58,209 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 04:02:59,890 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:03:00,159 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:03:00,159 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 04:03:00,597 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 04:03:01,109 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/messages "HTTP/1.1 200 OK"
2025-04-26 04:03:02,174 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs "HTTP/1.1 200 OK"
2025-04-26 04:03:03,167 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:04,645 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:04,647 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-26 04:03:04,647 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-26 04:03:04,648 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 04:03:04,648 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 04:03:04,649 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 04:03:05,562 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 04:03:05,564 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 04:03:06,743 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 04:03:07,765 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 04:03:09,845 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:11,862 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:13,501 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:15,038 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:16,526 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:18,110 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:19,644 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:21,691 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:23,152 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:24,665 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/runs/run_9vIxRtr2B3yGcN8fd649OxA0 "HTTP/1.1 200 OK"
2025-04-26 04:03:25,071 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gPO8pFf3XPe286CahSAmD1Ln/messages "HTTP/1.1 200 OK"
2025-04-26 04:07:37,430 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 04:08:09,162 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 04:08:09,162 - hr_assistant - INFO - Fetching fresh employee data for employee EMP109
2025-04-26 04:08:09,162 - hr_assistant - INFO - Requesting employee data for: EMP109
2025-04-26 04:08:09,162 - hr_assistant - INFO - Attempting login for user: EMP109
2025-04-26 04:08:10,764 - hr_assistant - INFO - Login successful for user: EMP109
2025-04-26 04:08:11,799 - hr_assistant - INFO - Retrieved employee data: {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 04:08:11,800 - hr_assistant - INFO - Successfully retrieved data for employee: EMP109
2025-04-26 04:08:11,803 - hr_assistant - INFO - Sending initial greeting to employee: EMP109
2025-04-26 04:08:49,611 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 04:08:49,612 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 04:08:49,612 - hr_assistant - INFO - Processing query for employee EMP109: what's my chech in time today
2025-04-26 04:08:49,612 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 04:08:51,622 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:08:51,932 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:08:51,933 - hr_assistant - INFO - Creating new thread for employee EMP109
2025-04-26 04:08:52,435 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 04:08:53,463 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:08:55,204 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs "HTTP/1.1 200 OK"
2025-04-26 04:08:55,703 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_thrw2ryJt368XIJVhQO5jtpk "HTTP/1.1 200 OK"
2025-04-26 04:08:57,341 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_thrw2ryJt368XIJVhQO5jtpk "HTTP/1.1 200 OK"
2025-04-26 04:08:57,343 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP109', 'date_type': 'today'}
2025-04-26 04:08:57,343 - hr_assistant - INFO - Fetching personal attendance for employee: EMP109 (date_type: today)
2025-04-26 04:08:57,344 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66fa8471a8adc4a2c26c058e/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 04:08:58,481 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680c89c944f7033e58fa825e', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:22:09.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:22:49.174Z', 'updatedAt': '2025-04-26T07:22:49.174Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 04:08:58,482 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680c89c944f7033e58fa825e', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:22:09.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:22:49.174Z', 'updatedAt': '2025-04-26T07:22:49.174Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 04:08:59,403 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_thrw2ryJt368XIJVhQO5jtpk/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 04:09:01,451 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_thrw2ryJt368XIJVhQO5jtpk "HTTP/1.1 200 OK"
2025-04-26 04:09:02,983 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_thrw2ryJt368XIJVhQO5jtpk "HTTP/1.1 200 OK"
2025-04-26 04:09:04,522 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_thrw2ryJt368XIJVhQO5jtpk "HTTP/1.1 200 OK"
2025-04-26 04:09:04,909 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:09:52,617 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 04:09:52,618 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 04:09:52,618 - hr_assistant - INFO - Processing query for employee EMP109: tell me in local time
2025-04-26 04:09:53,190 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:09:53,451 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:09:53,928 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV "HTTP/1.1 200 OK"
2025-04-26 04:09:53,929 - hr_assistant - INFO - Using existing thread for employee EMP109: thread_1nWIsC9R0HZou2XEMmIfXyTV
2025-04-26 04:09:55,006 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:09:56,586 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs "HTTP/1.1 200 OK"
2025-04-26 04:09:57,035 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_SVPImDZM9rlUl2Y6r14hOv7w "HTTP/1.1 200 OK"
2025-04-26 04:09:58,536 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_SVPImDZM9rlUl2Y6r14hOv7w "HTTP/1.1 200 OK"
2025-04-26 04:10:00,126 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_SVPImDZM9rlUl2Y6r14hOv7w "HTTP/1.1 200 OK"
2025-04-26 04:10:00,491 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:10:57,579 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 04:10:57,579 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 04:10:57,579 - hr_assistant - INFO - Processing query for employee EMP109: what's. the attendance data of hamza
2025-04-26 04:10:58,680 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:10:59,005 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:10:59,517 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV "HTTP/1.1 200 OK"
2025-04-26 04:10:59,518 - hr_assistant - INFO - Using existing thread for employee EMP109: thread_1nWIsC9R0HZou2XEMmIfXyTV
2025-04-26 04:11:00,511 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:11:01,667 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs "HTTP/1.1 200 OK"
2025-04-26 04:11:02,180 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ "HTTP/1.1 200 OK"
2025-04-26 04:11:03,715 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ "HTTP/1.1 200 OK"
2025-04-26 04:11:03,717 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP109'}
2025-04-26 04:11:03,717 - hr_assistant - INFO - Fetching team data for manager: EMP109
2025-04-26 04:11:03,718 - hr_assistant - INFO - cache data for manager {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 04:11:03,718 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66fa8471a8adc4a2c26c058e
2025-04-26 04:11:04,693 - hr_assistant - INFO - Successfully retrieved team data for manager EMP109 with 6 team members
2025-04-26 04:11:05,565 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 04:11:07,050 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ "HTTP/1.1 200 OK"
2025-04-26 04:11:08,527 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ "HTTP/1.1 200 OK"
2025-04-26 04:11:08,529 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': '671a4d3ac67936eae804909a', 'date_type': 'recent'}
2025-04-26 04:11:08,529 - hr_assistant - INFO - Fetching personal attendance for employee: 671a4d3ac67936eae804909a (date_type: recent)
2025-04-26 04:11:08,529 - hr_assistant - INFO - Attempting login for user: 671a4d3ac67936eae804909a
2025-04-26 04:11:09,557 - hr_assistant - ERROR - Login error: argument of type 'NoneType' is not iterable
2025-04-26 04:11:09,559 - hr_assistant - ERROR - Failed to get token for employee 671a4d3ac67936eae804909a
2025-04-26 04:11:09,559 - hr_assistant - ERROR - Failed to get token for employee: 671a4d3ac67936eae804909a
2025-04-26 04:11:10,562 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 04:11:12,569 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ "HTTP/1.1 200 OK"
2025-04-26 04:11:15,288 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ "HTTP/1.1 200 OK"
2025-04-26 04:11:16,822 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ "HTTP/1.1 200 OK"
2025-04-26 04:11:18,400 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ "HTTP/1.1 200 OK"
2025-04-26 04:11:19,895 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_ejPs81yRsBQZQt7pM0N6y4RQ "HTTP/1.1 200 OK"
2025-04-26 04:11:20,304 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:11:43,401 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 04:11:43,401 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 04:11:43,402 - hr_assistant - INFO - Processing query for employee EMP109: he is my team member
2025-04-26 04:11:44,131 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:11:44,397 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:11:45,361 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV "HTTP/1.1 200 OK"
2025-04-26 04:11:45,361 - hr_assistant - INFO - Using existing thread for employee EMP109: thread_1nWIsC9R0HZou2XEMmIfXyTV
2025-04-26 04:11:45,846 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:11:46,796 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs "HTTP/1.1 200 OK"
2025-04-26 04:11:47,272 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA "HTTP/1.1 200 OK"
2025-04-26 04:11:49,487 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA "HTTP/1.1 200 OK"
2025-04-26 04:11:49,487 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP109', 'date_type': 'recent'}
2025-04-26 04:11:49,488 - hr_assistant - INFO - Fetching team attendance for manager: EMP109 (date_type: recent)
2025-04-26 04:11:49,488 - hr_assistant - INFO - Fetching team data for manager: EMP109
2025-04-26 04:11:49,488 - hr_assistant - INFO - cache data for manager {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 04:11:49,488 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66fa8471a8adc4a2c26c058e
2025-04-26 04:11:51,445 - hr_assistant - INFO - Successfully retrieved team data for manager EMP109 with 6 team members
2025-04-26 04:11:51,447 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4d3ac67936eae804909a,671a4e6fc67936eae8049103,671a4efdc67936eae8049126,66d8250f99b629cbdb2e0f3a,66d825a399b629cbdb2e0f54,671a4dc5c67936eae80490cb/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 04:11:53,105 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP109
2025-04-26 04:11:54,091 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 04:11:56,154 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA "HTTP/1.1 200 OK"
2025-04-26 04:11:57,754 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA "HTTP/1.1 200 OK"
2025-04-26 04:11:59,416 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA "HTTP/1.1 200 OK"
2025-04-26 04:12:00,956 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA "HTTP/1.1 200 OK"
2025-04-26 04:12:02,513 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA "HTTP/1.1 200 OK"
2025-04-26 04:12:04,130 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA "HTTP/1.1 200 OK"
2025-04-26 04:12:05,650 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_bxKJCGg22hzGfISBUQS5N7SA "HTTP/1.1 200 OK"
2025-04-26 04:12:06,073 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:13:12,680 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 04:13:12,681 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 04:13:12,681 - hr_assistant - INFO - Processing query for employee EMP109: show in local time
2025-04-26 04:13:15,543 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:13:15,811 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:13:16,762 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV "HTTP/1.1 200 OK"
2025-04-26 04:13:16,763 - hr_assistant - INFO - Using existing thread for employee EMP109: thread_1nWIsC9R0HZou2XEMmIfXyTV
2025-04-26 04:13:17,863 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:13:19,789 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs "HTTP/1.1 200 OK"
2025-04-26 04:13:20,290 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_KUfkZLveHeXIw3WtpwQ6aPED "HTTP/1.1 200 OK"
2025-04-26 04:13:21,777 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_KUfkZLveHeXIw3WtpwQ6aPED "HTTP/1.1 200 OK"
2025-04-26 04:13:23,593 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_KUfkZLveHeXIw3WtpwQ6aPED "HTTP/1.1 200 OK"
2025-04-26 04:13:25,612 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_KUfkZLveHeXIw3WtpwQ6aPED "HTTP/1.1 200 OK"
2025-04-26 04:13:26,060 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:14:49,005 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 04:14:49,005 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 04:14:49,005 - hr_assistant - INFO - Processing query for employee EMP109: show my whole data
2025-04-26 04:14:51,032 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:14:51,347 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:14:52,367 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV "HTTP/1.1 200 OK"
2025-04-26 04:14:52,368 - hr_assistant - INFO - Using existing thread for employee EMP109: thread_1nWIsC9R0HZou2XEMmIfXyTV
2025-04-26 04:14:53,441 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:14:55,550 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs "HTTP/1.1 200 OK"
2025-04-26 04:14:56,568 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:14:58,031 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:14:59,533 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:01,074 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:02,610 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:04,061 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:05,785 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:07,250 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:08,754 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:10,219 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:11,743 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:13,462 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:14,928 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:16,412 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:18,483 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:19,953 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:21,455 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/runs/run_poi9GODbSHPVXEhKbu3LzcZC "HTTP/1.1 200 OK"
2025-04-26 04:15:21,863 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_1nWIsC9R0HZou2XEMmIfXyTV/messages "HTTP/1.1 200 OK"
2025-04-26 04:20:42,695 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 04:20:49,050 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 04:20:49,050 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 04:20:49,050 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 04:20:49,050 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 04:20:50,663 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 04:20:51,624 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 04:20:51,625 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 04:20:51,627 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-26 04:21:12,845 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 04:21:12,846 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 04:21:12,846 - hr_assistant - INFO - Processing query for employee EMP103: احصل على بيانات الحضور الأخيرة لفريقي
2025-04-26 04:21:12,846 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 04:21:14,729 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 04:21:14,740 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 04:21:14,740 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 04:21:15,722 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 04:21:16,878 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 04:21:18,618 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 200 OK"
2025-04-26 04:21:19,131 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_j4eAtnpAfyTAdLJSRc4ddsvs "HTTP/1.1 200 OK"
2025-04-26 04:21:20,666 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_j4eAtnpAfyTAdLJSRc4ddsvs "HTTP/1.1 200 OK"
2025-04-26 04:21:20,668 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-04-26 04:21:20,668 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-04-26 04:21:20,668 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 04:21:20,669 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 04:21:20,670 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 04:21:21,693 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 04:21:21,695 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 04:21:22,918 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 04:21:24,045 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_j4eAtnpAfyTAdLJSRc4ddsvs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 04:21:25,545 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_j4eAtnpAfyTAdLJSRc4ddsvs "HTTP/1.1 200 OK"
2025-04-26 04:21:27,186 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_j4eAtnpAfyTAdLJSRc4ddsvs "HTTP/1.1 200 OK"
2025-04-26 04:21:29,238 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_j4eAtnpAfyTAdLJSRc4ddsvs "HTTP/1.1 200 OK"
2025-04-26 04:21:30,804 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_j4eAtnpAfyTAdLJSRc4ddsvs "HTTP/1.1 200 OK"
2025-04-26 04:21:32,378 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_j4eAtnpAfyTAdLJSRc4ddsvs "HTTP/1.1 200 OK"
2025-04-26 04:21:33,876 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_j4eAtnpAfyTAdLJSRc4ddsvs "HTTP/1.1 200 OK"
2025-04-26 04:21:34,223 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:39:47,443 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 12:39:47,443 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 12:39:47,443 - hr_assistant - INFO - Employee EMP103 already greeted today, sending minimal greeting
2025-04-26 12:39:54,832 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 12:39:54,832 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 12:39:54,832 - hr_assistant - INFO - Processing query for employee EMP103: Show my profile details
2025-04-26 12:39:56,692 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 12:39:56,965 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 12:39:57,985 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh "HTTP/1.1 200 OK"
2025-04-26 12:39:57,986 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_BQLoj2c1yM499WRFjPXcrUBh
2025-04-26 12:39:59,026 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:40:05,456 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 200 OK"
2025-04-26 12:40:05,975 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_aCDMZXIwTUdcELdX8fzDKIo0 "HTTP/1.1 200 OK"
2025-04-26 12:40:07,941 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_aCDMZXIwTUdcELdX8fzDKIo0 "HTTP/1.1 200 OK"
2025-04-26 12:40:09,429 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_aCDMZXIwTUdcELdX8fzDKIo0 "HTTP/1.1 200 OK"
2025-04-26 12:40:10,922 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_aCDMZXIwTUdcELdX8fzDKIo0 "HTTP/1.1 200 OK"
2025-04-26 12:40:12,396 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_aCDMZXIwTUdcELdX8fzDKIo0 "HTTP/1.1 200 OK"
2025-04-26 12:40:14,327 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_aCDMZXIwTUdcELdX8fzDKIo0 "HTTP/1.1 200 OK"
2025-04-26 12:40:15,805 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_aCDMZXIwTUdcELdX8fzDKIo0 "HTTP/1.1 200 OK"
2025-04-26 12:40:17,690 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_aCDMZXIwTUdcELdX8fzDKIo0 "HTTP/1.1 200 OK"
2025-04-26 12:40:19,689 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_aCDMZXIwTUdcELdX8fzDKIo0 "HTTP/1.1 200 OK"
2025-04-26 12:40:20,089 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:42:37,197 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 12:42:37,197 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 12:42:37,197 - hr_assistant - INFO - Processing query for employee EMP103: Show my team's attendance for this month
2025-04-26 12:42:38,857 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 12:42:39,165 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 12:42:40,188 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh "HTTP/1.1 200 OK"
2025-04-26 12:42:40,189 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_BQLoj2c1yM499WRFjPXcrUBh
2025-04-26 12:42:41,236 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:42:42,522 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 200 OK"
2025-04-26 12:42:43,567 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:42:45,104 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:42:46,623 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:42:46,624 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 12:42:46,624 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-26 12:42:46,624 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 12:42:48,979 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 12:42:48,982 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 12:42:48,982 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 12:42:48,983 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 12:42:49,958 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 12:42:49,960 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 12:42:51,555 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 12:42:52,782 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 12:42:54,320 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:42:55,855 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:42:57,364 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:42:58,927 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:43:00,463 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:43:01,903 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:43:03,535 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:43:05,070 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:43:07,217 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_zfDZAu3KyVqB1JVtguMFcza3 "HTTP/1.1 200 OK"
2025-04-26 12:43:07,633 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:50:48,644 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 12:50:48,644 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 12:50:48,644 - hr_assistant - INFO - Processing query for employee EMP103: What's my leave balance?
2025-04-26 12:50:50,472 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 12:50:50,646 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 12:50:51,620 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh "HTTP/1.1 200 OK"
2025-04-26 12:50:51,621 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_BQLoj2c1yM499WRFjPXcrUBh
2025-04-26 12:50:52,104 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:53:03,022 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 500 Internal Server Error"
2025-04-26 12:53:03,023 - openai._base_client - INFO - Retrying request to /threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs in 0.453435 seconds
2025-04-26 12:53:04,964 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 200 OK"
2025-04-26 12:53:05,637 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Huo7mnTTcehvuvzuTXgOBnxJ "HTTP/1.1 200 OK"
2025-04-26 12:53:07,121 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Huo7mnTTcehvuvzuTXgOBnxJ "HTTP/1.1 200 OK"
2025-04-26 12:53:09,324 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Huo7mnTTcehvuvzuTXgOBnxJ "HTTP/1.1 200 OK"
2025-04-26 12:53:10,859 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Huo7mnTTcehvuvzuTXgOBnxJ "HTTP/1.1 200 OK"
2025-04-26 12:53:12,555 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Huo7mnTTcehvuvzuTXgOBnxJ "HTTP/1.1 200 OK"
2025-04-26 12:53:13,011 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:57:01,531 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 12:57:01,531 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 12:57:01,531 - hr_assistant - INFO - Processing query for employee EMP103: Show my profile details
2025-04-26 12:57:03,039 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 12:57:03,314 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 12:57:04,338 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh "HTTP/1.1 200 OK"
2025-04-26 12:57:04,339 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_BQLoj2c1yM499WRFjPXcrUBh
2025-04-26 12:57:05,040 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:57:06,794 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 200 OK"
2025-04-26 12:57:07,810 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:09,828 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:11,880 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:13,552 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:15,089 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:16,620 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:18,128 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:19,697 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:21,228 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:22,768 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_QlazZhTzoMB9RLDbznOjbAwh "HTTP/1.1 200 OK"
2025-04-26 12:57:23,280 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:59:22,040 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 12:59:22,041 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 12:59:22,041 - hr_assistant - INFO - Processing query for employee EMP103: whats my monthly leave baalance
2025-04-26 12:59:24,211 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 12:59:24,386 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 12:59:25,338 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh "HTTP/1.1 200 OK"
2025-04-26 12:59:25,339 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_BQLoj2c1yM499WRFjPXcrUBh
2025-04-26 12:59:25,951 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:59:27,047 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 200 OK"
2025-04-26 12:59:28,089 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_CDuw8wVPTAaXZg82KItVEBDG "HTTP/1.1 200 OK"
2025-04-26 12:59:30,082 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_CDuw8wVPTAaXZg82KItVEBDG "HTTP/1.1 200 OK"
2025-04-26 12:59:31,542 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_CDuw8wVPTAaXZg82KItVEBDG "HTTP/1.1 200 OK"
2025-04-26 12:59:33,119 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_CDuw8wVPTAaXZg82KItVEBDG "HTTP/1.1 200 OK"
2025-04-26 12:59:33,529 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 12:59:56,355 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 12:59:56,355 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 12:59:56,355 - hr_assistant - INFO - Processing query for employee EMP103: short leave balance
2025-04-26 12:59:57,584 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 12:59:57,900 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 12:59:58,923 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh "HTTP/1.1 200 OK"
2025-04-26 12:59:58,924 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_BQLoj2c1yM499WRFjPXcrUBh
2025-04-26 12:59:59,947 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 13:00:01,176 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 200 OK"
2025-04-26 13:00:02,197 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_qVc3yokyAsYt3I9T8HqZRb87 "HTTP/1.1 200 OK"
2025-04-26 13:00:04,143 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_qVc3yokyAsYt3I9T8HqZRb87 "HTTP/1.1 200 OK"
2025-04-26 13:00:05,688 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_qVc3yokyAsYt3I9T8HqZRb87 "HTTP/1.1 200 OK"
2025-04-26 13:00:07,221 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_qVc3yokyAsYt3I9T8HqZRb87 "HTTP/1.1 200 OK"
2025-04-26 13:00:07,849 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 13:00:36,340 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 13:00:36,340 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 13:00:36,340 - hr_assistant - INFO - Processing query for employee EMP103: my team members?
2025-04-26 13:00:37,797 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 13:00:37,998 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 13:00:38,962 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh "HTTP/1.1 200 OK"
2025-04-26 13:00:38,963 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_BQLoj2c1yM499WRFjPXcrUBh
2025-04-26 13:00:39,985 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 13:00:41,520 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 200 OK"
2025-04-26 13:00:42,135 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:43,676 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:45,173 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:46,727 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:46,728 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-26 13:00:46,728 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 13:00:46,729 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 13:00:46,730 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 13:00:48,693 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 13:00:49,638 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 13:00:51,249 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:52,785 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:54,238 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:55,754 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:57,291 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:58,750 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_Ox58LaAOgRnuS8CiWuxTHGNX "HTTP/1.1 200 OK"
2025-04-26 13:00:59,139 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 13:03:15,499 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 13:03:15,500 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 13:03:15,500 - hr_assistant - INFO - Processing query for employee EMP103: my team members?
2025-04-26 13:03:17,165 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 13:03:17,388 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 13:03:18,393 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh "HTTP/1.1 200 OK"
2025-04-26 13:03:18,393 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_BQLoj2c1yM499WRFjPXcrUBh
2025-04-26 13:03:19,519 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 13:03:21,612 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs "HTTP/1.1 200 OK"
2025-04-26 13:03:22,183 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_MdGkyr9xCQWtEBCf53gBWMPw "HTTP/1.1 200 OK"
2025-04-26 13:03:23,821 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_MdGkyr9xCQWtEBCf53gBWMPw "HTTP/1.1 200 OK"
2025-04-26 13:03:25,412 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_MdGkyr9xCQWtEBCf53gBWMPw "HTTP/1.1 200 OK"
2025-04-26 13:03:25,413 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-26 13:03:25,413 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 13:03:25,414 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 13:03:25,415 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 13:03:26,395 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 13:03:28,531 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_MdGkyr9xCQWtEBCf53gBWMPw/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 13:03:30,680 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_MdGkyr9xCQWtEBCf53gBWMPw "HTTP/1.1 200 OK"
2025-04-26 13:03:32,169 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_MdGkyr9xCQWtEBCf53gBWMPw "HTTP/1.1 200 OK"
2025-04-26 13:03:33,607 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_MdGkyr9xCQWtEBCf53gBWMPw "HTTP/1.1 200 OK"
2025-04-26 13:03:35,188 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/runs/run_MdGkyr9xCQWtEBCf53gBWMPw "HTTP/1.1 200 OK"
2025-04-26 13:03:36,085 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_BQLoj2c1yM499WRFjPXcrUBh/messages "HTTP/1.1 200 OK"
2025-04-26 14:05:21,137 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 14:05:25,215 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 14:05:25,215 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-26 14:05:25,215 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 14:05:25,215 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 14:05:27,383 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 14:05:28,420 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 14:05:28,421 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 14:05:28,423 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-26 14:05:43,986 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-26 14:05:43,986 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-26 14:05:43,986 - hr_assistant - INFO - Processing query for employee EMP103: my team attendance for today ?
2025-04-26 14:05:43,986 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 14:05:45,606 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 14:05:45,824 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 14:05:45,824 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-26 14:05:47,013 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 14:05:48,066 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_R0CqdisoIJoHerBgFZ3uKvyj/messages "HTTP/1.1 200 OK"
2025-04-26 14:05:49,459 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_R0CqdisoIJoHerBgFZ3uKvyj/runs "HTTP/1.1 200 OK"
2025-04-26 14:05:50,320 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_R0CqdisoIJoHerBgFZ3uKvyj/runs/run_ngsCviiQpNDEZjNagISJzr6p "HTTP/1.1 200 OK"
2025-04-26 14:05:52,265 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_R0CqdisoIJoHerBgFZ3uKvyj/runs/run_ngsCviiQpNDEZjNagISJzr6p "HTTP/1.1 200 OK"
2025-04-26 14:05:52,267 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-26 14:05:52,267 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-26 14:05:52,267 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 14:05:52,268 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 14:05:52,268 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 14:05:53,188 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 14:05:53,189 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 14:05:54,415 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 14:05:55,439 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_R0CqdisoIJoHerBgFZ3uKvyj/runs/run_ngsCviiQpNDEZjNagISJzr6p/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 14:05:56,976 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_R0CqdisoIJoHerBgFZ3uKvyj/runs/run_ngsCviiQpNDEZjNagISJzr6p "HTTP/1.1 200 OK"
2025-04-26 14:05:58,511 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_R0CqdisoIJoHerBgFZ3uKvyj/runs/run_ngsCviiQpNDEZjNagISJzr6p "HTTP/1.1 200 OK"
2025-04-26 14:05:59,999 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_R0CqdisoIJoHerBgFZ3uKvyj/runs/run_ngsCviiQpNDEZjNagISJzr6p "HTTP/1.1 200 OK"
2025-04-26 14:06:00,385 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_R0CqdisoIJoHerBgFZ3uKvyj/messages "HTTP/1.1 200 OK"
2025-04-26 14:07:40,053 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 14:07:45,563 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 14:07:45,563 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-26 14:07:45,564 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 14:07:45,564 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-26 14:07:47,174 - hr_assistant - INFO - Login successful for user: EMP101
2025-04-26 14:07:48,194 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 14:07:48,195 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-04-26 14:07:48,197 - hr_assistant - INFO - Sending initial greeting to employee: EMP101
2025-04-26 14:08:04,782 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 14:08:04,782 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 14:08:04,782 - hr_assistant - INFO - Processing query for employee EMP101: what's my team attendance today ?
2025-04-26 14:08:04,782 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 14:08:06,693 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 14:08:06,963 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 14:08:06,963 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-04-26 14:08:07,449 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 14:08:08,558 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/messages "HTTP/1.1 200 OK"
2025-04-26 14:08:09,767 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs "HTTP/1.1 200 OK"
2025-04-26 14:08:10,913 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o "HTTP/1.1 200 OK"
2025-04-26 14:08:12,450 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o "HTTP/1.1 200 OK"
2025-04-26 14:08:12,452 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-26 14:08:12,452 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-26 14:08:12,452 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 14:08:14,087 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 14:08:14,089 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 14:08:14,089 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 14:08:15,017 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 14:08:15,018 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 14:08:15,020 - hr_assistant - ERROR - Error executing function get_team_attendance: 'NoneType' object has no attribute 'get'
2025-04-26 14:08:16,663 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 14:08:18,286 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o "HTTP/1.1 200 OK"
2025-04-26 14:08:19,822 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o "HTTP/1.1 200 OK"
2025-04-26 14:08:19,824 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-26 14:08:19,825 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 14:08:19,825 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 14:08:19,826 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 14:08:20,852 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 14:08:21,760 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 14:08:24,017 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o "HTTP/1.1 200 OK"
2025-04-26 14:08:25,503 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o "HTTP/1.1 200 OK"
2025-04-26 14:08:25,505 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP101', 'date_type': 'today'}
2025-04-26 14:08:25,505 - hr_assistant - INFO - Fetching personal attendance for employee: EMP101 (date_type: today)
2025-04-26 14:08:25,505 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 14:08:26,685 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}}
2025-04-26 14:08:26,686 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}
2025-04-26 14:08:26,686 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP109', 'date_type': 'today'}
2025-04-26 14:08:26,686 - hr_assistant - INFO - Fetching personal attendance for employee: EMP109 (date_type: today)
2025-04-26 14:08:26,686 - hr_assistant - INFO - Attempting login for user: EMP109
2025-04-26 14:08:28,120 - hr_assistant - INFO - Login successful for user: EMP109
2025-04-26 14:08:28,122 - hr_assistant - INFO - Requesting employee data for: EMP109
2025-04-26 14:08:29,153 - hr_assistant - INFO - Retrieved employee data: {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L1', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 14:08:29,154 - hr_assistant - INFO - Successfully retrieved data for employee: EMP109
2025-04-26 14:08:29,156 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66fa8471a8adc4a2c26c058e/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 14:08:30,370 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680c89c944f7033e58fa825e', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:22:09.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:22:49.174Z', 'updatedAt': '2025-04-26T07:22:49.174Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 14:08:30,372 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680c89c944f7033e58fa825e', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:22:09.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:22:49.174Z', 'updatedAt': '2025-04-26T07:22:49.174Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 14:08:30,372 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP121', 'date_type': 'today'}
2025-04-26 14:08:30,372 - hr_assistant - INFO - Fetching personal attendance for employee: EMP121 (date_type: today)
2025-04-26 14:08:30,372 - hr_assistant - INFO - Attempting login for user: EMP121
2025-04-26 14:08:31,921 - hr_assistant - INFO - Login successful for user: EMP121
2025-04-26 14:08:31,924 - hr_assistant - INFO - Requesting employee data for: EMP121
2025-04-26 14:08:32,940 - hr_assistant - INFO - Retrieved employee data: {'_id': '680627695993fc1ee4c4f793', 'userName': 'shaan Naseer', 'password': '123456', 'email': [{'personalEmail': 'amad@nastecsol.com', 'workEmail': 'shan@gmail.com'}], 'firstName': 'shaan', 'middleName': '', 'lastName': 'shaan second name ', 'martialStatus': 'Married', 'religion': 'Islam', 'address': {'streetAddress': 'Commercial Market Setellite Town Raqalpindi Pakistan', 'city': 'DHA', 'country': 'Pakistan'}, 'NIC': '234234234', 'iqamaNumber': {'id': '234234244', 'issueDate': '', 'expiryDate': ''}, 'passport': {'id': '324542', 'issueDate': '2025-04-21', 'expiryDate': '2025-05-10'}, 'imigrationSatus': 'national', 'DOB': '1998-02-21', 'age': 27, 'phoneNumber': [{'mobileNumber': '+928787999', 'landlineNumber': 'null'}], 'gender': 'Male', 'role': 'developer', 'profession': 'IT', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1481.jpeg', 'familyInfo': {'fatherName': 'father', 'motherName': 'mother', 'familyAddress': {'streetAddress': 'null', 'city': 'DHA Rawalpindi', 'country': 'p'}, 'familyContactNumber': '2342424234234', 'emergencyContactInfo': [{'relationName': 'gsdfgsfg', 'relationType': 'dsfsdfgdg', 'relationContactNumber': '23424242442', 'relationAddress': 'Commercial Market Setellite Town Raqalpindi Pakistan'}]}, 'educationInfo': [{'degreeName': 'bscs', 'degreeType': 'esdfs', 'fieldofStudy': 'sesdg', 'institute': 'gsdfgsdfg', 'from': '2025-04-21', 'to': '2025-04-21', 'results': 'dsfgsdfg'}], 'experienceBackground': [{'jobTitle': '', 'company': '', 'referenceName': '', 'referenceContact': '', 'duration': '', 'from': '', 'to': '', 'description': ''}], 'bankingInfo': [{'title': '', 'accountNumber': '', 'branchCode': '', 'accountType': '', 'country': '', 'empSwiftCode': '', 'bankName': ''}], 'employeeInfo': [{'depId': '', 'depName': 'IT', 'jobTitle': '', 'jobDescription': '', 'reportingManager': 'NASAR', 'jobRank': '', 'designation': 'employee', 'grade': 'L3', 'workDomain': '', 'location': 'Islamabad', 'employeeStatus': 'offboarded', 'employeeType': 'Permanent', 'employeeShift': 'FullTime', 'joiningDate': '2025-04-21', 'leavingDate': '', 'hiringDate': '2025-04-21', 'noticePeriod': '', 'empId': 'EMP121'}], 'salaryInfo': {'baseSalary': 2000, 'currency': 'SAR', 'timeCycle_Period': '', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '', 'netSalary': ''}, 'socialLinks': [], 'loanInfo': [{'totalLoanAmount': 100, 'loanIssueDate': '2025-04-21T12:43:54.958Z', 'loanDuration': 1, 'installmentAmount': '100.00', 'paidAmount': 100, 'totalInstallments': 1, 'paidInstallments': 0}], 'assetsInfo': [], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.57223190281576|73.14783367927708', 'lastLocation': '33.57219844746315,73.14750090442337|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-23T09:27:07.430Z'}, 'contractInfo': [{'contractId': '', 'contractStatus': '', 'contractType': 'Permanent', 'contractStartDate': '2025-04-21', 'contractExpiry': '', 'probabtionStartDate': '2025-04-21', 'probationPeriod': '3months ', 'probationstatus': ''}], 'documentsInfo': [], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', 'createdAt': '2025-04-21T11:09:29.450Z', 'updatedAt': '2025-04-23T20:00:00.769Z', '__v': 1, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 1.6666666666666667, 'remaining': 1.6666666666666667, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1171}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}}}
2025-04-26 14:08:32,940 - hr_assistant - INFO - Successfully retrieved data for employee: EMP121
2025-04-26 14:08:32,943 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/680627695993fc1ee4c4f793/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 14:08:34,080 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}}
2025-04-26 14:08:34,083 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}
2025-04-26 14:08:35,905 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 14:08:37,910 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o "HTTP/1.1 200 OK"
2025-04-26 14:08:39,915 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o "HTTP/1.1 200 OK"
2025-04-26 14:08:41,946 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_WPYzQ4jeWTl43svW9MqJsS8o "HTTP/1.1 200 OK"
2025-04-26 14:08:42,349 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/messages "HTTP/1.1 200 OK"
2025-04-26 14:57:20,501 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 14:57:20,501 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 14:57:20,501 - hr_assistant - INFO - Processing query for employee EMP101: show my team
2025-04-26 14:57:22,076 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 14:57:22,082 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 14:57:23,066 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq "HTTP/1.1 200 OK"
2025-04-26 14:57:23,066 - hr_assistant - INFO - Using existing thread for employee EMP101: thread_kIMYAAt8puWublCPaltKx4Lq
2025-04-26 14:57:24,120 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/messages "HTTP/1.1 200 OK"
2025-04-26 14:57:25,176 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs "HTTP/1.1 200 OK"
2025-04-26 14:57:25,691 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_xMy7Cn7mAJmuDWaA4VflwK1E "HTTP/1.1 200 OK"
2025-04-26 14:57:27,394 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_xMy7Cn7mAJmuDWaA4VflwK1E "HTTP/1.1 200 OK"
2025-04-26 14:57:29,415 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_xMy7Cn7mAJmuDWaA4VflwK1E "HTTP/1.1 200 OK"
2025-04-26 14:57:30,888 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_xMy7Cn7mAJmuDWaA4VflwK1E "HTTP/1.1 200 OK"
2025-04-26 14:57:31,252 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/messages "HTTP/1.1 200 OK"
2025-04-26 14:57:49,956 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 14:57:49,957 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 14:57:49,957 - hr_assistant - INFO - Employee EMP101 already greeted today, sending minimal greeting
2025-04-26 14:58:08,304 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 14:58:08,304 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 14:58:08,304 - hr_assistant - INFO - Processing query for employee EMP101: show my team's attendance for today
2025-04-26 14:58:09,554 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 14:58:09,726 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 14:58:10,169 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq "HTTP/1.1 200 OK"
2025-04-26 14:58:10,170 - hr_assistant - INFO - Using existing thread for employee EMP101: thread_kIMYAAt8puWublCPaltKx4Lq
2025-04-26 14:58:10,722 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/messages "HTTP/1.1 200 OK"
2025-04-26 14:58:11,920 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs "HTTP/1.1 200 OK"
2025-04-26 14:58:12,393 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_DAKhN7rJciZRhDgCeqXwQ3Vb "HTTP/1.1 200 OK"
2025-04-26 14:58:13,957 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_DAKhN7rJciZRhDgCeqXwQ3Vb "HTTP/1.1 200 OK"
2025-04-26 14:58:13,959 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-26 14:58:13,959 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-26 14:58:13,959 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 14:58:13,959 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 14:58:13,960 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 14:58:14,988 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 14:58:14,989 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 14:58:16,079 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 14:58:16,956 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_DAKhN7rJciZRhDgCeqXwQ3Vb/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 14:58:18,567 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_DAKhN7rJciZRhDgCeqXwQ3Vb "HTTP/1.1 200 OK"
2025-04-26 14:58:20,027 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_DAKhN7rJciZRhDgCeqXwQ3Vb "HTTP/1.1 200 OK"
2025-04-26 14:58:21,537 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_DAKhN7rJciZRhDgCeqXwQ3Vb "HTTP/1.1 200 OK"
2025-04-26 14:58:21,915 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/messages "HTTP/1.1 200 OK"
2025-04-26 14:58:33,964 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 14:58:33,964 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 14:58:33,964 - hr_assistant - INFO - Processing query for employee EMP101: show my team members
2025-04-26 14:58:35,151 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 14:58:35,153 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 14:58:36,175 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq "HTTP/1.1 200 OK"
2025-04-26 14:58:36,175 - hr_assistant - INFO - Using existing thread for employee EMP101: thread_kIMYAAt8puWublCPaltKx4Lq
2025-04-26 14:58:36,792 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/messages "HTTP/1.1 200 OK"
2025-04-26 14:58:38,310 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs "HTTP/1.1 200 OK"
2025-04-26 14:58:39,364 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_tl3ItFsIx2LbSnsjVFXeSqgm "HTTP/1.1 200 OK"
2025-04-26 14:58:40,890 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_tl3ItFsIx2LbSnsjVFXeSqgm "HTTP/1.1 200 OK"
2025-04-26 14:58:40,892 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-26 14:58:40,892 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 14:58:40,892 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 14:58:40,893 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 14:58:41,818 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 14:58:43,458 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_tl3ItFsIx2LbSnsjVFXeSqgm/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 14:58:44,984 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_tl3ItFsIx2LbSnsjVFXeSqgm "HTTP/1.1 200 OK"
2025-04-26 14:58:46,522 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_tl3ItFsIx2LbSnsjVFXeSqgm "HTTP/1.1 200 OK"
2025-04-26 14:58:48,054 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_tl3ItFsIx2LbSnsjVFXeSqgm "HTTP/1.1 200 OK"
2025-04-26 14:58:49,593 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/runs/run_tl3ItFsIx2LbSnsjVFXeSqgm "HTTP/1.1 200 OK"
2025-04-26 14:58:50,006 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_kIMYAAt8puWublCPaltKx4Lq/messages "HTTP/1.1 200 OK"
2025-04-26 14:59:17,354 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 14:59:22,780 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 14:59:22,780 - hr_assistant - INFO - Fetching fresh employee data for employee EMP109
2025-04-26 14:59:22,780 - hr_assistant - INFO - Requesting employee data for: EMP109
2025-04-26 14:59:22,780 - hr_assistant - INFO - Attempting login for user: EMP109
2025-04-26 14:59:24,306 - hr_assistant - INFO - Login successful for user: EMP109
2025-04-26 14:59:25,343 - hr_assistant - INFO - Retrieved employee data: {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L1', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 14:59:25,344 - hr_assistant - INFO - Successfully retrieved data for employee: EMP109
2025-04-26 14:59:25,347 - hr_assistant - INFO - Sending initial greeting to employee: EMP109
2025-04-26 14:59:43,267 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 14:59:43,268 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 14:59:43,268 - hr_assistant - INFO - Processing query for employee EMP109: show team attendance for today
2025-04-26 14:59:43,268 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 14:59:45,094 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 14:59:45,267 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 14:59:45,267 - hr_assistant - INFO - Creating new thread for employee EMP109
2025-04-26 14:59:45,731 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 14:59:46,736 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/messages "HTTP/1.1 200 OK"
2025-04-26 14:59:48,471 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs "HTTP/1.1 200 OK"
2025-04-26 14:59:48,984 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 14:59:50,621 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 14:59:50,623 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-26 14:59:50,624 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-26 14:59:50,624 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 14:59:52,157 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 14:59:52,159 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 14:59:52,159 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 14:59:53,206 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 14:59:53,207 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 14:59:53,209 - hr_assistant - ERROR - Error executing function get_team_attendance: 'NoneType' object has no attribute 'get'
2025-04-26 14:59:54,019 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 14:59:55,533 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 14:59:57,073 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 14:59:57,074 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP109'}
2025-04-26 14:59:57,074 - hr_assistant - INFO - Fetching team data for manager: EMP109
2025-04-26 14:59:57,075 - hr_assistant - INFO - cache data for manager {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L1', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 14:59:57,075 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66fa8471a8adc4a2c26c058e
2025-04-26 14:59:58,051 - hr_assistant - INFO - Successfully retrieved team data for manager EMP109 with 6 team members
2025-04-26 14:59:59,632 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:00:01,287 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:03,421 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:05,060 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:05,061 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP111', 'date_type': 'today'}
2025-04-26 15:00:05,061 - hr_assistant - INFO - Processing attendance request for employee: EMP111 (date_type: today, include_team: None)
2025-04-26 15:00:05,061 - hr_assistant - INFO - Requesting employee data for: EMP111
2025-04-26 15:00:05,061 - hr_assistant - INFO - Attempting login for user: EMP111
2025-04-26 15:00:06,698 - hr_assistant - INFO - Login successful for user: EMP111
2025-04-26 15:00:07,746 - hr_assistant - INFO - Retrieved employee data: {'_id': '671a4d3ac67936eae804909a', 'userName': 'Hamza Akram', 'password': '123456', 'email': [{'workEmail': 'hamza@gmail.com'}], 'firstName': 'Hamza', 'middleName': '', 'lastName': 'Akram', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Gujranwala', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'software Engineer', 'profession': 'IT expert', 'nationality': 'pakistan', 'profilePic': 'http://example.com/profile.jpg', 'familyInfo': {'fatherName': 'Muhammad Akram', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP111', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP111'}], 'salaryInfo': {'baseSalary': '700', 'currency': 'SAR', 'timeCycle': 'monthy', 'allowance_Benefits': [{'allowanceTitle': 'Tansport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '725'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20'}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '', 'lastLocationUpdatedAt': ''}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 0, 'used': 2}, 'sickLeave': {'entitlement': 120, 'remaining': 118, 'used': 2}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 289}}, 'updatedAt': '2025-04-24T06:34:50.789Z'}
2025-04-26 15:00:07,747 - hr_assistant - INFO - Successfully retrieved data for employee: EMP111
2025-04-26 15:00:07,748 - hr_assistant - INFO - Employee EMP111 has grade L4, is_manager: True
2025-04-26 15:00:07,748 - hr_assistant - INFO - Fetching team attendance for manager: EMP111 (date_type: today)
2025-04-26 15:00:07,749 - hr_assistant - INFO - Fetching team data for manager: EMP111
2025-04-26 15:00:07,749 - hr_assistant - INFO - cache data for manager {'_id': '671a4d3ac67936eae804909a', 'userName': 'Hamza Akram', 'password': '123456', 'email': [{'workEmail': 'hamza@gmail.com'}], 'firstName': 'Hamza', 'middleName': '', 'lastName': 'Akram', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Gujranwala', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'software Engineer', 'profession': 'IT expert', 'nationality': 'pakistan', 'profilePic': 'http://example.com/profile.jpg', 'familyInfo': {'fatherName': 'Muhammad Akram', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP111', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP111'}], 'salaryInfo': {'baseSalary': '700', 'currency': 'SAR', 'timeCycle': 'monthy', 'allowance_Benefits': [{'allowanceTitle': 'Tansport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '725'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20'}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '', 'lastLocationUpdatedAt': ''}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 0, 'used': 2}, 'sickLeave': {'entitlement': 120, 'remaining': 118, 'used': 2}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 289}}, 'updatedAt': '2025-04-24T06:34:50.789Z'}
2025-04-26 15:00:07,750 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/671a4d3ac67936eae804909a
2025-04-26 15:00:08,758 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:00:08,760 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP115', 'date_type': 'today'}
2025-04-26 15:00:08,760 - hr_assistant - INFO - Processing attendance request for employee: EMP115 (date_type: today, include_team: None)
2025-04-26 15:00:08,760 - hr_assistant - INFO - Requesting employee data for: EMP115
2025-04-26 15:00:08,760 - hr_assistant - INFO - Attempting login for user: EMP115
2025-04-26 15:00:10,282 - hr_assistant - INFO - Login successful for user: EMP115
2025-04-26 15:00:11,218 - hr_assistant - INFO - Retrieved employee data: {'_id': '671a4e6fc67936eae8049103', 'userName': 'Suleman niazi', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'suleman.nastecsol@gmail.com'}], 'firstName': 'Suleman', 'middleName': '', 'lastName': 'Azeem', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 7', 'city': 'Mianwali', 'country': 'Pakistan'}, 'NIC': '3830141852039', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '3830141852039', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '2002-08-20', 'age': 24, 'phoneNumber': [{'mobileNumber': '+923057668600', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'Software Engineer', 'profession': 'IT expert', 'nationality': 'Pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/png_ATT1393.png', 'familyInfo': {'fatherName': 'John', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP115'}], 'salaryInfo': {'baseSalary': '700', 'currency': 'SAR', 'timeCycle_Period': None, 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '725'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.6995|73.0363', 'lastLocationUpdatedAt': '2025-04-20T17:42:21.412Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1061}}, 'updatedAt': '2025-04-22T07:14:50.392Z'}
2025-04-26 15:00:11,219 - hr_assistant - INFO - Successfully retrieved data for employee: EMP115
2025-04-26 15:00:11,221 - hr_assistant - INFO - Employee EMP115 has grade L4, is_manager: True
2025-04-26 15:00:11,221 - hr_assistant - INFO - Fetching team attendance for manager: EMP115 (date_type: today)
2025-04-26 15:00:11,221 - hr_assistant - INFO - Fetching team data for manager: EMP115
2025-04-26 15:00:11,221 - hr_assistant - INFO - cache data for manager {'_id': '671a4e6fc67936eae8049103', 'userName': 'Suleman niazi', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'suleman.nastecsol@gmail.com'}], 'firstName': 'Suleman', 'middleName': '', 'lastName': 'Azeem', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 7', 'city': 'Mianwali', 'country': 'Pakistan'}, 'NIC': '3830141852039', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '3830141852039', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '2002-08-20', 'age': 24, 'phoneNumber': [{'mobileNumber': '+923057668600', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'Software Engineer', 'profession': 'IT expert', 'nationality': 'Pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/png_ATT1393.png', 'familyInfo': {'fatherName': 'John', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP115'}], 'salaryInfo': {'baseSalary': '700', 'currency': 'SAR', 'timeCycle_Period': None, 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '725'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.6995|73.0363', 'lastLocationUpdatedAt': '2025-04-20T17:42:21.412Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1061}}, 'updatedAt': '2025-04-22T07:14:50.392Z'}
2025-04-26 15:00:11,221 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/671a4e6fc67936eae8049103
2025-04-26 15:00:12,235 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:00:12,237 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP117', 'date_type': 'today'}
2025-04-26 15:00:12,237 - hr_assistant - INFO - Processing attendance request for employee: EMP117 (date_type: today, include_team: None)
2025-04-26 15:00:12,237 - hr_assistant - INFO - Requesting employee data for: EMP117
2025-04-26 15:00:12,237 - hr_assistant - INFO - Attempting login for user: EMP117
2025-04-26 15:00:13,875 - hr_assistant - INFO - Login successful for user: EMP117
2025-04-26 15:00:14,898 - hr_assistant - INFO - Retrieved employee data: {'_id': '671a4efdc67936eae8049126', 'userName': 'Ali Rana', 'password': '123456', 'email': [{'workEmail': 'ali@gmail.com'}], 'firstName': 'Ali', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Sue Ram', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 22, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'Designer', 'profession': 'Design expert', 'nationality': 'pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT225.jpg', 'familyInfo': {'fatherName': 'John', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP117'}], 'salaryInfo': {'baseSalary': '700', 'currency': 'SAR', 'timeCycle': 'monthy', 'allowance_Benefits': [{'allowanceTitle': 'Tansport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '725'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20'}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '', 'lastLocationUpdatedAt': ''}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 281}}, 'updatedAt': '2025-04-24T06:42:36.016Z'}
2025-04-26 15:00:14,898 - hr_assistant - INFO - Successfully retrieved data for employee: EMP117
2025-04-26 15:00:14,900 - hr_assistant - INFO - Employee EMP117 has grade L4, is_manager: True
2025-04-26 15:00:14,900 - hr_assistant - INFO - Fetching team attendance for manager: EMP117 (date_type: today)
2025-04-26 15:00:14,900 - hr_assistant - INFO - Fetching team data for manager: EMP117
2025-04-26 15:00:14,901 - hr_assistant - INFO - cache data for manager {'_id': '671a4efdc67936eae8049126', 'userName': 'Ali Rana', 'password': '123456', 'email': [{'workEmail': 'ali@gmail.com'}], 'firstName': 'Ali', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Sue Ram', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 22, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'Designer', 'profession': 'Design expert', 'nationality': 'pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT225.jpg', 'familyInfo': {'fatherName': 'John', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP117'}], 'salaryInfo': {'baseSalary': '700', 'currency': 'SAR', 'timeCycle': 'monthy', 'allowance_Benefits': [{'allowanceTitle': 'Tansport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '725'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20'}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '', 'lastLocationUpdatedAt': ''}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 281}}, 'updatedAt': '2025-04-24T06:42:36.016Z'}
2025-04-26 15:00:14,901 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/671a4efdc67936eae8049126
2025-04-26 15:00:15,923 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:00:15,925 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP105', 'date_type': 'today'}
2025-04-26 15:00:15,925 - hr_assistant - INFO - Processing attendance request for employee: EMP105 (date_type: today, include_team: None)
2025-04-26 15:00:15,925 - hr_assistant - INFO - Requesting employee data for: EMP105
2025-04-26 15:00:15,926 - hr_assistant - INFO - Attempting login for user: EMP105
2025-04-26 15:00:17,446 - hr_assistant - INFO - Login successful for user: EMP105
2025-04-26 15:00:18,450 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-26 15:00:18,451 - hr_assistant - INFO - Successfully retrieved data for employee: EMP105
2025-04-26 15:00:18,453 - hr_assistant - INFO - Employee EMP105 has grade L4, is_manager: True
2025-04-26 15:00:18,453 - hr_assistant - INFO - Fetching team attendance for manager: EMP105 (date_type: today)
2025-04-26 15:00:18,453 - hr_assistant - INFO - Fetching team data for manager: EMP105
2025-04-26 15:00:18,454 - hr_assistant - INFO - cache data for manager {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-26 15:00:18,454 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d8250f99b629cbdb2e0f3a
2025-04-26 15:00:19,357 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:00:19,358 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP107', 'date_type': 'today'}
2025-04-26 15:00:19,359 - hr_assistant - INFO - Processing attendance request for employee: EMP107 (date_type: today, include_team: None)
2025-04-26 15:00:19,359 - hr_assistant - INFO - Requesting employee data for: EMP107
2025-04-26 15:00:19,359 - hr_assistant - INFO - Attempting login for user: EMP107
2025-04-26 15:00:20,904 - hr_assistant - INFO - Login successful for user: EMP107
2025-04-26 15:00:21,966 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d825a399b629cbdb2e0f54', 'userName': 'Amad Sharif', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'amad@gmail.com'}], 'firstName': 'Imad', 'middleName': 'M', 'lastName': 'Sharif', 'martialStatus': 'Married', 'religion': 'Islam', 'address': {'streetAddress': 'street #6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'Male', 'role': 'QA', 'profession': 'IT', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1501.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'Anns Mustafa', 'jobRank': 'Junior', 'designation': 'employee', 'grade': 'L4', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'Permanent', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP107', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/png_ATT1385.png'}], 'salaryInfo': {'baseSalary': 600, 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '425'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': 'Car', 'assetId': 6105, 'assetType': 'Unknown', 'issueDateFrom': '2025-04-17', 'issueDateTo': '2025-04-19'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.572263269129806|73.14781204214387', 'lastLocation': '33.5722519|73.147623', 'lastLocationUpdatedAt': '2025-04-26T08:04:19.080Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '2024-03-22', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 35, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': -6, 'used': 8}, 'sickLeave': {'entitlement': 120, 'remaining': -195, 'used': 315}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -2091}}, 'updatedAt': '2025-04-26T08:04:19.080Z'}
2025-04-26 15:00:21,967 - hr_assistant - INFO - Successfully retrieved data for employee: EMP107
2025-04-26 15:00:21,968 - hr_assistant - INFO - Employee EMP107 has grade L4, is_manager: True
2025-04-26 15:00:21,968 - hr_assistant - INFO - Fetching team attendance for manager: EMP107 (date_type: today)
2025-04-26 15:00:21,968 - hr_assistant - INFO - Fetching team data for manager: EMP107
2025-04-26 15:00:21,969 - hr_assistant - INFO - cache data for manager {'_id': '66d825a399b629cbdb2e0f54', 'userName': 'Amad Sharif', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'amad@gmail.com'}], 'firstName': 'Imad', 'middleName': 'M', 'lastName': 'Sharif', 'martialStatus': 'Married', 'religion': 'Islam', 'address': {'streetAddress': 'street #6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'Male', 'role': 'QA', 'profession': 'IT', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1501.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'Anns Mustafa', 'jobRank': 'Junior', 'designation': 'employee', 'grade': 'L4', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'Permanent', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP107', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/png_ATT1385.png'}], 'salaryInfo': {'baseSalary': 600, 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '425'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': 'Car', 'assetId': 6105, 'assetType': 'Unknown', 'issueDateFrom': '2025-04-17', 'issueDateTo': '2025-04-19'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.572263269129806|73.14781204214387', 'lastLocation': '33.5722519|73.147623', 'lastLocationUpdatedAt': '2025-04-26T08:04:19.080Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '2024-03-22', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 35, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': -6, 'used': 8}, 'sickLeave': {'entitlement': 120, 'remaining': -195, 'used': 315}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -2091}}, 'updatedAt': '2025-04-26T08:04:19.080Z'}
2025-04-26 15:00:21,969 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d825a399b629cbdb2e0f54
2025-04-26 15:00:22,940 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:00:22,942 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP113', 'date_type': 'today'}
2025-04-26 15:00:22,942 - hr_assistant - INFO - Processing attendance request for employee: EMP113 (date_type: today, include_team: None)
2025-04-26 15:00:22,942 - hr_assistant - INFO - Requesting employee data for: EMP113
2025-04-26 15:00:22,942 - hr_assistant - INFO - Attempting login for user: EMP113
2025-04-26 15:00:24,413 - hr_assistant - INFO - Login successful for user: EMP113
2025-04-26 15:00:25,344 - hr_assistant - INFO - Retrieved employee data: {'_id': '671a4dc5c67936eae80490cb', 'userName': 'Arqum Satti', 'password': '123456', 'email': [{'personalEmail': 'arqum@gmail.com', 'workEmail': 'arqum@gmail.com'}], 'firstName': 'Arqum', 'middleName': '', 'lastName': 'Satti', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Kotli', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'intern', 'profession': 'IT expert', 'nationality': 'pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1397.jpeg', 'familyInfo': {'fatherName': 'John', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L3', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP113'}], 'salaryInfo': {'baseSalary': '600', 'currency': 'SAR', 'timeCycle_Period': None, 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '625'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 10000, 'loanIssueDate': '2023-01-01', 'loanDuration': 5, 'installmentAmount': 200, 'paidAmount': 8000, 'totalInstallments': 60, 'paidInstallments': 20}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.57148306060459|73.14794692319543', 'lastLocation': '33.5722534|73.1476227', 'lastLocationUpdatedAt': '2025-04-21T13:54:14.078Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT955.pdf', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT957.pdf', 'format': 'pdf', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT967.png', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT989.png', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT991.png', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1127.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1129.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1141.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1143.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1145.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1147.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1149.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1151.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1155.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_Contract_Emp', 'remarks': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1061.docx', 'URL': '67f3a6608edbd951989ff309', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 29}}, 'updatedAt': '2025-04-26T07:23:50.114Z'}
2025-04-26 15:00:25,345 - hr_assistant - INFO - Successfully retrieved data for employee: EMP113
2025-04-26 15:00:25,347 - hr_assistant - INFO - Employee EMP113 has grade L4, is_manager: True
2025-04-26 15:00:25,347 - hr_assistant - INFO - Fetching team attendance for manager: EMP113 (date_type: today)
2025-04-26 15:00:25,347 - hr_assistant - INFO - Fetching team data for manager: EMP113
2025-04-26 15:00:25,347 - hr_assistant - INFO - cache data for manager {'_id': '671a4dc5c67936eae80490cb', 'userName': 'Arqum Satti', 'password': '123456', 'email': [{'personalEmail': 'arqum@gmail.com', 'workEmail': 'arqum@gmail.com'}], 'firstName': 'Arqum', 'middleName': '', 'lastName': 'Satti', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Kotli', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'intern', 'profession': 'IT expert', 'nationality': 'pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1397.jpeg', 'familyInfo': {'fatherName': 'John', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L3', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP113'}], 'salaryInfo': {'baseSalary': '600', 'currency': 'SAR', 'timeCycle_Period': None, 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '625'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 10000, 'loanIssueDate': '2023-01-01', 'loanDuration': 5, 'installmentAmount': 200, 'paidAmount': 8000, 'totalInstallments': 60, 'paidInstallments': 20}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.57148306060459|73.14794692319543', 'lastLocation': '33.5722534|73.1476227', 'lastLocationUpdatedAt': '2025-04-21T13:54:14.078Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT955.pdf', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT957.pdf', 'format': 'pdf', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT967.png', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT989.png', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT991.png', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1127.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1129.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1141.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1143.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1145.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1147.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1149.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1151.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1155.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_Contract_Emp', 'remarks': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1061.docx', 'URL': '67f3a6608edbd951989ff309', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 29}}, 'updatedAt': '2025-04-26T07:23:50.114Z'}
2025-04-26 15:00:25,348 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/671a4dc5c67936eae80490cb
2025-04-26 15:00:26,362 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:00:27,382 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:00:28,919 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:30,462 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:31,973 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:33,439 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:33,441 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP111', 'date_type': 'today'}
2025-04-26 15:00:33,441 - hr_assistant - INFO - Fetching personal attendance for employee: EMP111 (date_type: today)
2025-04-26 15:00:33,441 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4d3ac67936eae804909a/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 15:00:34,632 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}}
2025-04-26 15:00:34,633 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}
2025-04-26 15:00:34,633 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP115', 'date_type': 'today'}
2025-04-26 15:00:34,634 - hr_assistant - INFO - Fetching personal attendance for employee: EMP115 (date_type: today)
2025-04-26 15:00:34,634 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4e6fc67936eae8049103/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 15:00:35,779 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}}
2025-04-26 15:00:35,781 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}
2025-04-26 15:00:35,781 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP117', 'date_type': 'today'}
2025-04-26 15:00:35,781 - hr_assistant - INFO - Fetching personal attendance for employee: EMP117 (date_type: today)
2025-04-26 15:00:35,781 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4efdc67936eae8049126/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 15:00:37,008 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}}
2025-04-26 15:00:37,009 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}
2025-04-26 15:00:37,009 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP105', 'date_type': 'today'}
2025-04-26 15:00:37,010 - hr_assistant - INFO - Fetching personal attendance for employee: EMP105 (date_type: today)
2025-04-26 15:00:37,010 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 15:00:38,132 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}}
2025-04-26 15:00:38,133 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [], 'totalRecords': 0, 'page': 0, 'limit': 50, 'totalPages': 0}
2025-04-26 15:00:38,133 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP107', 'date_type': 'today'}
2025-04-26 15:00:38,133 - hr_assistant - INFO - Fetching personal attendance for employee: EMP107 (date_type: today)
2025-04-26 15:00:38,134 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d825a399b629cbdb2e0f54/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 15:00:39,360 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680c7dc844f7033e58fa811e', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T06:31:33.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'biometric', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 76, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T06:31:36.380Z', 'updatedAt': '2025-04-26T06:31:36.380Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:00:39,362 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680c7dc844f7033e58fa811e', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T06:31:33.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'biometric', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 76, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T06:31:36.380Z', 'updatedAt': '2025-04-26T06:31:36.380Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:00:39,362 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP113', 'date_type': 'today'}
2025-04-26 15:00:39,362 - hr_assistant - INFO - Fetching personal attendance for employee: EMP113 (date_type: today)
2025-04-26 15:00:39,362 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4dc5c67936eae80490cb/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 15:00:40,468 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680c8a0644f7033e58fa828c', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:23:10.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 128, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:23:50.291Z', 'updatedAt': '2025-04-26T07:23:50.291Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:00:40,470 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680c8a0644f7033e58fa828c', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:23:10.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 128, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:23:50.291Z', 'updatedAt': '2025-04-26T07:23:50.291Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:00:42,637 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:00:44,686 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:46,148 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:48,383 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:50,423 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_AflkvHqCn8HiIDhgzj9e5yeI "HTTP/1.1 200 OK"
2025-04-26 15:00:51,474 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/messages "HTTP/1.1 200 OK"
2025-04-26 15:05:23,866 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 15:05:23,867 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 15:05:23,867 - hr_assistant - INFO - Processing query for employee EMP109: show team attendance for week
2025-04-26 15:05:25,602 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 15:05:25,859 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 15:05:27,000 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC "HTTP/1.1 200 OK"
2025-04-26 15:05:27,001 - hr_assistant - INFO - Using existing thread for employee EMP109: thread_Ie33sstKrS2aRt0AWDk4D7jC
2025-04-26 15:05:27,512 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/messages "HTTP/1.1 200 OK"
2025-04-26 15:05:29,056 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs "HTTP/1.1 200 OK"
2025-04-26 15:05:29,554 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:05:31,562 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:05:33,147 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:05:35,844 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:05:35,846 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP111', 'date_type': 'month_04_2025'}
2025-04-26 15:05:35,846 - hr_assistant - INFO - Processing attendance request for employee: EMP111 (date_type: month_04_2025, include_team: None)
2025-04-26 15:05:35,846 - hr_assistant - INFO - Requesting employee data for: EMP111
2025-04-26 15:05:35,846 - hr_assistant - INFO - Using cached employee data for: EMP111
2025-04-26 15:05:35,847 - hr_assistant - INFO - Employee EMP111 has grade L4, is_manager: True
2025-04-26 15:05:35,847 - hr_assistant - INFO - Fetching team attendance for manager: EMP111 (date_type: month_04_2025)
2025-04-26 15:05:35,847 - hr_assistant - INFO - Fetching team data for manager: EMP111
2025-04-26 15:05:35,847 - hr_assistant - INFO - cache data for manager {'_id': '671a4d3ac67936eae804909a', 'userName': 'Hamza Akram', 'password': '123456', 'email': [{'workEmail': 'hamza@gmail.com'}], 'firstName': 'Hamza', 'middleName': '', 'lastName': 'Akram', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Gujranwala', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'software Engineer', 'profession': 'IT expert', 'nationality': 'pakistan', 'profilePic': 'http://example.com/profile.jpg', 'familyInfo': {'fatherName': 'Muhammad Akram', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP111', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP111'}], 'salaryInfo': {'baseSalary': '700', 'currency': 'SAR', 'timeCycle': 'monthy', 'allowance_Benefits': [{'allowanceTitle': 'Tansport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '725'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20'}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '', 'lastLocationUpdatedAt': ''}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 0, 'used': 2}, 'sickLeave': {'entitlement': 120, 'remaining': 118, 'used': 2}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 289}}, 'updatedAt': '2025-04-24T06:34:50.789Z'}
2025-04-26 15:05:35,847 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/671a4d3ac67936eae804909a
2025-04-26 15:05:37,355 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:05:37,356 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP115', 'date_type': 'month_04_2025'}
2025-04-26 15:05:37,356 - hr_assistant - INFO - Processing attendance request for employee: EMP115 (date_type: month_04_2025, include_team: None)
2025-04-26 15:05:37,356 - hr_assistant - INFO - Requesting employee data for: EMP115
2025-04-26 15:05:37,356 - hr_assistant - INFO - Using cached employee data for: EMP115
2025-04-26 15:05:37,357 - hr_assistant - INFO - Employee EMP115 has grade L4, is_manager: True
2025-04-26 15:05:37,357 - hr_assistant - INFO - Fetching team attendance for manager: EMP115 (date_type: month_04_2025)
2025-04-26 15:05:37,357 - hr_assistant - INFO - Fetching team data for manager: EMP115
2025-04-26 15:05:37,357 - hr_assistant - INFO - cache data for manager {'_id': '671a4e6fc67936eae8049103', 'userName': 'Suleman niazi', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'suleman.nastecsol@gmail.com'}], 'firstName': 'Suleman', 'middleName': '', 'lastName': 'Azeem', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 7', 'city': 'Mianwali', 'country': 'Pakistan'}, 'NIC': '3830141852039', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '3830141852039', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '2002-08-20', 'age': 24, 'phoneNumber': [{'mobileNumber': '+923057668600', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'Software Engineer', 'profession': 'IT expert', 'nationality': 'Pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/png_ATT1393.png', 'familyInfo': {'fatherName': 'John', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP115'}], 'salaryInfo': {'baseSalary': '700', 'currency': 'SAR', 'timeCycle_Period': None, 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '725'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.6995|73.0363', 'lastLocationUpdatedAt': '2025-04-20T17:42:21.412Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1061}}, 'updatedAt': '2025-04-22T07:14:50.392Z'}
2025-04-26 15:05:37,357 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/671a4e6fc67936eae8049103
2025-04-26 15:05:38,381 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:05:38,402 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP117', 'date_type': 'month_04_2025'}
2025-04-26 15:05:38,418 - hr_assistant - INFO - Processing attendance request for employee: EMP117 (date_type: month_04_2025, include_team: None)
2025-04-26 15:05:38,419 - hr_assistant - INFO - Requesting employee data for: EMP117
2025-04-26 15:05:38,419 - hr_assistant - INFO - Using cached employee data for: EMP117
2025-04-26 15:05:38,419 - hr_assistant - INFO - Employee EMP117 has grade L4, is_manager: True
2025-04-26 15:05:38,437 - hr_assistant - INFO - Fetching team attendance for manager: EMP117 (date_type: month_04_2025)
2025-04-26 15:05:38,438 - hr_assistant - INFO - Fetching team data for manager: EMP117
2025-04-26 15:05:38,438 - hr_assistant - INFO - cache data for manager {'_id': '671a4efdc67936eae8049126', 'userName': 'Ali Rana', 'password': '123456', 'email': [{'workEmail': 'ali@gmail.com'}], 'firstName': 'Ali', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Sue Ram', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 22, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'Designer', 'profession': 'Design expert', 'nationality': 'pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT225.jpg', 'familyInfo': {'fatherName': 'John', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP117'}], 'salaryInfo': {'baseSalary': '700', 'currency': 'SAR', 'timeCycle': 'monthy', 'allowance_Benefits': [{'allowanceTitle': 'Tansport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '725'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20'}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '', 'lastLocationUpdatedAt': ''}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 281}}, 'updatedAt': '2025-04-24T06:42:36.016Z'}
2025-04-26 15:05:38,438 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/671a4efdc67936eae8049126
2025-04-26 15:05:39,352 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:05:39,354 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP105', 'date_type': 'month_04_2025'}
2025-04-26 15:05:39,354 - hr_assistant - INFO - Processing attendance request for employee: EMP105 (date_type: month_04_2025, include_team: None)
2025-04-26 15:05:39,354 - hr_assistant - INFO - Requesting employee data for: EMP105
2025-04-26 15:05:39,354 - hr_assistant - INFO - Using cached employee data for: EMP105
2025-04-26 15:05:39,354 - hr_assistant - INFO - Employee EMP105 has grade L4, is_manager: True
2025-04-26 15:05:39,354 - hr_assistant - INFO - Fetching team attendance for manager: EMP105 (date_type: month_04_2025)
2025-04-26 15:05:39,354 - hr_assistant - INFO - Fetching team data for manager: EMP105
2025-04-26 15:05:39,354 - hr_assistant - INFO - cache data for manager {'_id': '66d8250f99b629cbdb2e0f3a', 'userName': 'Shoaib Sardar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'shoaib@gmail.com'}], 'firstName': 'John', 'middleName': 'M', 'lastName': 'Doe', 'martialStatus': 'singal', 'religion': 'Islam', 'address': {'streetAddress': 'street # 7', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890124', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112344453', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1995-05-05', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431997', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'dev', 'profession': 'IT expertt', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpg_ATT417.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'John Doe', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'Full-time', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP105'}], 'salaryInfo': {'baseSalary': '5600', 'currency': 'USD', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Housing Allowance', 'allowanceType': 'Monthly', 'amount': '500', 'basedOn': 'Employee performance'}, {'allowanceTitle': 'housingAllowance', 'allowanceType': 'increment', 'amount': '100', 'basedOn': '2024-11-24'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}, {'deductionTitle': 'settlement', 'deductionType': 'LoanDeductions', 'amount': 2100, 'basedOn': 'Loan'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '4800'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 2100, 'loanIssueDate': '2025-04-11T12:00:36.456Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 2100, 'totalInstallments': 5, 'paidInstallments': 5, 'monthHistory': []}], 'assetsInfo': [], 'approvals': [{'approvalId': 'APR001', 'approvalType': 'Leave Request', 'approvalTitle': 'Annual Leave', 'approvalStatus': 'Approved'}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT951.jpg', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1043.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1045.pdf', 'format': 'pdf', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1139.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1159.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1165.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1217.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1219.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1221.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1235.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1237.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1243.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1249.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1285.docx', 'format': 'docx', 'empId': 'EMP105', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1287.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -123}}, 'updatedAt': '2025-04-24T06:35:18.720Z', 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.570239939526004|73.14410882698047', 'lastLocation': '33.570239939526004|73.14410882698047', 'lastLocationUpdatedAt': '2025-04-18T17:32:05.936Z'}}
2025-04-26 15:05:39,355 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d8250f99b629cbdb2e0f3a
2025-04-26 15:05:40,286 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:05:40,287 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP107', 'date_type': 'month_04_2025'}
2025-04-26 15:05:40,287 - hr_assistant - INFO - Processing attendance request for employee: EMP107 (date_type: month_04_2025, include_team: None)
2025-04-26 15:05:40,288 - hr_assistant - INFO - Requesting employee data for: EMP107
2025-04-26 15:05:40,288 - hr_assistant - INFO - Using cached employee data for: EMP107
2025-04-26 15:05:40,288 - hr_assistant - INFO - Employee EMP107 has grade L4, is_manager: True
2025-04-26 15:05:40,288 - hr_assistant - INFO - Fetching team attendance for manager: EMP107 (date_type: month_04_2025)
2025-04-26 15:05:40,288 - hr_assistant - INFO - Fetching team data for manager: EMP107
2025-04-26 15:05:40,288 - hr_assistant - INFO - cache data for manager {'_id': '66d825a399b629cbdb2e0f54', 'userName': 'Amad Sharif', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'amad@gmail.com'}], 'firstName': 'Imad', 'middleName': 'M', 'lastName': 'Sharif', 'martialStatus': 'Married', 'religion': 'Islam', 'address': {'streetAddress': 'street #6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'Male', 'role': 'QA', 'profession': 'IT', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1501.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'Anns Mustafa', 'jobRank': 'Junior', 'designation': 'employee', 'grade': 'L4', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'Permanent', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP107', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/png_ATT1385.png'}], 'salaryInfo': {'baseSalary': 600, 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '425'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': 'Car', 'assetId': 6105, 'assetType': 'Unknown', 'issueDateFrom': '2025-04-17', 'issueDateTo': '2025-04-19'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.572263269129806|73.14781204214387', 'lastLocation': '33.5722519|73.147623', 'lastLocationUpdatedAt': '2025-04-26T08:04:19.080Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '2024-03-22', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 35, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': -6, 'used': 8}, 'sickLeave': {'entitlement': 120, 'remaining': -195, 'used': 315}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -2091}}, 'updatedAt': '2025-04-26T08:04:19.080Z'}
2025-04-26 15:05:40,289 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d825a399b629cbdb2e0f54
2025-04-26 15:05:41,253 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:05:41,254 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP113', 'date_type': 'month_04_2025'}
2025-04-26 15:05:41,254 - hr_assistant - INFO - Processing attendance request for employee: EMP113 (date_type: month_04_2025, include_team: None)
2025-04-26 15:05:41,254 - hr_assistant - INFO - Requesting employee data for: EMP113
2025-04-26 15:05:41,255 - hr_assistant - INFO - Using cached employee data for: EMP113
2025-04-26 15:05:41,255 - hr_assistant - INFO - Employee EMP113 has grade L4, is_manager: True
2025-04-26 15:05:41,255 - hr_assistant - INFO - Fetching team attendance for manager: EMP113 (date_type: month_04_2025)
2025-04-26 15:05:41,255 - hr_assistant - INFO - Fetching team data for manager: EMP113
2025-04-26 15:05:41,255 - hr_assistant - INFO - cache data for manager {'_id': '671a4dc5c67936eae80490cb', 'userName': 'Arqum Satti', 'password': '123456', 'email': [{'personalEmail': 'arqum@gmail.com', 'workEmail': 'arqum@gmail.com'}], 'firstName': 'Arqum', 'middleName': '', 'lastName': 'Satti', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Kotli', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'intern', 'profession': 'IT expert', 'nationality': 'pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1397.jpeg', 'familyInfo': {'fatherName': 'John', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L3', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP113'}], 'salaryInfo': {'baseSalary': '600', 'currency': 'SAR', 'timeCycle_Period': None, 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '625'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': 10000, 'loanIssueDate': '2023-01-01', 'loanDuration': 5, 'installmentAmount': 200, 'paidAmount': 8000, 'totalInstallments': 60, 'paidInstallments': 20}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.57148306060459|73.14794692319543', 'lastLocation': '33.5722534|73.1476227', 'lastLocationUpdatedAt': '2025-04-21T13:54:14.078Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT955.pdf', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT957.pdf', 'format': 'pdf', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT967.png', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT989.png', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_Uploaded_EMP', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT991.png', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1127.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1129.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1141.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1143.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1145.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1147.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1149.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1151.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1155.docx', 'format': 'docx', 'empId': 'EMP113', 'expiration': '', 'size': ''}, {'type': 'Doc_Contract_Emp', 'remarks': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1061.docx', 'URL': '67f3a6608edbd951989ff309', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 29}}, 'updatedAt': '2025-04-26T07:23:50.114Z'}
2025-04-26 15:05:41,256 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/671a4dc5c67936eae80490cb
2025-04-26 15:05:42,212 - hr_assistant - WARNING - Team data response not in expected format: {"statusCode": 400, "statusMessage": "The request could not be processed", "errorMessage": "Supervisor not found in the specified department", "data": null}
2025-04-26 15:05:43,984 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:05:45,534 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:05:47,546 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:05:49,024 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:05:51,883 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:05:51,884 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP111', 'date_type': 'recent'}
2025-04-26 15:05:51,884 - hr_assistant - INFO - Fetching personal attendance for employee: EMP111 (date_type: recent)
2025-04-26 15:05:51,884 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4d3ac67936eae804909a/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 15:05:52,984 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b1f12e7e94af813bc794d', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T05:34:35.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 505, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 19, 'penalties': [{'uniqueId': 9867, 'action': 'salary_deduction', 'percentage': 15, 'lateMinute': 19, 'occurrence': 4}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T05:35:14.886Z', 'updatedAt': '2025-04-25T14:00:01.388Z', '__v': 0}, {'_id': '6809db8a3f1d136990981033', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:11.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:34:50.963Z', 'updatedAt': '2025-04-24T14:00:02.216Z', '__v': 0}, {'_id': '68088ed16a3f0d53693680f5', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T06:54:35.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 425, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 99, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T06:55:13.865Z', 'updatedAt': '2025-04-23T14:00:01.340Z', '__v': 0}, {'_id': '680736e5c60b619007b020f1', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T06:27:10.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 452, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 72, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T06:27:49.825Z', 'updatedAt': '2025-04-22T14:00:01.236Z', '__v': 0}, {'_id': '6805e1684ce909a13638a08e', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:10:09.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 469, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 55, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 55, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:10:48.536Z', 'updatedAt': '2025-04-21T14:00:00.714Z', '__v': 0}, {'_id': '6803ac614ce909a13638945f', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '68034b86a7f360a4cab886c1', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-19T14:00:01.223Z', 'updatedAt': '2025-04-19T14:00:01.223Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:05:52,986 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b1f12e7e94af813bc794d', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T05:34:35.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 505, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 19, 'penalties': [{'uniqueId': 9867, 'action': 'salary_deduction', 'percentage': 15, 'lateMinute': 19, 'occurrence': 4}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T05:35:14.886Z', 'updatedAt': '2025-04-25T14:00:01.388Z', '__v': 0}, {'_id': '6809db8a3f1d136990981033', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:11.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:34:50.963Z', 'updatedAt': '2025-04-24T14:00:02.216Z', '__v': 0}, {'_id': '68088ed16a3f0d53693680f5', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T06:54:35.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 425, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 99, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T06:55:13.865Z', 'updatedAt': '2025-04-23T14:00:01.340Z', '__v': 0}, {'_id': '680736e5c60b619007b020f1', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T06:27:10.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 452, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 72, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T06:27:49.825Z', 'updatedAt': '2025-04-22T14:00:01.236Z', '__v': 0}, {'_id': '6805e1684ce909a13638a08e', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:10:09.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 469, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 55, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 55, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:10:48.536Z', 'updatedAt': '2025-04-21T14:00:00.714Z', '__v': 0}, {'_id': '6803ac614ce909a13638945f', 'employeeId': '671a4d3ac67936eae804909a', 'empId': 'EMP111', 'name': 'Hamza Akram', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '68034b86a7f360a4cab886c1', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-19T14:00:01.223Z', 'updatedAt': '2025-04-19T14:00:01.223Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:05:52,986 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP115', 'date_type': 'recent'}
2025-04-26 15:05:52,986 - hr_assistant - INFO - Fetching personal attendance for employee: EMP115 (date_type: recent)
2025-04-26 15:05:52,987 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4e6fc67936eae8049103/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 15:05:54,074 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b2805e7e94af813bc7b43', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T06:12:45.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 467, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 57, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 57, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T06:13:25.642Z', 'updatedAt': '2025-04-25T14:00:01.390Z', '__v': 0}, {'_id': '680a43e2e7e94af813bc75cf', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-24T14:00:02.129Z', 'updatedAt': '2025-04-24T14:00:02.129Z', '__v': 0}, {'_id': '6808f2623f1d136990980bef', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:02.664Z', 'updatedAt': '2025-04-23T14:00:02.664Z', '__v': 0}, {'_id': '680741eac60b619007b021c0', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:14:11.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 405, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 119, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T07:14:50.570Z', 'updatedAt': '2025-04-22T14:00:01.248Z', '__v': 0}, {'_id': '6805e93f4ce909a13638a24a', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:43:36.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 436, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 88, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:44:15.302Z', 'updatedAt': '2025-04-21T14:00:00.720Z', '__v': 0}, {'_id': '68034d15a7f360a4cab88840', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:12:46.000Z', 'clockOutTime': '2025-04-19T14:08:55.000Z', 'totalHoursWorked': 651, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-19T09:53:29.000Z', 'endTime': '2025-04-19T09:58:59.000Z', 'durationMinutes': 5}], 'breakTime': 5, 'lateMinutes': 117, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:13:25.708Z', 'updatedAt': '2025-04-19T14:09:33.550Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:05:54,076 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b2805e7e94af813bc7b43', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T06:12:45.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 467, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 57, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 57, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T06:13:25.642Z', 'updatedAt': '2025-04-25T14:00:01.390Z', '__v': 0}, {'_id': '680a43e2e7e94af813bc75cf', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-24T14:00:02.129Z', 'updatedAt': '2025-04-24T14:00:02.129Z', '__v': 0}, {'_id': '6808f2623f1d136990980bef', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:02.664Z', 'updatedAt': '2025-04-23T14:00:02.664Z', '__v': 0}, {'_id': '680741eac60b619007b021c0', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:14:11.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 405, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 119, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T07:14:50.570Z', 'updatedAt': '2025-04-22T14:00:01.248Z', '__v': 0}, {'_id': '6805e93f4ce909a13638a24a', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:43:36.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 436, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 88, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:44:15.302Z', 'updatedAt': '2025-04-21T14:00:00.720Z', '__v': 0}, {'_id': '68034d15a7f360a4cab88840', 'employeeId': '671a4e6fc67936eae8049103', 'empId': 'EMP115', 'name': 'Suleman niazi', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:12:46.000Z', 'clockOutTime': '2025-04-19T14:08:55.000Z', 'totalHoursWorked': 651, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-19T09:53:29.000Z', 'endTime': '2025-04-19T09:58:59.000Z', 'durationMinutes': 5}], 'breakTime': 5, 'lateMinutes': 117, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:13:25.708Z', 'updatedAt': '2025-04-19T14:09:33.550Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:05:54,076 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP117', 'date_type': 'recent'}
2025-04-26 15:05:54,076 - hr_assistant - INFO - Fetching personal attendance for employee: EMP117 (date_type: recent)
2025-04-26 15:05:54,077 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4efdc67936eae8049126/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 15:05:55,262 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956244f7033e58fa7946', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.111Z', 'updatedAt': '2025-04-25T14:00:02.111Z', '__v': 0}, {'_id': '6809dd5c3f1d1369909811b6', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:41:56.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 437, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-24T06:41:58.000Z', 'endTime': '2025-04-24T06:43:23.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 86, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:42:36.191Z', 'updatedAt': '2025-04-24T14:00:01.449Z', '__v': 0}, {'_id': '6808f2623f1d136990980bed', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:02.661Z', 'updatedAt': '2025-04-23T14:00:02.661Z', '__v': 0}, {'_id': '6807a0e26a3f0d5369367d0f', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-22T14:00:02.665Z', 'updatedAt': '2025-04-22T14:00:02.665Z', '__v': 0}, {'_id': '68064f61c60b619007b01d42', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.240Z', 'updatedAt': '2025-04-21T14:00:01.240Z', '__v': 0}, {'_id': '68034d00a7f360a4cab8880d', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:12:24.000Z', 'clockOutTime': '2025-04-19T14:09:00.000Z', 'totalHoursWorked': 823, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 117, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:13:04.266Z', 'updatedAt': '2025-04-19T14:09:38.544Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:05:55,264 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b956244f7033e58fa7946', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.111Z', 'updatedAt': '2025-04-25T14:00:02.111Z', '__v': 0}, {'_id': '6809dd5c3f1d1369909811b6', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:41:56.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 437, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-24T06:41:58.000Z', 'endTime': '2025-04-24T06:43:23.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 86, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:42:36.191Z', 'updatedAt': '2025-04-24T14:00:01.449Z', '__v': 0}, {'_id': '6808f2623f1d136990980bed', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:02.661Z', 'updatedAt': '2025-04-23T14:00:02.661Z', '__v': 0}, {'_id': '6807a0e26a3f0d5369367d0f', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-22T14:00:02.665Z', 'updatedAt': '2025-04-22T14:00:02.665Z', '__v': 0}, {'_id': '68064f61c60b619007b01d42', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.240Z', 'updatedAt': '2025-04-21T14:00:01.240Z', '__v': 0}, {'_id': '68034d00a7f360a4cab8880d', 'employeeId': '671a4efdc67936eae8049126', 'empId': 'EMP117', 'name': 'Ali Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:12:24.000Z', 'clockOutTime': '2025-04-19T14:09:00.000Z', 'totalHoursWorked': 823, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 117, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:13:04.266Z', 'updatedAt': '2025-04-19T14:09:38.544Z', '__v': 0}], 'totalRecords': 6, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:05:55,264 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP105', 'date_type': 'recent'}
2025-04-26 15:05:55,265 - hr_assistant - INFO - Fetching personal attendance for employee: EMP105 (date_type: recent)
2025-04-26 15:05:55,265 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 15:05:56,364 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b280ae7e94af813bc7b5a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T06:12:49.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 467, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 57, 'penalties': [{'uniqueId': 9125, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 57, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T06:13:30.647Z', 'updatedAt': '2025-04-25T14:00:01.219Z', '__v': 0}, {'_id': '6809dba63f1d136990981079', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:39.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:35:18.892Z', 'updatedAt': '2025-04-24T14:00:01.105Z', '__v': 0}, {'_id': '6808f2613f1d136990980bcf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:01.851Z', 'updatedAt': '2025-04-23T14:00:01.851Z', '__v': 0}, {'_id': '68074202c60b619007b021e0', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:14:35.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 405, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 119, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T07:15:14.296Z', 'updatedAt': '2025-04-22T14:00:01.063Z', '__v': 0}, {'_id': '6805e1774ce909a13638a0a5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:10:24.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 469, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 55, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 55, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:11:03.722Z', 'updatedAt': '2025-04-21T14:00:00.702Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '2025-04-19T14:08:47.000Z', 'totalHoursWorked': 829, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:10:05.298Z', 'updatedAt': '2025-04-19T14:09:25.648Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876c', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:10:05.355Z', 'updatedAt': '2025-04-19T07:10:05.355Z', '__v': 0}], 'totalRecords': 7, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:05:56,366 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b280ae7e94af813bc7b5a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T06:12:49.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 467, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 57, 'penalties': [{'uniqueId': 9125, 'action': 'salary_deduction', 'percentage': 50, 'lateMinute': 57, 'occurrence': 2}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T06:13:30.647Z', 'updatedAt': '2025-04-25T14:00:01.219Z', '__v': 0}, {'_id': '6809dba63f1d136990981079', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:39.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:35:18.892Z', 'updatedAt': '2025-04-24T14:00:01.105Z', '__v': 0}, {'_id': '6808f2613f1d136990980bcf', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:01.851Z', 'updatedAt': '2025-04-23T14:00:01.851Z', '__v': 0}, {'_id': '68074202c60b619007b021e0', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:14:35.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 405, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 119, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T07:15:14.296Z', 'updatedAt': '2025-04-22T14:00:01.063Z', '__v': 0}, {'_id': '6805e1774ce909a13638a0a5', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:10:24.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 469, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 55, 'penalties': [{'uniqueId': 9125, 'action': 'written_warning', 'percentage': 25, 'lateMinute': 55, 'occurrence': 1}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:11:03.722Z', 'updatedAt': '2025-04-21T14:00:00.702Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876a', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '2025-04-19T14:08:47.000Z', 'totalHoursWorked': 829, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:10:05.298Z', 'updatedAt': '2025-04-19T14:09:25.648Z', '__v': 0}, {'_id': '68034c4da7f360a4cab8876c', 'employeeId': '66d8250f99b629cbdb2e0f3a', 'empId': 'EMP105', 'name': 'Shoaib Sardar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:25.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:10:05.355Z', 'updatedAt': '2025-04-19T07:10:05.355Z', '__v': 0}], 'totalRecords': 7, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:05:56,367 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP107', 'date_type': 'recent'}
2025-04-26 15:05:56,367 - hr_assistant - INFO - Fetching personal attendance for employee: EMP107 (date_type: recent)
2025-04-26 15:05:56,367 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d825a399b629cbdb2e0f54/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 15:05:57,514 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680c7dc844f7033e58fa811e', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T06:31:33.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'biometric', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 76, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T06:31:36.380Z', 'updatedAt': '2025-04-26T06:31:36.380Z', '__v': 0}, {'_id': '680b1b34e7e94af813bc785e', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T05:18:41.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 518, 'location': 'biometric', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-25T05:49:49.000Z', 'endTime': '2025-04-25T05:52:05.000Z', 'durationMinutes': 2}, {'startTime': '2025-04-25T07:31:10.000Z', 'endTime': '2025-04-25T07:32:24.000Z', 'durationMinutes': 1}], 'breakTime': 3, 'lateMinutes': 3, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T05:18:44.773Z', 'updatedAt': '2025-04-25T14:00:01.227Z', '__v': 0}, {'_id': '6809dd683f1d1369909811d9', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:42:45.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 403, 'location': 'biometric', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-24T08:29:57.000Z', 'endTime': '2025-04-24T09:04:10.000Z', 'durationMinutes': 34}], 'breakTime': 34, 'lateMinutes': 87, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:42:48.531Z', 'updatedAt': '2025-04-24T14:00:01.109Z', '__v': 0}, {'_id': '6808f2623f1d136990980bdc', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '68074de08428eafcbc43bf51', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-23T14:00:02.032Z', 'updatedAt': '2025-04-23T14:00:02.032Z', '__v': 0}, {'_id': '68074732c60b619007b0234d', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:37:19.000Z', 'clockOutTime': '2025-04-22T08:13:35.000Z', 'totalHoursWorked': 36, 'location': 'biometric', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 142, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 286, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T07:37:22.067Z', 'updatedAt': '2025-04-22T19:00:00.372Z', '__v': 0}, {'_id': '6805ec6c0751bc60d4df27b7', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:57:45.000Z', 'clockOutTime': '2025-04-21T14:20:48.000Z', 'totalHoursWorked': 606, 'location': 'biometric', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-21T08:20:07.000Z', 'endTime': '2025-04-21T09:48:20.000Z', 'durationMinutes': 88}], 'breakTime': 88, 'lateMinutes': 102, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:57:48.198Z', 'updatedAt': '2025-04-21T14:21:25.790Z', '__v': 0}, {'_id': '68034c89a7f360a4cab887c7', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:11:02.000Z', 'clockOutTime': '2025-04-19T17:36:11.000Z', 'totalHoursWorked': 1033, 'location': 'biometric', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 116, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:11:05.920Z', 'updatedAt': '2025-04-19T17:36:14.611Z', '__v': 0}], 'totalRecords': 7, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:05:57,516 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680c7dc844f7033e58fa811e', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T06:31:33.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'biometric', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 76, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T06:31:36.380Z', 'updatedAt': '2025-04-26T06:31:36.380Z', '__v': 0}, {'_id': '680b1b34e7e94af813bc785e', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': '2025-04-25T05:18:41.000Z', 'clockOutTime': '2025-04-25T14:00:00.000Z', 'totalHoursWorked': 518, 'location': 'biometric', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-25T05:49:49.000Z', 'endTime': '2025-04-25T05:52:05.000Z', 'durationMinutes': 2}, {'startTime': '2025-04-25T07:31:10.000Z', 'endTime': '2025-04-25T07:32:24.000Z', 'durationMinutes': 1}], 'breakTime': 3, 'lateMinutes': 3, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-25T05:18:44.773Z', 'updatedAt': '2025-04-25T14:00:01.227Z', '__v': 0}, {'_id': '6809dd683f1d1369909811d9', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:42:45.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 403, 'location': 'biometric', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-24T08:29:57.000Z', 'endTime': '2025-04-24T09:04:10.000Z', 'durationMinutes': 34}], 'breakTime': 34, 'lateMinutes': 87, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:42:48.531Z', 'updatedAt': '2025-04-24T14:00:01.109Z', '__v': 0}, {'_id': '6808f2623f1d136990980bdc', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '68074de08428eafcbc43bf51', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-23T14:00:02.032Z', 'updatedAt': '2025-04-23T14:00:02.032Z', '__v': 0}, {'_id': '68074732c60b619007b0234d', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T07:37:19.000Z', 'clockOutTime': '2025-04-22T08:13:35.000Z', 'totalHoursWorked': 36, 'location': 'biometric', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 142, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 286, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T07:37:22.067Z', 'updatedAt': '2025-04-22T19:00:00.372Z', '__v': 0}, {'_id': '6805ec6c0751bc60d4df27b7', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T06:57:45.000Z', 'clockOutTime': '2025-04-21T14:20:48.000Z', 'totalHoursWorked': 606, 'location': 'biometric', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-21T08:20:07.000Z', 'endTime': '2025-04-21T09:48:20.000Z', 'durationMinutes': 88}], 'breakTime': 88, 'lateMinutes': 102, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T06:57:48.198Z', 'updatedAt': '2025-04-21T14:21:25.790Z', '__v': 0}, {'_id': '68034c89a7f360a4cab887c7', 'employeeId': '66d825a399b629cbdb2e0f54', 'empId': 'EMP107', 'name': 'Amad Sharif', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:11:02.000Z', 'clockOutTime': '2025-04-19T17:36:11.000Z', 'totalHoursWorked': 1033, 'location': 'biometric', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 116, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:11:05.920Z', 'updatedAt': '2025-04-19T17:36:14.611Z', '__v': 0}], 'totalRecords': 7, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:05:57,516 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP113', 'date_type': 'recent'}
2025-04-26 15:05:57,516 - hr_assistant - INFO - Fetching personal attendance for employee: EMP113 (date_type: recent)
2025-04-26 15:05:57,516 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4dc5c67936eae80490cb/2025-04-26/2025-04-19?page=0&limit=50
2025-04-26 15:05:58,677 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680c8a0644f7033e58fa828c', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:23:10.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 128, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:23:50.291Z', 'updatedAt': '2025-04-26T07:23:50.291Z', '__v': 0}, {'_id': '680b956244f7033e58fa793b', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.050Z', 'updatedAt': '2025-04-25T14:00:02.050Z', '__v': 0}, {'_id': '6809db8e3f1d13699098104a', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:15.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:34:54.331Z', 'updatedAt': '2025-04-24T14:00:01.252Z', '__v': 0}, {'_id': '6808f2613f1d136990980bcd', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:01.812Z', 'updatedAt': '2025-04-23T14:00:01.812Z', '__v': 0}, {'_id': '680736ffc60b619007b02108', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T06:27:36.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 452, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 72, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T06:28:15.731Z', 'updatedAt': '2025-04-22T14:00:01.076Z', '__v': 0}, {'_id': '6805dc984ce909a13638a00b', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T05:49:37.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 481, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-21T13:33:38.000Z', 'endTime': '2025-04-21T13:42:57.000Z', 'durationMinutes': 9}], 'breakTime': 9, 'lateMinutes': 34, 'penalties': [{'uniqueId': 4532, 'action': 'salary_deduction', 'percentage': 75, 'lateMinute': 34, 'occurrence': 3}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T05:50:16.334Z', 'updatedAt': '2025-04-21T14:00:00.724Z', '__v': 0}, {'_id': '68034c54a7f360a4cab8878c', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:32.000Z', 'clockOutTime': '2025-04-19T14:07:47.000Z', 'totalHoursWorked': 69, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-19T09:12:42.000Z', 'endTime': '2025-04-19T14:31:23.337838', 'durationMinutes': 318}], 'breakTime': 318, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:10:12.254Z', 'updatedAt': '2025-04-19T14:07:47.787Z', '__v': 0}, {'_id': '68034c54a7f360a4cab8878e', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:32.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:10:12.318Z', 'updatedAt': '2025-04-19T07:10:12.318Z', '__v': 0}], 'totalRecords': 8, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:05:58,680 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680c8a0644f7033e58fa828c', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:23:10.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 128, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:23:50.291Z', 'updatedAt': '2025-04-26T07:23:50.291Z', '__v': 0}, {'_id': '680b956244f7033e58fa793b', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.050Z', 'updatedAt': '2025-04-25T14:00:02.050Z', '__v': 0}, {'_id': '6809db8e3f1d13699098104a', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T06:34:15.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 445, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 79, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T06:34:54.331Z', 'updatedAt': '2025-04-24T14:00:01.252Z', '__v': 0}, {'_id': '6808f2613f1d136990980bcd', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T14:00:01.812Z', 'updatedAt': '2025-04-23T14:00:01.812Z', '__v': 0}, {'_id': '680736ffc60b619007b02108', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T06:27:36.000Z', 'clockOutTime': '2025-04-22T14:00:00.000Z', 'totalHoursWorked': 452, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 72, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-22T06:28:15.731Z', 'updatedAt': '2025-04-22T14:00:01.076Z', '__v': 0}, {'_id': '6805dc984ce909a13638a00b', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': '2025-04-21T05:49:37.000Z', 'clockOutTime': '2025-04-21T14:00:00.000Z', 'totalHoursWorked': 481, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-21T13:33:38.000Z', 'endTime': '2025-04-21T13:42:57.000Z', 'durationMinutes': 9}], 'breakTime': 9, 'lateMinutes': 34, 'penalties': [{'uniqueId': 4532, 'action': 'salary_deduction', 'percentage': 75, 'lateMinute': 34, 'occurrence': 3}], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-21T05:50:16.334Z', 'updatedAt': '2025-04-21T14:00:00.724Z', '__v': 0}, {'_id': '68034c54a7f360a4cab8878c', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:32.000Z', 'clockOutTime': '2025-04-19T14:07:47.000Z', 'totalHoursWorked': 69, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-19T09:12:42.000Z', 'endTime': '2025-04-19T14:31:23.337838', 'durationMinutes': 318}], 'breakTime': 318, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-19T07:10:12.254Z', 'updatedAt': '2025-04-19T14:07:47.787Z', '__v': 0}, {'_id': '68034c54a7f360a4cab8878e', 'employeeId': '671a4dc5c67936eae80490cb', 'empId': 'EMP113', 'name': 'Arqum Satti', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:32.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Quarterly', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 114, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:10:12.318Z', 'updatedAt': '2025-04-19T07:10:12.318Z', '__v': 0}], 'totalRecords': 8, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:06:00,281 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:06:01,759 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:03,761 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:05,929 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:07,406 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:08,917 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:10,357 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:11,851 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:13,350 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:15,399 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:16,847 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:18,292 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:19,761 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_F0xPtKCDKN2CqapxbErif2nv "HTTP/1.1 200 OK"
2025-04-26 15:06:20,765 - hr_assistant - ERROR - Reached maximum number of attempts waiting for assistant response
2025-04-26 15:07:06,068 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 15:07:06,069 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 15:07:06,069 - hr_assistant - INFO - Processing query for employee EMP109: show team attendance for today
2025-04-26 15:07:08,169 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 15:07:08,172 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 15:07:09,194 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC "HTTP/1.1 200 OK"
2025-04-26 15:07:09,195 - hr_assistant - INFO - Using existing thread for employee EMP109: thread_Ie33sstKrS2aRt0AWDk4D7jC
2025-04-26 15:07:10,201 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/messages "HTTP/1.1 200 OK"
2025-04-26 15:07:11,447 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs "HTTP/1.1 200 OK"
2025-04-26 15:07:12,061 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_i6X1j5xZFDldiLlDOtfXwgH2 "HTTP/1.1 200 OK"
2025-04-26 15:07:13,559 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_i6X1j5xZFDldiLlDOtfXwgH2 "HTTP/1.1 200 OK"
2025-04-26 15:07:15,008 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_i6X1j5xZFDldiLlDOtfXwgH2 "HTTP/1.1 200 OK"
2025-04-26 15:07:15,009 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-04-26 15:07:15,009 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-04-26 15:07:15,009 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 15:07:15,009 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 15:07:15,010 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 15:07:15,939 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 15:07:15,940 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 15:07:17,044 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 15:07:18,544 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_i6X1j5xZFDldiLlDOtfXwgH2/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:07:20,066 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_i6X1j5xZFDldiLlDOtfXwgH2 "HTTP/1.1 200 OK"
2025-04-26 15:07:21,565 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_i6X1j5xZFDldiLlDOtfXwgH2 "HTTP/1.1 200 OK"
2025-04-26 15:07:23,019 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_i6X1j5xZFDldiLlDOtfXwgH2 "HTTP/1.1 200 OK"
2025-04-26 15:07:24,535 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/runs/run_i6X1j5xZFDldiLlDOtfXwgH2 "HTTP/1.1 200 OK"
2025-04-26 15:07:24,996 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_Ie33sstKrS2aRt0AWDk4D7jC/messages "HTTP/1.1 200 OK"
2025-04-26 15:13:08,076 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 15:13:24,697 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:13:24,697 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-26 15:13:24,698 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 15:13:24,698 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-26 15:13:26,144 - hr_assistant - INFO - Login successful for user: EMP101
2025-04-26 15:13:27,160 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 15:13:27,160 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-04-26 15:13:27,162 - hr_assistant - INFO - Sending initial greeting to employee: EMP101
2025-04-26 15:13:31,521 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:13:31,521 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 15:13:31,521 - hr_assistant - INFO - Processing query for employee EMP101: Show my team's attendance for this month
2025-04-26 15:13:31,521 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 15:13:33,280 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 15:13:33,541 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 15:13:33,541 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-04-26 15:13:34,572 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 15:13:36,385 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/messages "HTTP/1.1 200 OK"
2025-04-26 15:13:38,567 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs "HTTP/1.1 200 OK"
2025-04-26 15:13:39,282 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:13:40,782 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:13:40,785 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 15:13:40,785 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-26 15:13:40,786 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 15:13:42,230 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 15:13:42,232 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 15:13:42,232 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 15:13:43,157 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 15:13:43,158 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 15:13:43,160 - hr_assistant - ERROR - Error executing function get_team_attendance: 'NoneType' object has no attribute 'get'
2025-04-26 15:13:44,931 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:13:46,444 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:13:48,030 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:13:48,032 - hr_assistant - INFO - Processing tool call: get_team_data with args: {'employee_id': 'EMP103'}
2025-04-26 15:13:48,032 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 15:13:48,032 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 15:13:48,035 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 15:13:48,944 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 15:13:50,334 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:13:51,814 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:13:53,294 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:13:53,295 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP101', 'date_type': 'this_month'}
2025-04-26 15:13:53,295 - hr_assistant - INFO - Fetching personal attendance for employee: EMP101 (date_type: this_month)
2025-04-26 15:13:53,295 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 15:13:54,632 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956244f7033e58fa7944', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'fullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.108Z', 'updatedAt': '2025-04-25T14:00:02.108Z', '__v': 0}, {'_id': '680a43e2e7e94af813bc75d1', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'fullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-24T14:00:02.143Z', 'updatedAt': '2025-04-24T14:00:02.143Z', '__v': 0}, {'_id': '6808b0842dc875d8ce014542', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': '', 'totalHoursWorked': 3434, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [{'startTime': '2025-04-23T10:13:20.000Z', 'endTime': '2025-04-23T10:13:52.000Z', 'durationMinutes': 0}], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '680741e1c60b619007b0219f', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T09:19:00.729Z', 'updatedAt': '2025-04-23T10:13:55.660Z', '__v': 0}, {'_id': '6806dc01c60b619007b02094', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '680615419e84b3dda84cbfc4', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-22T00:00:01.579Z', 'updatedAt': '2025-04-22T00:00:01.579Z', '__v': 0}, {'_id': '68058a814ce909a136389fe9', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6803ab274ce909a1363893c6', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-21T00:00:01.595Z', 'updatedAt': '2025-04-21T00:00:01.595Z', '__v': 0}, {'_id': '68034c46a7f360a4cab8874d', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:18.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:09:58.316Z', 'updatedAt': '2025-04-19T07:09:58.316Z', '__v': 0}, {'_id': '68034c46a7f360a4cab88749', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:18.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:09:58.072Z', 'updatedAt': '2025-04-19T07:09:58.072Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f36', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67ffab43e7ace0e6413383e3', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'sickLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-18T14:00:01.319Z', 'updatedAt': '2025-04-18T14:00:01.319Z', '__v': 0}, {'_id': '68010961a7f360a4cab869ae', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67ffab43e7ace0e6413383e3', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'sickLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-17T14:00:01.312Z', 'updatedAt': '2025-04-17T14:00:01.312Z', '__v': 0}, {'_id': '67ffb7e1ae2a00f5a022ab37', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67ffab43e7ace0e6413383e3', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'sickLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-16T14:00:01.371Z', 'updatedAt': '2025-04-16T14:00:01.371Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7913', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.229Z', 'updatedAt': '2025-04-15T14:00:01.229Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa06', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.243Z', 'updatedAt': '2025-04-14T14:00:01.243Z', '__v': 0}, {'_id': '67fc5001a430ce18705ee751', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T00:00:01.605Z', 'updatedAt': '2025-04-14T00:00:01.605Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2d1', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.429Z', 'updatedAt': '2025-04-12T14:00:01.429Z', '__v': 0}, {'_id': '67f92061edee8995f5ee942a', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.543Z', 'updatedAt': '2025-04-11T14:00:01.543Z', '__v': 0}, {'_id': '67f7cee3879f5a4a56eee04c', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-10T14:00:03.256Z', 'updatedAt': '2025-04-10T14:00:03.256Z', '__v': 0}, {'_id': '67f67d632f294c6b4ef62649', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-09T14:00:03.097Z', 'updatedAt': '2025-04-09T14:00:03.097Z', '__v': 0}, {'_id': '67f52be2cca6b0c13574ee47', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-08T14:00:02.589Z', 'updatedAt': '2025-04-08T14:00:02.589Z', '__v': 0}, {'_id': '67f3da6245a0b733d74cb546', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-07T14:00:02.732Z', 'updatedAt': '2025-04-07T14:00:02.732Z', '__v': 0}, {'_id': '67f31581999f16b8a24d4e99', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-07T00:00:01.534Z', 'updatedAt': '2025-04-07T00:00:01.534Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4571', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.254Z', 'updatedAt': '2025-04-05T14:00:03.254Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9519', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.414Z', 'updatedAt': '2025-04-04T14:00:01.414Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f7e', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.093Z', 'updatedAt': '2025-04-03T14:00:02.093Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2e', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.384Z', 'updatedAt': '2025-04-02T14:00:01.384Z', '__v': 0}], 'totalRecords': 24, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:13:54,635 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b956244f7033e58fa7944', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'fullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.108Z', 'updatedAt': '2025-04-25T14:00:02.108Z', '__v': 0}, {'_id': '680a43e2e7e94af813bc75d1', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'fullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-24T14:00:02.143Z', 'updatedAt': '2025-04-24T14:00:02.143Z', '__v': 0}, {'_id': '6808b0842dc875d8ce014542', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': '', 'totalHoursWorked': 3434, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [{'startTime': '2025-04-23T10:13:20.000Z', 'endTime': '2025-04-23T10:13:52.000Z', 'durationMinutes': 0}], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '680741e1c60b619007b0219f', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T09:19:00.729Z', 'updatedAt': '2025-04-23T10:13:55.660Z', '__v': 0}, {'_id': '6806dc01c60b619007b02094', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '680615419e84b3dda84cbfc4', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-22T00:00:01.579Z', 'updatedAt': '2025-04-22T00:00:01.579Z', '__v': 0}, {'_id': '68058a814ce909a136389fe9', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6803ab274ce909a1363893c6', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-21T00:00:01.595Z', 'updatedAt': '2025-04-21T00:00:01.595Z', '__v': 0}, {'_id': '68034c46a7f360a4cab8874d', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:18.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:09:58.316Z', 'updatedAt': '2025-04-19T07:09:58.316Z', '__v': 0}, {'_id': '68034c46a7f360a4cab88749', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:18.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:09:58.072Z', 'updatedAt': '2025-04-19T07:09:58.072Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f36', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67ffab43e7ace0e6413383e3', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'sickLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-18T14:00:01.319Z', 'updatedAt': '2025-04-18T14:00:01.319Z', '__v': 0}, {'_id': '68010961a7f360a4cab869ae', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67ffab43e7ace0e6413383e3', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'sickLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-17T14:00:01.312Z', 'updatedAt': '2025-04-17T14:00:01.312Z', '__v': 0}, {'_id': '67ffb7e1ae2a00f5a022ab37', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67ffab43e7ace0e6413383e3', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'sickLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-16T14:00:01.371Z', 'updatedAt': '2025-04-16T14:00:01.371Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7913', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.229Z', 'updatedAt': '2025-04-15T14:00:01.229Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa06', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.243Z', 'updatedAt': '2025-04-14T14:00:01.243Z', '__v': 0}, {'_id': '67fc5001a430ce18705ee751', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T00:00:01.605Z', 'updatedAt': '2025-04-14T00:00:01.605Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2d1', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.429Z', 'updatedAt': '2025-04-12T14:00:01.429Z', '__v': 0}, {'_id': '67f92061edee8995f5ee942a', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.543Z', 'updatedAt': '2025-04-11T14:00:01.543Z', '__v': 0}, {'_id': '67f7cee3879f5a4a56eee04c', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-10T14:00:03.256Z', 'updatedAt': '2025-04-10T14:00:03.256Z', '__v': 0}, {'_id': '67f67d632f294c6b4ef62649', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-09T14:00:03.097Z', 'updatedAt': '2025-04-09T14:00:03.097Z', '__v': 0}, {'_id': '67f52be2cca6b0c13574ee47', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-08T14:00:02.589Z', 'updatedAt': '2025-04-08T14:00:02.589Z', '__v': 0}, {'_id': '67f3da6245a0b733d74cb546', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-07T14:00:02.732Z', 'updatedAt': '2025-04-07T14:00:02.732Z', '__v': 0}, {'_id': '67f31581999f16b8a24d4e99', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-07T00:00:01.534Z', 'updatedAt': '2025-04-07T00:00:01.534Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4571', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.254Z', 'updatedAt': '2025-04-05T14:00:03.254Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9519', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.414Z', 'updatedAt': '2025-04-04T14:00:01.414Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f7e', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.093Z', 'updatedAt': '2025-04-03T14:00:02.093Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2e', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.384Z', 'updatedAt': '2025-04-02T14:00:01.384Z', '__v': 0}], 'totalRecords': 24, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:13:54,636 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP109', 'date_type': 'this_month'}
2025-04-26 15:13:54,636 - hr_assistant - INFO - Fetching personal attendance for employee: EMP109 (date_type: this_month)
2025-04-26 15:13:54,637 - hr_assistant - INFO - Attempting login for user: EMP109
2025-04-26 15:13:56,178 - hr_assistant - INFO - Login successful for user: EMP109
2025-04-26 15:13:56,179 - hr_assistant - INFO - Requesting employee data for: EMP109
2025-04-26 15:13:57,111 - hr_assistant - INFO - Retrieved employee data: {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L1', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 15:13:57,111 - hr_assistant - INFO - Successfully retrieved data for employee: EMP109
2025-04-26 15:13:57,114 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66fa8471a8adc4a2c26c058e/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 15:13:58,225 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680c89c944f7033e58fa825e', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:22:09.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:22:49.174Z', 'updatedAt': '2025-04-26T07:22:49.174Z', '__v': 0}, {'_id': '680b956144f7033e58fa7937', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.940Z', 'updatedAt': '2025-04-25T14:00:01.940Z', '__v': 0}, {'_id': '680962e13f1d136990980d4f', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': '2025-04-24T06:43:52.000Z', 'totalHoursWorked': 9, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T22:00:01.205Z', 'updatedAt': '2025-04-24T06:44:31.119Z', '__v': 0}, {'_id': '68064f61c60b619007b01d44', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.242Z', 'updatedAt': '2025-04-21T14:00:01.242Z', '__v': 0}, {'_id': '68058a814ce909a136389fe7', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T00:00:01.408Z', 'updatedAt': '2025-04-21T00:00:01.408Z', '__v': 0}, {'_id': '6802e781a7f360a4cab8848d', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-19T00:00:01.408Z', 'updatedAt': '2025-04-19T00:00:01.408Z', '__v': 0}, {'_id': '6800c054839df5d8ac012cf0', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T08:47:41.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 308, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-17T09:34:24.000Z', 'endTime': '2025-04-17T09:38:47.000Z', 'durationMinutes': 4}], 'breakTime': 4, 'lateMinutes': 212, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T08:48:20.560Z', 'updatedAt': '2025-04-17T14:00:00.743Z', '__v': 0}, {'_id': '67ff9e8e057e1559de78b7eb', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T12:11:20.000Z', 'clockOutTime': '2025-04-16T14:00:00.000Z', 'totalHoursWorked': 108, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 416, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-16T12:11:58.527Z', 'updatedAt': '2025-04-16T14:00:00.779Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b790f', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.223Z', 'updatedAt': '2025-04-15T14:00:01.223Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa0d', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.276Z', 'updatedAt': '2025-04-14T14:00:01.276Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c9', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.243Z', 'updatedAt': '2025-04-12T14:00:01.243Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9423', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.396Z', 'updatedAt': '2025-04-11T14:00:01.396Z', '__v': 0}, {'_id': '67f7cee3879f5a4a56eee089', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67f6dc732f294c6b4ef6285c', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-10T14:00:03.955Z', 'updatedAt': '2025-04-10T14:00:03.955Z', '__v': 0}, {'_id': '67f67d632f294c6b4ef6267e', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-09T14:00:03.694Z', 'updatedAt': '2025-04-09T14:00:03.694Z', '__v': 0}, {'_id': '67f52be2cca6b0c13574ee55', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-08T14:00:02.733Z', 'updatedAt': '2025-04-08T14:00:02.733Z', '__v': 0}, {'_id': '67f3da6245a0b733d74cb549', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-07T14:00:02.752Z', 'updatedAt': '2025-04-07T14:00:02.752Z', '__v': 0}, {'_id': '67f13763999f16b8a24d456f', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.235Z', 'updatedAt': '2025-04-05T14:00:03.235Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9505', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.207Z', 'updatedAt': '2025-04-04T14:00:01.207Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f98', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.677Z', 'updatedAt': '2025-04-03T14:00:02.677Z', '__v': 0}, {'_id': '67ecfa9f4ce37dc4dab29e72', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': '2025-04-02T08:51:41.000Z', 'clockOutTime': '2025-04-02T08:54:13.000Z', 'totalHoursWorked': 1, 'location': 'biometric', 'status': 'Half', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 216, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 245, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-02T08:51:43.054Z', 'updatedAt': '2025-04-02T20:00:01.273Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c5b', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.302Z', 'updatedAt': '2025-04-01T14:00:01.302Z', '__v': 0}], 'totalRecords': 21, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:13:58,229 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680c89c944f7033e58fa825e', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': '2025-04-26T07:22:09.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-26T07:22:49.174Z', 'updatedAt': '2025-04-26T07:22:49.174Z', '__v': 0}, {'_id': '680b956144f7033e58fa7937', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.940Z', 'updatedAt': '2025-04-25T14:00:01.940Z', '__v': 0}, {'_id': '680962e13f1d136990980d4f', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': '2025-04-24T06:43:52.000Z', 'totalHoursWorked': 9, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T22:00:01.205Z', 'updatedAt': '2025-04-24T06:44:31.119Z', '__v': 0}, {'_id': '68064f61c60b619007b01d44', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.242Z', 'updatedAt': '2025-04-21T14:00:01.242Z', '__v': 0}, {'_id': '68058a814ce909a136389fe7', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T00:00:01.408Z', 'updatedAt': '2025-04-21T00:00:01.408Z', '__v': 0}, {'_id': '6802e781a7f360a4cab8848d', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-19T00:00:01.408Z', 'updatedAt': '2025-04-19T00:00:01.408Z', '__v': 0}, {'_id': '6800c054839df5d8ac012cf0', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T08:47:41.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 308, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [{'startTime': '2025-04-17T09:34:24.000Z', 'endTime': '2025-04-17T09:38:47.000Z', 'durationMinutes': 4}], 'breakTime': 4, 'lateMinutes': 212, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T08:48:20.560Z', 'updatedAt': '2025-04-17T14:00:00.743Z', '__v': 0}, {'_id': '67ff9e8e057e1559de78b7eb', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T12:11:20.000Z', 'clockOutTime': '2025-04-16T14:00:00.000Z', 'totalHoursWorked': 108, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 416, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-16T12:11:58.527Z', 'updatedAt': '2025-04-16T14:00:00.779Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b790f', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.223Z', 'updatedAt': '2025-04-15T14:00:01.223Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa0d', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.276Z', 'updatedAt': '2025-04-14T14:00:01.276Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c9', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.243Z', 'updatedAt': '2025-04-12T14:00:01.243Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9423', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.396Z', 'updatedAt': '2025-04-11T14:00:01.396Z', '__v': 0}, {'_id': '67f7cee3879f5a4a56eee089', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67f6dc732f294c6b4ef6285c', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-10T14:00:03.955Z', 'updatedAt': '2025-04-10T14:00:03.955Z', '__v': 0}, {'_id': '67f67d632f294c6b4ef6267e', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-09T14:00:03.694Z', 'updatedAt': '2025-04-09T14:00:03.694Z', '__v': 0}, {'_id': '67f52be2cca6b0c13574ee55', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-08T14:00:02.733Z', 'updatedAt': '2025-04-08T14:00:02.733Z', '__v': 0}, {'_id': '67f3da6245a0b733d74cb549', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-07T14:00:02.752Z', 'updatedAt': '2025-04-07T14:00:02.752Z', '__v': 0}, {'_id': '67f13763999f16b8a24d456f', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.235Z', 'updatedAt': '2025-04-05T14:00:03.235Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9505', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.207Z', 'updatedAt': '2025-04-04T14:00:01.207Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f98', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.677Z', 'updatedAt': '2025-04-03T14:00:02.677Z', '__v': 0}, {'_id': '67ecfa9f4ce37dc4dab29e72', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': '2025-04-02T08:51:41.000Z', 'clockOutTime': '2025-04-02T08:54:13.000Z', 'totalHoursWorked': 1, 'location': 'biometric', 'status': 'Half', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 216, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 245, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-02T08:51:43.054Z', 'updatedAt': '2025-04-02T20:00:01.273Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c5b', 'employeeId': '66fa8471a8adc4a2c26c058e', 'empId': 'EMP109', 'name': 'Danial Rana', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.302Z', 'updatedAt': '2025-04-01T14:00:01.302Z', '__v': 0}], 'totalRecords': 21, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:13:58,231 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP121', 'date_type': 'this_month'}
2025-04-26 15:13:58,231 - hr_assistant - INFO - Fetching personal attendance for employee: EMP121 (date_type: this_month)
2025-04-26 15:13:58,231 - hr_assistant - INFO - Attempting login for user: EMP121
2025-04-26 15:13:59,864 - hr_assistant - INFO - Login successful for user: EMP121
2025-04-26 15:13:59,866 - hr_assistant - INFO - Requesting employee data for: EMP121
2025-04-26 15:14:00,901 - hr_assistant - INFO - Retrieved employee data: {'_id': '680627695993fc1ee4c4f793', 'userName': 'shaan Naseer', 'password': '123456', 'email': [{'personalEmail': 'amad@nastecsol.com', 'workEmail': 'shan@gmail.com'}], 'firstName': 'shaan', 'middleName': '', 'lastName': 'shaan second name ', 'martialStatus': 'Married', 'religion': 'Islam', 'address': {'streetAddress': 'Commercial Market Setellite Town Raqalpindi Pakistan', 'city': 'DHA', 'country': 'Pakistan'}, 'NIC': '234234234', 'iqamaNumber': {'id': '234234244', 'issueDate': '', 'expiryDate': ''}, 'passport': {'id': '324542', 'issueDate': '2025-04-21', 'expiryDate': '2025-05-10'}, 'imigrationSatus': 'national', 'DOB': '1998-02-21', 'age': 27, 'phoneNumber': [{'mobileNumber': '+928787999', 'landlineNumber': 'null'}], 'gender': 'Male', 'role': 'developer', 'profession': 'IT', 'nationality': 'Pakistan', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1481.jpeg', 'familyInfo': {'fatherName': 'father', 'motherName': 'mother', 'familyAddress': {'streetAddress': 'null', 'city': 'DHA Rawalpindi', 'country': 'p'}, 'familyContactNumber': '2342424234234', 'emergencyContactInfo': [{'relationName': 'gsdfgsfg', 'relationType': 'dsfsdfgdg', 'relationContactNumber': '23424242442', 'relationAddress': 'Commercial Market Setellite Town Raqalpindi Pakistan'}]}, 'educationInfo': [{'degreeName': 'bscs', 'degreeType': 'esdfs', 'fieldofStudy': 'sesdg', 'institute': 'gsdfgsdfg', 'from': '2025-04-21', 'to': '2025-04-21', 'results': 'dsfgsdfg'}], 'experienceBackground': [{'jobTitle': '', 'company': '', 'referenceName': '', 'referenceContact': '', 'duration': '', 'from': '', 'to': '', 'description': ''}], 'bankingInfo': [{'title': '', 'accountNumber': '', 'branchCode': '', 'accountType': '', 'country': '', 'empSwiftCode': '', 'bankName': ''}], 'employeeInfo': [{'depId': '', 'depName': 'IT', 'jobTitle': '', 'jobDescription': '', 'reportingManager': 'NASAR', 'jobRank': '', 'designation': 'employee', 'grade': 'L3', 'workDomain': '', 'location': 'Islamabad', 'employeeStatus': 'offboarded', 'employeeType': 'Permanent', 'employeeShift': 'FullTime', 'joiningDate': '2025-04-21', 'leavingDate': '', 'hiringDate': '2025-04-21', 'noticePeriod': '', 'empId': 'EMP121'}], 'salaryInfo': {'baseSalary': 2000, 'currency': 'SAR', 'timeCycle_Period': '', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '', 'netSalary': ''}, 'socialLinks': [], 'loanInfo': [{'totalLoanAmount': 100, 'loanIssueDate': '2025-04-21T12:43:54.958Z', 'loanDuration': 1, 'installmentAmount': '100.00', 'paidAmount': 100, 'totalInstallments': 1, 'paidInstallments': 0}], 'assetsInfo': [], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '33.57223190281576|73.14783367927708', 'lastLocation': '33.57219844746315,73.14750090442337|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-23T09:27:07.430Z'}, 'contractInfo': [{'contractId': '', 'contractStatus': '', 'contractType': 'Permanent', 'contractStartDate': '2025-04-21', 'contractExpiry': '', 'probabtionStartDate': '2025-04-21', 'probationPeriod': '3months ', 'probationstatus': ''}], 'documentsInfo': [], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', 'createdAt': '2025-04-21T11:09:29.450Z', 'updatedAt': '2025-04-23T20:00:00.769Z', '__v': 1, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 1.6666666666666667, 'remaining': 1.6666666666666667, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1171}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}}}
2025-04-26 15:14:00,901 - hr_assistant - INFO - Successfully retrieved data for employee: EMP121
2025-04-26 15:14:00,903 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/680627695993fc1ee4c4f793/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 15:14:01,997 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956244f7033e58fa7942', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6808bbc15bdf53dfc1c477cb', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.092Z', 'updatedAt': '2025-04-25T14:00:02.092Z', '__v': 0}, {'_id': '680a43e2e7e94af813bc75cc', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6808bbc15bdf53dfc1c477cb', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-24T14:00:02.042Z', 'updatedAt': '2025-04-24T14:00:02.042Z', '__v': 0}, {'_id': '6808a20b6a3f0d53693682d2', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:17:12.000Z', 'clockOutTime': '2025-04-23T09:12:14.000Z', 'totalHoursWorked': 99, 'location': 'biometric', 'status': 'Half', 'breaksTaken': [{'startTime': '2025-04-23T08:22:45.000Z', 'endTime': '2025-04-23T08:24:20.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 182, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 227, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-23T08:17:15.914Z', 'updatedAt': '2025-04-23T20:00:00.414Z', '__v': 0}, {'_id': '6807a0e16a3f0d5369367cfd', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '68063f88c60b619007b0177d', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-22T14:00:01.867Z', 'updatedAt': '2025-04-22T14:00:01.867Z', '__v': 0}, {'_id': '68064f61c60b619007b01d4a', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.255Z', 'updatedAt': '2025-04-21T14:00:01.255Z', '__v': 0}], 'totalRecords': 5, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 15:14:02,000 - hr_assistant - INFO - inititiating formatting PERSONAL response data{'data': [{'_id': '680b956244f7033e58fa7942', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6808bbc15bdf53dfc1c477cb', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.092Z', 'updatedAt': '2025-04-25T14:00:02.092Z', '__v': 0}, {'_id': '680a43e2e7e94af813bc75cc', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6808bbc15bdf53dfc1c477cb', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-24T14:00:02.042Z', 'updatedAt': '2025-04-24T14:00:02.042Z', '__v': 0}, {'_id': '6808a20b6a3f0d53693682d2', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:17:12.000Z', 'clockOutTime': '2025-04-23T09:12:14.000Z', 'totalHoursWorked': 99, 'location': 'biometric', 'status': 'Half', 'breaksTaken': [{'startTime': '2025-04-23T08:22:45.000Z', 'endTime': '2025-04-23T08:24:20.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 182, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 227, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-23T08:17:15.914Z', 'updatedAt': '2025-04-23T20:00:00.414Z', '__v': 0}, {'_id': '6807a0e16a3f0d5369367cfd', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '68063f88c60b619007b0177d', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-22T14:00:01.867Z', 'updatedAt': '2025-04-22T14:00:01.867Z', '__v': 0}, {'_id': '68064f61c60b619007b01d4a', 'employeeId': '680627695993fc1ee4c4f793', 'empId': 'EMP121', 'name': 'shaan Naseer', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.255Z', 'updatedAt': '2025-04-21T14:00:01.255Z', '__v': 0}], 'totalRecords': 5, 'page': 0, 'limit': 50, 'totalPages': 1}
2025-04-26 15:14:03,931 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:14:05,496 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:14:07,329 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:14:09,402 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:14:11,440 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:14:12,924 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:14:14,945 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:14:16,472 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:14:18,001 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:14:19,460 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/runs/run_uSjIPVci6xfFRv2hAdSE9FnY "HTTP/1.1 200 OK"
2025-04-26 15:14:19,934 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eiKaDiEcZPaLpDbYVH6lJ6ni/messages "HTTP/1.1 200 OK"
2025-04-26 15:24:26,401 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 15:27:58,247 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 15:28:07,119 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:28:07,119 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-26 15:28:07,120 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 15:28:07,120 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-26 15:28:09,271 - hr_assistant - INFO - Login successful for user: EMP101
2025-04-26 15:28:10,175 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 15:28:10,175 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-04-26 15:28:10,177 - hr_assistant - INFO - Sending initial greeting to employee: EMP101
2025-04-26 15:28:14,855 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:28:14,855 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 15:28:14,856 - hr_assistant - INFO - Processing query for employee EMP101: Show my team's attendance for this month
2025-04-26 15:28:14,856 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 15:28:16,376 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 15:28:16,645 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 15:28:16,646 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-04-26 15:28:17,654 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 15:28:18,874 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/messages "HTTP/1.1 200 OK"
2025-04-26 15:28:20,869 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs "HTTP/1.1 200 OK"
2025-04-26 15:28:21,448 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:23,939 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:26,473 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:26,475 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 15:28:26,475 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-26 15:28:26,475 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-26 15:28:27,998 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-26 15:28:28,000 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 15:28:28,000 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-26 15:28:28,985 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 15:28:28,986 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-26 15:28:28,988 - hr_assistant - ERROR - Error executing function get_team_attendance: 'NoneType' object has no attribute 'get'
2025-04-26 15:28:29,993 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:28:32,499 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:32,501 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP101'}
2025-04-26 15:28:32,501 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 15:28:32,501 - hr_assistant - INFO - Using cached employee data for: EMP101
2025-04-26 15:28:34,075 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:28:36,526 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:36,527 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 15:28:36,527 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-04-26 15:28:36,527 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-04-26 15:28:36,528 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -1381}}, 'updatedAt': '2025-04-25T12:44:11.089Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-26 15:28:36,529 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-04-26 15:28:37,451 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-04-26 15:28:37,453 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 15:28:38,966 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-04-26 15:28:40,374 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 15:28:42,862 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:45,425 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:47,969 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:51,143 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:53,636 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:56,082 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:58,529 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/runs/run_Vsagg1weQd5NiUdJYn06uDoP "HTTP/1.1 200 OK"
2025-04-26 15:28:58,880 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2EQaUg7fN4g1EJqN0iYcm7hF/messages "HTTP/1.1 200 OK"
2025-04-26 15:32:05,464 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 15:32:10,851 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 15:32:17,924 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:32:17,924 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-26 15:32:17,924 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 15:32:17,925 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-26 15:32:19,369 - hr_assistant - INFO - Login successful for user: EMP101
2025-04-26 15:32:20,293 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 15:32:20,294 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-04-26 15:32:20,295 - hr_assistant - INFO - Sending initial greeting to employee: EMP101
2025-04-26 15:32:25,594 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:32:25,595 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 15:32:25,595 - hr_assistant - INFO - Processing query for employee EMP101: Show my team's attendance for this month
2025-04-26 15:32:25,595 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 15:32:28,343 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 15:32:28,615 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 15:32:28,615 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-04-26 15:32:29,081 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 15:32:30,138 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bH9s9Fx1KsvR9Af2oJ3dXpQf/messages "HTTP/1.1 200 OK"
2025-04-26 15:32:32,008 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_bH9s9Fx1KsvR9Af2oJ3dXpQf/runs "HTTP/1.1 200 OK"
2025-04-26 15:32:32,525 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bH9s9Fx1KsvR9Af2oJ3dXpQf/runs/run_xZL9TpmA3bfYxWExBjNrvtda "HTTP/1.1 200 OK"
2025-04-26 15:32:35,992 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_bH9s9Fx1KsvR9Af2oJ3dXpQf/runs/run_xZL9TpmA3bfYxWExBjNrvtda "HTTP/1.1 200 OK"
2025-04-26 15:32:35,994 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-26 15:32:35,994 - hr_assistant - ERROR - Error generating response: name 'authenticated_employee_id' is not defined
2025-04-26 15:48:40,632 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 15:48:46,993 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 15:49:16,390 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 15:49:24,901 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:49:24,901 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-26 15:49:24,901 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 15:49:24,901 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-26 15:49:27,130 - hr_assistant - INFO - Login successful for user: EMP101
2025-04-26 15:49:28,062 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 15:49:28,063 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-04-26 15:49:28,065 - hr_assistant - INFO - Sending initial greeting to employee: EMP101
2025-04-26 15:49:31,084 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:49:31,084 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 15:49:31,084 - hr_assistant - INFO - Processing query for employee EMP101: Show my team's attendance for this month
2025-04-26 15:49:31,085 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 15:49:32,245 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 15:49:32,506 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 15:49:32,507 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-04-26 15:49:33,670 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 15:49:34,194 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_ccfoY7vCQIiaiSAipriio0ei/messages "HTTP/1.1 200 OK"
2025-04-26 15:49:36,143 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_ccfoY7vCQIiaiSAipriio0ei/runs "HTTP/1.1 200 OK"
2025-04-26 15:49:36,607 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ccfoY7vCQIiaiSAipriio0ei/runs/run_efO9gzX2phepK1J01acwXOW5 "HTTP/1.1 200 OK"
2025-04-26 15:49:39,112 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ccfoY7vCQIiaiSAipriio0ei/runs/run_efO9gzX2phepK1J01acwXOW5 "HTTP/1.1 200 OK"
2025-04-26 15:49:39,114 - hr_assistant - ERROR - Error generating response: handle_tool_calls() takes 1 positional argument but 2 were given
2025-04-26 15:53:56,520 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 15:54:03,907 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:54:03,907 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-26 15:54:03,907 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 15:54:03,907 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-26 15:54:05,376 - hr_assistant - INFO - Login successful for user: EMP101
2025-04-26 15:54:06,381 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 15:54:06,382 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-04-26 15:54:06,383 - hr_assistant - INFO - Sending initial greeting to employee: EMP101
2025-04-26 15:54:09,573 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 15:54:09,573 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 15:54:09,573 - hr_assistant - INFO - Processing query for employee EMP101: Show my team's attendance for this month
2025-04-26 15:54:09,573 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 15:54:10,645 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 15:54:10,909 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 15:54:10,909 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-04-26 15:54:11,919 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 15:54:13,158 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_0kIZevuNxrcsd8utaRGjnnvu/messages "HTTP/1.1 200 OK"
2025-04-26 15:54:14,806 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_0kIZevuNxrcsd8utaRGjnnvu/runs "HTTP/1.1 200 OK"
2025-04-26 15:54:15,326 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0kIZevuNxrcsd8utaRGjnnvu/runs/run_9sa5unUw4oAugznNOLFpHURt "HTTP/1.1 200 OK"
2025-04-26 15:54:18,157 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_0kIZevuNxrcsd8utaRGjnnvu/runs/run_9sa5unUw4oAugznNOLFpHURt "HTTP/1.1 200 OK"
2025-04-26 15:54:18,160 - hr_assistant - ERROR - Error generating response: handle_tool_calls() takes 1 positional argument but 2 were given
2025-04-26 16:22:03,257 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 16:22:18,677 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 16:22:18,678 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-26 16:22:18,678 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 16:22:18,678 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-26 16:22:20,901 - hr_assistant - INFO - Login successful for user: EMP101
2025-04-26 16:22:21,818 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 16:22:21,819 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-04-26 16:22:21,820 - hr_assistant - INFO - Sending initial greeting to employee: EMP101
2025-04-26 16:22:28,510 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 16:22:28,510 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 16:22:28,511 - hr_assistant - INFO - Processing query for employee EMP101: Show my team's attendance for this month
2025-04-26 16:22:28,511 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 16:22:29,728 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 16:22:29,737 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 16:22:29,737 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-04-26 16:22:30,342 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 16:22:30,853 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_ZGM122TloybBIgHtyTfxz34O/messages "HTTP/1.1 200 OK"
2025-04-26 16:22:32,389 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_ZGM122TloybBIgHtyTfxz34O/runs "HTTP/1.1 200 OK"
2025-04-26 16:22:32,860 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ZGM122TloybBIgHtyTfxz34O/runs/run_nPsDDszZLJ07YgPZMxKwn5l2 "HTTP/1.1 200 OK"
2025-04-26 16:22:35,699 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_ZGM122TloybBIgHtyTfxz34O/runs/run_nPsDDszZLJ07YgPZMxKwn5l2 "HTTP/1.1 200 OK"
2025-04-26 16:22:35,701 - hr_assistant - ERROR - Error generating response: handle_tool_calls() takes 1 positional argument but 2 were given
2025-04-26 16:26:01,692 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 16:26:09,386 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 16:26:09,386 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-26 16:26:09,386 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 16:26:09,386 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-26 16:26:11,013 - hr_assistant - INFO - Login successful for user: EMP101
2025-04-26 16:26:12,046 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 16:26:12,047 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-04-26 16:26:12,048 - hr_assistant - INFO - Sending initial greeting to employee: EMP101
2025-04-26 16:26:28,137 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 16:26:28,138 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 16:26:28,138 - hr_assistant - INFO - Processing query for employee EMP101: Show my team's attendance for this month
2025-04-26 16:26:28,138 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 16:26:29,956 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 16:26:30,120 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 16:26:30,121 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-04-26 16:26:31,390 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 16:26:32,004 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/messages "HTTP/1.1 200 OK"
2025-04-26 16:26:33,603 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs "HTTP/1.1 200 OK"
2025-04-26 16:26:34,052 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_RX3EeudDaNXkDveuQUic56fd "HTTP/1.1 200 OK"
2025-04-26 16:26:36,509 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_RX3EeudDaNXkDveuQUic56fd "HTTP/1.1 200 OK"
2025-04-26 16:26:36,511 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP101', 'date_type': 'this_month'}
2025-04-26 16:26:36,511 - hr_assistant - INFO - Fetching team attendance for manager: EMP101 (date_type: this_month)
2025-04-26 16:26:36,512 - hr_assistant - INFO - Fetching team data for manager: EMP101
2025-04-26 16:26:36,512 - hr_assistant - INFO - cache data for manager {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 16:26:36,512 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/6711f83cbb8ea69acefdb5a4
2025-04-26 16:26:37,554 - hr_assistant - INFO - Successfully retrieved team data for manager EMP101 with 10 team members
2025-04-26 16:26:37,556 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a,66d825a399b629cbdb2e0f54,671a4dc5c67936eae80490cb,6803ae3f4ce909a1363894c1,6803bf914ce909a13638958c,6803ee1f4ce909a1363897ad,68075caa8428eafcbc43c1aa,68077a736a3f0d5369367749,68077b7d6a3f0d53693677ba,68077bc26a3f0d53693677db/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 16:26:39,280 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP101
2025-04-26 16:26:41,304 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_RX3EeudDaNXkDveuQUic56fd/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 16:26:44,320 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_RX3EeudDaNXkDveuQUic56fd "HTTP/1.1 200 OK"
2025-04-26 16:26:46,851 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_RX3EeudDaNXkDveuQUic56fd "HTTP/1.1 200 OK"
2025-04-26 16:26:49,408 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_RX3EeudDaNXkDveuQUic56fd "HTTP/1.1 200 OK"
2025-04-26 16:26:51,869 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_RX3EeudDaNXkDveuQUic56fd "HTTP/1.1 200 OK"
2025-04-26 16:26:54,531 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_RX3EeudDaNXkDveuQUic56fd "HTTP/1.1 200 OK"
2025-04-26 16:26:54,941 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/messages "HTTP/1.1 200 OK"
2025-04-26 16:27:26,937 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 16:27:26,938 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 16:27:26,938 - hr_assistant - INFO - Processing query for employee EMP101: Show my attendance this month
2025-04-26 16:27:28,290 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 16:27:28,583 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 16:27:29,654 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx "HTTP/1.1 200 OK"
2025-04-26 16:27:29,655 - hr_assistant - INFO - Using existing thread for employee EMP101: thread_PXRvdmdtByGAIxte73knVWMx
2025-04-26 16:27:30,659 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/messages "HTTP/1.1 200 OK"
2025-04-26 16:27:32,214 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs "HTTP/1.1 200 OK"
2025-04-26 16:27:32,726 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:35,185 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:35,187 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP101', 'date_type': 'this_month'}
2025-04-26 16:27:35,187 - hr_assistant - INFO - Fetching personal attendance for employee: EMP101 (date_type: this_month)
2025-04-26 16:27:35,187 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 16:27:36,522 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680b956244f7033e58fa7944', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'fullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:02.108Z', 'updatedAt': '2025-04-25T14:00:02.108Z', '__v': 0}, {'_id': '680a43e2e7e94af813bc75d1', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'fullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-24T14:00:02.143Z', 'updatedAt': '2025-04-24T14:00:02.143Z', '__v': 0}, {'_id': '6808b0842dc875d8ce014542', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': 'null', 'clockOutTime': '', 'totalHoursWorked': 3434, 'location': 'Unknown', 'status': 'leave', 'breaksTaken': [{'startTime': '2025-04-23T10:13:20.000Z', 'endTime': '2025-04-23T10:13:52.000Z', 'durationMinutes': 0}], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '680741e1c60b619007b0219f', 'status': 'approved', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-23T09:19:00.729Z', 'updatedAt': '2025-04-23T10:13:55.660Z', '__v': 0}, {'_id': '6806dc01c60b619007b02094', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '680615419e84b3dda84cbfc4', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'casualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-22T00:00:01.579Z', 'updatedAt': '2025-04-22T00:00:01.579Z', '__v': 0}, {'_id': '68058a814ce909a136389fe9', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '6803ab274ce909a1363893c6', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'annualLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-21T00:00:01.595Z', 'updatedAt': '2025-04-21T00:00:01.595Z', '__v': 0}, {'_id': '68034c46a7f360a4cab8874d', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:18.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:09:58.316Z', 'updatedAt': '2025-04-19T07:09:58.316Z', '__v': 0}, {'_id': '68034c46a7f360a4cab88749', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T07:09:18.000Z', 'clockOutTime': '', 'totalHoursWorked': 0, 'location': 'location', 'status': 'Present', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': ['null'], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 6, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-19T07:09:58.072Z', 'updatedAt': '2025-04-19T07:09:58.072Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f36', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67ffab43e7ace0e6413383e3', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'sickLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-18T14:00:01.319Z', 'updatedAt': '2025-04-18T14:00:01.319Z', '__v': 0}, {'_id': '68010961a7f360a4cab869ae', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67ffab43e7ace0e6413383e3', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'sickLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-17T14:00:01.312Z', 'updatedAt': '2025-04-17T14:00:01.312Z', '__v': 0}, {'_id': '67ffb7e1ae2a00f5a022ab37', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': {'requestId': '67ffab43e7ace0e6413383e3', 'status': 'pending', 'requestType': 'leaveRequest', 'subType': 'sickLeave'}, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'Pending leave request', 'createdAt': '2025-04-16T14:00:01.371Z', 'updatedAt': '2025-04-16T14:00:01.371Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7913', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.229Z', 'updatedAt': '2025-04-15T14:00:01.229Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa06', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.243Z', 'updatedAt': '2025-04-14T14:00:01.243Z', '__v': 0}, {'_id': '67fc5001a430ce18705ee751', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T00:00:01.605Z', 'updatedAt': '2025-04-14T00:00:01.605Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2d1', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.429Z', 'updatedAt': '2025-04-12T14:00:01.429Z', '__v': 0}, {'_id': '67f92061edee8995f5ee942a', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.543Z', 'updatedAt': '2025-04-11T14:00:01.543Z', '__v': 0}, {'_id': '67f7cee3879f5a4a56eee04c', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-10', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-10T14:00:03.256Z', 'updatedAt': '2025-04-10T14:00:03.256Z', '__v': 0}, {'_id': '67f67d632f294c6b4ef62649', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-09', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-09T14:00:03.097Z', 'updatedAt': '2025-04-09T14:00:03.097Z', '__v': 0}, {'_id': '67f52be2cca6b0c13574ee47', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-08', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-08T14:00:02.589Z', 'updatedAt': '2025-04-08T14:00:02.589Z', '__v': 0}, {'_id': '67f3da6245a0b733d74cb546', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-07T14:00:02.732Z', 'updatedAt': '2025-04-07T14:00:02.732Z', '__v': 0}, {'_id': '67f31581999f16b8a24d4e99', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-07', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-07T00:00:01.534Z', 'updatedAt': '2025-04-07T00:00:01.534Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4571', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.254Z', 'updatedAt': '2025-04-05T14:00:03.254Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b9519', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.414Z', 'updatedAt': '2025-04-04T14:00:01.414Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f7e', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.093Z', 'updatedAt': '2025-04-03T14:00:02.093Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2e', 'employeeId': '6711f83cbb8ea69acefdb5a4', 'empId': 'EMP101', 'name': 'Anns Mustafa', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'flexibleShift', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.384Z', 'updatedAt': '2025-04-02T14:00:01.384Z', '__v': 0}], 'totalRecords': 24, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-26 16:27:37,540 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 16:27:40,099 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:42,551 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:45,614 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:48,192 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:50,853 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:53,514 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:56,071 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:58,635 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_vUQebVM6DRWiACChpFuMxzge "HTTP/1.1 200 OK"
2025-04-26 16:27:59,043 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/messages "HTTP/1.1 200 OK"
2025-04-26 16:28:32,712 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 16:28:32,712 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 16:28:32,712 - hr_assistant - INFO - Processing query for employee EMP101: give my team attendance for today
2025-04-26 16:28:34,204 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 16:28:34,476 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 16:28:35,087 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx "HTTP/1.1 200 OK"
2025-04-26 16:28:35,088 - hr_assistant - INFO - Using existing thread for employee EMP101: thread_PXRvdmdtByGAIxte73knVWMx
2025-04-26 16:28:35,659 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/messages "HTTP/1.1 200 OK"
2025-04-26 16:28:36,728 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs "HTTP/1.1 200 OK"
2025-04-26 16:28:37,238 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_iYi3FHXsNQdLzISwFkB4RRdO "HTTP/1.1 200 OK"
2025-04-26 16:28:39,800 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_iYi3FHXsNQdLzISwFkB4RRdO "HTTP/1.1 200 OK"
2025-04-26 16:28:39,801 - hr_assistant - INFO - Processing tool call: get_my_team_attendance with args: {'employee_id': 'EMP101', 'date_type': 'today'}
2025-04-26 16:28:39,801 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-26 16:28:39,801 - hr_assistant - INFO - Using cached employee data for: EMP101
2025-04-26 16:28:41,317 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_iYi3FHXsNQdLzISwFkB4RRdO/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 16:28:44,413 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_iYi3FHXsNQdLzISwFkB4RRdO "HTTP/1.1 200 OK"
2025-04-26 16:28:44,825 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/messages "HTTP/1.1 200 OK"
2025-04-26 16:29:19,541 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-26 16:29:19,541 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-04-26 16:29:19,541 - hr_assistant - INFO - Processing query for employee EMP101: get today's  attendance for my team
2025-04-26 16:29:20,626 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 16:29:20,887 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 16:29:21,325 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx "HTTP/1.1 200 OK"
2025-04-26 16:29:21,326 - hr_assistant - INFO - Using existing thread for employee EMP101: thread_PXRvdmdtByGAIxte73knVWMx
2025-04-26 16:29:21,851 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/messages "HTTP/1.1 200 OK"
2025-04-26 16:29:22,833 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs "HTTP/1.1 200 OK"
2025-04-26 16:29:23,365 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_7STOAe07Qkc92UNtgC5JdQrv "HTTP/1.1 200 OK"
2025-04-26 16:29:25,874 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_7STOAe07Qkc92UNtgC5JdQrv "HTTP/1.1 200 OK"
2025-04-26 16:29:25,876 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP101', 'date_type': 'today'}
2025-04-26 16:29:25,876 - hr_assistant - INFO - Fetching team attendance for manager: EMP101 (date_type: today)
2025-04-26 16:29:25,876 - hr_assistant - INFO - Fetching team data for manager: EMP101
2025-04-26 16:29:25,876 - hr_assistant - INFO - cache data for manager {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '123456', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 0, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-04-23T10:48:25.920Z'}
2025-04-26 16:29:25,877 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/6711f83cbb8ea69acefdb5a4
2025-04-26 16:29:26,928 - hr_assistant - INFO - Successfully retrieved team data for manager EMP101 with 10 team members
2025-04-26 16:29:26,929 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a,66d825a399b629cbdb2e0f54,671a4dc5c67936eae80490cb,6803ae3f4ce909a1363894c1,6803bf914ce909a13638958c,6803ee1f4ce909a1363897ad,68075caa8428eafcbc43c1aa,68077a736a3f0d5369367749,68077b7d6a3f0d53693677ba,68077bc26a3f0d53693677db/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 16:29:28,049 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP101
2025-04-26 16:29:29,278 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_7STOAe07Qkc92UNtgC5JdQrv/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 16:29:31,673 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_7STOAe07Qkc92UNtgC5JdQrv "HTTP/1.1 200 OK"
2025-04-26 16:29:34,313 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_7STOAe07Qkc92UNtgC5JdQrv "HTTP/1.1 200 OK"
2025-04-26 16:29:36,771 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/runs/run_7STOAe07Qkc92UNtgC5JdQrv "HTTP/1.1 200 OK"
2025-04-26 16:29:37,181 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_PXRvdmdtByGAIxte73knVWMx/messages "HTTP/1.1 200 OK"
2025-04-26 16:30:40,190 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-26 16:30:52,447 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 16:30:52,447 - hr_assistant - INFO - Fetching fresh employee data for employee EMP109
2025-04-26 16:30:52,448 - hr_assistant - INFO - Requesting employee data for: EMP109
2025-04-26 16:30:52,448 - hr_assistant - INFO - Attempting login for user: EMP109
2025-04-26 16:30:53,982 - hr_assistant - INFO - Login successful for user: EMP109
2025-04-26 16:30:54,910 - hr_assistant - INFO - Retrieved employee data: {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L1', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 16:30:54,911 - hr_assistant - INFO - Successfully retrieved data for employee: EMP109
2025-04-26 16:30:54,913 - hr_assistant - INFO - Sending initial greeting to employee: EMP109
2025-04-26 16:30:58,547 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 16:30:58,547 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 16:30:58,547 - hr_assistant - INFO - Processing query for employee EMP109: Show my team's attendance for this month
2025-04-26 16:30:58,547 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-26 16:31:00,327 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 16:31:00,637 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 16:31:00,637 - hr_assistant - INFO - Creating new thread for employee EMP109
2025-04-26 16:31:01,061 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-26 16:31:02,116 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/messages "HTTP/1.1 200 OK"
2025-04-26 16:31:03,756 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs "HTTP/1.1 200 OK"
2025-04-26 16:31:04,276 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_zpnAznvgw21jN74pZUOnWFEa "HTTP/1.1 200 OK"
2025-04-26 16:31:06,882 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_zpnAznvgw21jN74pZUOnWFEa "HTTP/1.1 200 OK"
2025-04-26 16:31:06,884 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP109', 'date_type': 'this_month'}
2025-04-26 16:31:06,884 - hr_assistant - INFO - Fetching team attendance for manager: EMP109 (date_type: this_month)
2025-04-26 16:31:06,884 - hr_assistant - INFO - Fetching team data for manager: EMP109
2025-04-26 16:31:06,885 - hr_assistant - INFO - cache data for manager {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L1', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 16:31:06,885 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66fa8471a8adc4a2c26c058e
2025-04-26 16:31:07,864 - hr_assistant - INFO - Successfully retrieved team data for manager EMP109 with 6 team members
2025-04-26 16:31:07,866 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4d3ac67936eae804909a,671a4e6fc67936eae8049103,671a4efdc67936eae8049126,66d8250f99b629cbdb2e0f3a,66d825a399b629cbdb2e0f54,671a4dc5c67936eae80490cb/2025-04-26/2025-04-01?page=0&limit=50
2025-04-26 16:31:09,434 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP109
2025-04-26 16:31:10,762 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_zpnAznvgw21jN74pZUOnWFEa/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 16:31:13,845 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_zpnAznvgw21jN74pZUOnWFEa "HTTP/1.1 200 OK"
2025-04-26 16:31:16,291 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_zpnAznvgw21jN74pZUOnWFEa "HTTP/1.1 200 OK"
2025-04-26 16:31:18,862 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_zpnAznvgw21jN74pZUOnWFEa "HTTP/1.1 200 OK"
2025-04-26 16:31:22,551 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_zpnAznvgw21jN74pZUOnWFEa "HTTP/1.1 200 OK"
2025-04-26 16:31:22,892 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/messages "HTTP/1.1 200 OK"
2025-04-26 16:31:53,529 - hr_assistant - INFO - Chat request received for employee: EMP109
2025-04-26 16:31:53,530 - hr_assistant - INFO - Using cached employee data for employee EMP109
2025-04-26 16:31:53,530 - hr_assistant - INFO - Processing query for employee EMP109: Show my team's attendance for today
2025-04-26 16:31:54,093 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-26 16:31:54,363 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-26 16:31:54,804 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO "HTTP/1.1 200 OK"
2025-04-26 16:31:54,805 - hr_assistant - INFO - Using existing thread for employee EMP109: thread_EntfcDuBdskVtGuZoMPN44BO
2025-04-26 16:31:55,316 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/messages "HTTP/1.1 200 OK"
2025-04-26 16:31:56,479 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs "HTTP/1.1 200 OK"
2025-04-26 16:31:57,057 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_7pbVUgrUO3Gz0htLWdH6eJ8j "HTTP/1.1 200 OK"
2025-04-26 16:31:59,618 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_7pbVUgrUO3Gz0htLWdH6eJ8j "HTTP/1.1 200 OK"
2025-04-26 16:31:59,619 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP109', 'date_type': 'today'}
2025-04-26 16:31:59,619 - hr_assistant - INFO - Fetching team attendance for manager: EMP109 (date_type: today)
2025-04-26 16:31:59,619 - hr_assistant - INFO - Fetching team data for manager: EMP109
2025-04-26 16:31:59,620 - hr_assistant - INFO - cache data for manager {'_id': '66fa8471a8adc4a2c26c058e', 'userName': 'Danial Rana', 'password': '123456', 'email': [{'personalEmail': '', 'workEmail': 'danial@gmail.com'}], 'firstName': 'Danial', 'middleName': '', 'lastName': 'Rana', 'martialStatus': 'Single', 'religion': 'Muslim', 'address': {'streetAddress': 'street # 6', 'city': 'Islambad', 'country': 'Pakistan'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '', 'landlineNumber': 'null'}], 'gender': 'male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'pakistani', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1387.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L1', 'workDomain': 'Backend Development', 'location': 'Islamabad', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'flexibleShift', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP109'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'monthy', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': '', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': '', 'loanIssueDate': '', 'loanDuration': '', 'installmentAmount': '', 'paidAmount': '', 'totalInstallments': '', 'paidInstallments': ''}], 'assetsInfo': [{'assetName': None, 'assetId': None, 'assetType': None, 'issueDateFrom': '', 'issueDateTo': ''}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '0.0,0.0|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-22T17:43:15.558Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP101', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 2, 'leaveBalance': {'annualLeave': {'currentMonth': 'September', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 388}}, 'updatedAt': '2025-04-22T17:43:15.558Z'}
2025-04-26 16:31:59,620 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66fa8471a8adc4a2c26c058e
2025-04-26 16:32:00,651 - hr_assistant - INFO - Successfully retrieved team data for manager EMP109 with 6 team members
2025-04-26 16:32:00,654 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/671a4d3ac67936eae804909a,671a4e6fc67936eae8049103,671a4efdc67936eae8049126,66d8250f99b629cbdb2e0f3a,66d825a399b629cbdb2e0f54,671a4dc5c67936eae80490cb/2025-04-26/2025-04-26?page=0&limit=50
2025-04-26 16:32:01,869 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP109
2025-04-26 16:32:02,753 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_7pbVUgrUO3Gz0htLWdH6eJ8j/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-26 16:32:05,352 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_7pbVUgrUO3Gz0htLWdH6eJ8j "HTTP/1.1 200 OK"
2025-04-26 16:32:07,912 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/runs/run_7pbVUgrUO3Gz0htLWdH6eJ8j "HTTP/1.1 200 OK"
2025-04-26 16:32:08,282 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_EntfcDuBdskVtGuZoMPN44BO/messages "HTTP/1.1 200 OK"
2025-04-29 00:57:08,881 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-29 00:57:32,478 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-29 00:57:32,478 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-29 00:57:32,478 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-29 00:57:32,478 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-29 00:57:42,780 - hr_assistant - ERROR - Login error: HTTPSConnectionPool(host='dev.nashrms.com', port=443): Max retries exceeded with url: /api/employee/login (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x105a9b0e0>: Failed to resolve 'dev.nashrms.com' ([Errno 8] nodename nor servname provided, or not known)"))
2025-04-29 00:57:42,780 - hr_assistant - ERROR - Failed to get token for employee EMP103
2025-04-29 00:57:42,780 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-29 00:57:42,780 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-29 00:57:42,783 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-29 00:57:42,783 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-29 00:57:42,783 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-29 00:57:42,783 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-29 00:57:52,792 - hr_assistant - ERROR - Login error: HTTPSConnectionPool(host='dev.nashrms.com', port=443): Max retries exceeded with url: /api/employee/login (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x105ab7890>: Failed to resolve 'dev.nashrms.com' ([Errno 8] nodename nor servname provided, or not known)"))
2025-04-29 00:57:52,793 - hr_assistant - ERROR - Failed to get token for employee EMP103
2025-04-29 00:57:52,793 - hr_assistant - ERROR - Failed to get token for employee: EMP103
2025-04-29 00:57:52,793 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-29 00:58:41,079 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-29 00:59:23,007 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-29 00:59:23,007 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-29 00:59:23,007 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-29 00:59:23,007 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-29 00:59:33,511 - hr_assistant - ERROR - Login error: HTTPSConnectionPool(host='dev.nashrms.com', port=443): Max retries exceeded with url: /api/employee/login (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x108ef70e0>: Failed to resolve 'dev.nashrms.com' ([Errno 8] nodename nor servname provided, or not known)"))
2025-04-29 00:59:33,512 - hr_assistant - ERROR - Failed to get token for employee EMP101
2025-04-29 00:59:33,512 - hr_assistant - ERROR - Failed to get token for employee: EMP101
2025-04-29 00:59:33,512 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-29 00:59:33,514 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-04-29 00:59:33,514 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-04-29 00:59:33,514 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-04-29 00:59:33,514 - hr_assistant - INFO - Attempting login for user: EMP101
2025-04-29 00:59:43,839 - hr_assistant - ERROR - Login error: HTTPSConnectionPool(host='dev.nashrms.com', port=443): Max retries exceeded with url: /api/employee/login (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection object at 0x108f17890>: Failed to resolve 'dev.nashrms.com' ([Errno 8] nodename nor servname provided, or not known)"))
2025-04-29 00:59:43,839 - hr_assistant - ERROR - Failed to get token for employee EMP101
2025-04-29 00:59:43,839 - hr_assistant - ERROR - Failed to get token for employee: EMP101
2025-04-29 00:59:43,839 - hr_assistant - ERROR - Failed to get employee data: Authentication failed
2025-04-29 01:00:53,155 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-04-29 01:26:17,971 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-29 01:26:17,972 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-04-29 01:26:17,972 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-04-29 01:26:17,972 - hr_assistant - INFO - Attempting login for user: EMP103
2025-04-29 01:26:20,116 - hr_assistant - INFO - Login successful for user: EMP103
2025-04-29 01:26:21,065 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -11101}}, 'updatedAt': '2025-04-28T20:00:03.363Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-04-29 01:26:21,066 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-04-29 01:26:21,068 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-04-29 01:26:48,549 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-04-29 01:26:48,550 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-04-29 01:26:48,550 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-04-29 01:26:48,550 - hr_assistant - INFO - Initializing new OpenAI client
2025-04-29 01:26:50,874 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-04-29 01:26:51,162 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-04-29 01:26:51,162 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-04-29 01:26:52,414 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-04-29 01:26:53,407 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/messages "HTTP/1.1 200 OK"
2025-04-29 01:26:55,038 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs "HTTP/1.1 200 OK"
2025-04-29 01:26:55,652 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP "HTTP/1.1 200 OK"
2025-04-29 01:26:58,724 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP "HTTP/1.1 200 OK"
2025-04-29 01:26:58,726 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-04-29 01:26:58,726 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-04-29 01:26:58,726 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-04-29/2025-04-01?page=0&limit=50
2025-04-29 01:26:59,955 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '680f7105fc830943a5580433', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-28', 'clockInTime': '2025-04-28T12:13:54.000Z', 'clockOutTime': '2025-04-28T01:00:00.000Z', 'totalHoursWorked': -673, 'location': 'biometric', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 418, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 720, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-28T12:13:57.826Z', 'updatedAt': '2025-04-28T20:00:03.009Z', '__v': 0}, {'_id': '680cf4f25249b580faf00da7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-26', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-26T15:00:02.351Z', 'updatedAt': '2025-04-26T15:00:02.351Z', '__v': 0}, {'_id': '680b956144f7033e58fa7939', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-25', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-25T14:00:01.956Z', 'updatedAt': '2025-04-25T14:00:01.956Z', '__v': 0}, {'_id': '680a026e3f1d136990981d0e', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-24', 'clockInTime': '2025-04-24T09:20:09.000Z', 'clockOutTime': '2025-04-24T14:00:00.000Z', 'totalHoursWorked': 279, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-24T09:20:46.030Z', 'updatedAt': '2025-04-24T14:00:01.110Z', '__v': 0}, {'_id': '68089f1e6a3f0d5369368237', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-23', 'clockInTime': '2025-04-23T08:04:10.000Z', 'clockOutTime': '2025-04-23T14:00:00.000Z', 'totalHoursWorked': 355, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 169, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-23T08:04:46.343Z', 'updatedAt': '2025-04-23T14:00:01.054Z', '__v': 0}, {'_id': '68078b276a3f0d5369367a24', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-22', 'clockInTime': '2025-04-22T12:26:44.000Z', 'clockOutTime': '2025-04-22T12:37:21.000Z', 'totalHoursWorked': 10, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 431, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 22, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-22T12:27:19.747Z', 'updatedAt': '2025-04-22T23:00:00.364Z', '__v': 0}, {'_id': '68064f61c60b619007b01d46', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-21', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-21T14:00:01.244Z', 'updatedAt': '2025-04-21T14:00:01.244Z', '__v': 0}, {'_id': '68036af3a71e88f00e45a193', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-19', 'clockInTime': '2025-04-19T09:20:19.000Z', 'clockOutTime': '2025-04-19T09:40:58.000Z', 'totalHoursWorked': 20, 'location': 'location', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 245, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': 199, 'remarks': 'Early checkout detected and recorded', 'createdAt': '2025-04-19T09:20:51.954Z', 'updatedAt': '2025-04-19T21:00:00.371Z', '__v': 0}, {'_id': '68025ae1a7f360a4cab87f34', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-18', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-18T14:00:01.312Z', 'updatedAt': '2025-04-18T14:00:01.312Z', '__v': 0}, {'_id': '6800cd70b18e2838dd94f4c7', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-17', 'clockInTime': '2025-04-17T09:43:44.000Z', 'clockOutTime': '2025-04-17T14:00:00.000Z', 'totalHoursWorked': 256, 'location': 'location', 'status': 'Missing CheckIn/Out', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 268, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': 'Check-out time is missing Auto updated by system', 'createdAt': '2025-04-17T09:44:16.854Z', 'updatedAt': '2025-04-17T14:00:00.734Z', '__v': 0}, {'_id': '67ffa4f6e7ace0e6413380da', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-16', 'clockInTime': '2025-04-16T10:38:45.000Z', 'clockOutTime': '2025-04-16T13:32:47.000Z', 'totalHoursWorked': 334, 'location': 'location', 'status': 'Present', 'breaksTaken': [{'startTime': '2025-04-16T10:45:56.000Z', 'endTime': '2025-04-16T10:47:10.000Z', 'durationMinutes': 1}], 'breakTime': 1, 'lateMinutes': 323, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 8, 'earlyCheckOut': None, 'remarks': '', 'createdAt': '2025-04-16T12:39:18.452Z', 'updatedAt': '2025-04-16T13:33:18.210Z', '__v': 0}, {'_id': '67fe6661a7d48192fd9b7911', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-15', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-15T14:00:01.226Z', 'updatedAt': '2025-04-15T14:00:01.226Z', '__v': 0}, {'_id': '67fd14e13f8220b6bb17fa08', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-14', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-14T14:00:01.245Z', 'updatedAt': '2025-04-14T14:00:01.245Z', '__v': 0}, {'_id': '67fa71e1a430ce18705ee2c1', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-12', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-12T14:00:01.233Z', 'updatedAt': '2025-04-12T14:00:01.233Z', '__v': 0}, {'_id': '67f92061edee8995f5ee9420', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-11', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-11T14:00:01.280Z', 'updatedAt': '2025-04-11T14:00:01.280Z', '__v': 0}, {'_id': '67f13763999f16b8a24d4573', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-05', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-05T14:00:03.264Z', 'updatedAt': '2025-04-05T14:00:03.264Z', '__v': 0}, {'_id': '67efe5e149e7649ef26b950d', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-04', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-04T14:00:01.236Z', 'updatedAt': '2025-04-04T14:00:01.236Z', '__v': 0}, {'_id': '67ee946249e7649ef26b8f9b', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-03', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-03T14:00:02.787Z', 'updatedAt': '2025-04-03T14:00:02.787Z', '__v': 0}, {'_id': '67ed42e14ce37dc4dab29f2a', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-02T14:00:01.233Z', 'updatedAt': '2025-04-02T14:00:01.233Z', '__v': 0}, {'_id': '67ebf1614ce37dc4dab29c53', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '66cd76b107aed2eef86b88ef', 'branchId': '66cd76b107aed2eef86b88f1', 'date': '2025-04-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-04-01T14:00:01.295Z', 'updatedAt': '2025-04-01T14:00:01.295Z', '__v': 0}], 'totalRecords': 20, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-04-29 01:27:16,479 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP/submit_tool_outputs "HTTP/1.1 500 Internal Server Error"
2025-04-29 01:27:16,481 - openai._base_client - INFO - Retrying request to /threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP/submit_tool_outputs in 0.381658 seconds
2025-04-29 01:27:18,631 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP/submit_tool_outputs "HTTP/1.1 200 OK"
2025-04-29 01:27:21,355 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP "HTTP/1.1 200 OK"
2025-04-29 01:27:23,914 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP "HTTP/1.1 200 OK"
2025-04-29 01:27:26,678 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP "HTTP/1.1 200 OK"
2025-04-29 01:27:29,341 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP "HTTP/1.1 200 OK"
2025-04-29 01:27:31,901 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/runs/run_qfLwRbzGVDkXnYFxhFrYClYP "HTTP/1.1 200 OK"
2025-04-29 01:27:32,310 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_O4BZyGgfRiLdZSCwv0Gq6eTj/messages "HTTP/1.1 200 OK"
2025-05-01 13:29:36,563 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-01 13:29:54,107 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-01 13:29:54,107 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-01 13:29:54,107 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-01 13:29:54,107 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-01 13:29:56,317 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-01 13:29:57,891 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-01 13:29:57,892 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-01 13:29:57,894 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-01 13:30:09,106 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-01 13:30:09,106 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-01 13:30:09,106 - hr_assistant - INFO - Processing query for employee EMP103: Show my team's attendance for this month
2025-05-01 13:30:09,106 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-01 13:30:11,265 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-01 13:30:11,453 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-01 13:30:11,454 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-01 13:30:12,699 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-01 13:30:13,326 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_A0cQzsbC18z3j2s9y2jrOFbI/messages "HTTP/1.1 200 OK"
2025-05-01 13:30:15,769 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_A0cQzsbC18z3j2s9y2jrOFbI/runs "HTTP/1.1 200 OK"
2025-05-01 13:30:16,487 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A0cQzsbC18z3j2s9y2jrOFbI/runs/run_WcT47PxgW8JGzE1CFpaNGTAg "HTTP/1.1 200 OK"
2025-05-01 13:30:19,047 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A0cQzsbC18z3j2s9y2jrOFbI/runs/run_WcT47PxgW8JGzE1CFpaNGTAg "HTTP/1.1 200 OK"
2025-05-01 13:30:19,049 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-05-01 13:30:19,049 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-05-01 13:30:19,049 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-01 13:30:19,049 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-01 13:30:19,050 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-01 13:30:19,978 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-01 13:30:19,980 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-01/2025-05-01?page=0&limit=50
2025-05-01 13:30:21,203 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-01 13:30:22,118 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_A0cQzsbC18z3j2s9y2jrOFbI/runs/run_WcT47PxgW8JGzE1CFpaNGTAg/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-01 13:30:24,575 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A0cQzsbC18z3j2s9y2jrOFbI/runs/run_WcT47PxgW8JGzE1CFpaNGTAg "HTTP/1.1 200 OK"
2025-05-01 13:30:27,240 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A0cQzsbC18z3j2s9y2jrOFbI/runs/run_WcT47PxgW8JGzE1CFpaNGTAg "HTTP/1.1 200 OK"
2025-05-01 13:30:28,364 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_A0cQzsbC18z3j2s9y2jrOFbI/messages "HTTP/1.1 200 OK"
2025-05-01 13:39:10,131 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-01 15:24:56,658 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 14:48:58,441 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 14:51:36,235 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 14:51:36,236 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 14:51:36,236 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 14:51:36,236 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 14:51:38,495 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 14:51:39,413 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 14:51:39,414 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 14:51:39,416 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 14:54:08,051 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 14:54:08,051 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 14:54:08,051 - hr_assistant - INFO - Processing query for employee EMP103: get all companies attendance report
2025-05-02 14:54:08,051 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 14:54:10,290 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 14:54:10,658 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 14:54:10,658 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 14:54:11,188 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 14:54:12,523 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/messages "HTTP/1.1 200 OK"
2025-05-02 14:54:14,501 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs "HTTP/1.1 200 OK"
2025-05-02 14:54:14,950 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM "HTTP/1.1 200 OK"
2025-05-02 14:54:18,228 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM "HTTP/1.1 200 OK"
2025-05-02 14:54:18,230 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103'}
2025-05-02 14:54:18,231 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-05-02 14:54:18,231 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-02 14:54:18,231 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 14:54:18,232 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-02 14:54:19,275 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-02 14:54:19,277 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-02/2025-04-25?page=0&limit=50
2025-05-02 14:54:20,405 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-02 14:54:21,433 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 14:54:24,434 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM "HTTP/1.1 200 OK"
2025-05-02 14:54:26,965 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM "HTTP/1.1 200 OK"
2025-05-02 14:54:29,439 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM "HTTP/1.1 200 OK"
2025-05-02 14:54:31,937 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM "HTTP/1.1 200 OK"
2025-05-02 14:54:34,472 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM "HTTP/1.1 200 OK"
2025-05-02 14:54:37,068 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM "HTTP/1.1 200 OK"
2025-05-02 14:54:39,766 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/runs/run_kQsNSdfARrE7L7lzRfIe8jVM "HTTP/1.1 200 OK"
2025-05-02 14:54:40,250 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_T42wSjVOs7M73gRA4I1V4cru/messages "HTTP/1.1 200 OK"
2025-05-02 15:03:20,908 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 15:04:01,036 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 15:04:01,036 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 15:04:01,036 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 15:04:01,037 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 15:04:03,699 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 15:04:04,623 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 15:04:04,624 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 15:04:04,625 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 15:04:44,853 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 15:04:44,854 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 15:04:44,854 - hr_assistant - INFO - Processing query for employee EMP103: Get all companies attendance data for today
2025-05-02 15:04:44,854 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 15:04:46,680 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 15:04:46,687 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 15:04:46,687 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 15:04:47,127 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 15:04:48,139 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/messages "HTTP/1.1 200 OK"
2025-05-02 15:04:49,709 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs "HTTP/1.1 200 OK"
2025-05-02 15:04:50,712 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_MvJnjmyAOi00ZRclFP4BPnT0 "HTTP/1.1 200 OK"
2025-05-02 15:04:53,800 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_MvJnjmyAOi00ZRclFP4BPnT0 "HTTP/1.1 200 OK"
2025-05-02 15:04:53,803 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 15:04:53,803 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: today, include_team: None)
2025-05-02 15:04:53,803 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 15:04:53,803 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 15:04:53,803 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: True
2025-05-02 15:04:53,803 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-05-02 15:04:53,803 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-02 15:04:53,804 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 15:04:53,804 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-02 15:04:55,122 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-02 15:04:55,124 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-02/2025-05-02?page=0&limit=50
2025-05-02 15:04:56,249 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-02 15:04:57,730 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_MvJnjmyAOi00ZRclFP4BPnT0/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 15:05:00,217 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_MvJnjmyAOi00ZRclFP4BPnT0 "HTTP/1.1 200 OK"
2025-05-02 15:05:02,866 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_MvJnjmyAOi00ZRclFP4BPnT0 "HTTP/1.1 200 OK"
2025-05-02 15:05:03,230 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/messages "HTTP/1.1 200 OK"
2025-05-02 15:06:39,302 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 15:06:39,302 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 15:06:39,303 - hr_assistant - INFO - Processing query for employee EMP103: How many employees are absent in all companies?
2025-05-02 15:06:40,349 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 15:06:40,350 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 15:06:40,850 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn "HTTP/1.1 200 OK"
2025-05-02 15:06:40,851 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_GLnHd8eOQGGIbHjaGBB7QFYn
2025-05-02 15:06:41,938 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/messages "HTTP/1.1 200 OK"
2025-05-02 15:06:43,522 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs "HTTP/1.1 200 OK"
2025-05-02 15:06:44,034 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_Nir62LP5bcylqCOt00WMzLqq "HTTP/1.1 200 OK"
2025-05-02 15:06:46,546 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_Nir62LP5bcylqCOt00WMzLqq "HTTP/1.1 200 OK"
2025-05-02 15:06:46,548 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103'}
2025-05-02 15:06:46,548 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: recent, include_team: None)
2025-05-02 15:06:46,548 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 15:06:46,548 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 15:06:46,548 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: True
2025-05-02 15:06:46,549 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-05-02 15:06:46,549 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-02 15:06:46,549 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 15:06:46,549 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-02 15:06:47,469 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-02 15:06:47,471 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-02/2025-04-25?page=0&limit=50
2025-05-02 15:06:48,644 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-02 15:06:50,076 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_Nir62LP5bcylqCOt00WMzLqq/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 15:06:52,635 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_Nir62LP5bcylqCOt00WMzLqq "HTTP/1.1 200 OK"
2025-05-02 15:06:55,224 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/runs/run_Nir62LP5bcylqCOt00WMzLqq "HTTP/1.1 200 OK"
2025-05-02 15:06:55,713 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_GLnHd8eOQGGIbHjaGBB7QFYn/messages "HTTP/1.1 200 OK"
2025-05-02 15:55:28,446 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 15:56:33,951 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 15:56:41,156 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 15:56:41,157 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 15:56:41,157 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 15:56:41,157 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 15:56:43,436 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 15:56:44,369 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 15:56:44,370 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 15:56:44,371 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 15:57:03,293 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 15:57:03,293 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 15:57:03,293 - hr_assistant - INFO - Processing query for employee EMP103: Get all companies attendance data for today
2025-05-02 15:57:03,293 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 15:57:04,734 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 15:57:04,918 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 15:57:04,918 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 15:57:05,860 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 15:57:06,542 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q6zPmeLZcYILjGDadw2iBVSF/messages "HTTP/1.1 200 OK"
2025-05-02 15:57:06,790 - hr_assistant - ERROR - Error generating response: [Errno 2] No such file or directory: 'instructions.txt'
2025-05-02 16:04:52,286 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 16:05:02,947 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:05:02,947 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 16:05:02,947 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 16:05:02,947 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 16:05:04,412 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 16:05:05,338 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 16:05:05,339 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 16:05:05,341 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 16:05:13,815 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:05:13,815 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 16:05:13,815 - hr_assistant - INFO - Processing query for employee EMP103: Get all companies attendance data for today
2025-05-02 16:05:13,815 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 16:05:15,315 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 16:05:15,320 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 16:05:15,320 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 16:05:16,346 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 16:05:17,696 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q3MDAdpZlrcVpI5KyJvD5qwg/messages "HTTP/1.1 200 OK"
2025-05-02 16:05:17,924 - hr_assistant - ERROR - Error generating response: [Errno 2] No such file or directory: '/instructions.txt'
2025-05-02 16:06:07,352 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 16:06:11,813 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:06:11,813 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 16:06:11,813 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 16:06:11,813 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 16:06:13,381 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 16:06:14,417 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 16:06:14,418 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 16:06:14,420 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 16:06:17,898 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:06:17,898 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 16:06:17,898 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-05-02 16:06:17,898 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 16:06:19,140 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 16:06:19,193 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 16:06:19,194 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 16:06:19,833 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 16:06:20,550 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_xGiN5hoLAvbTr9tJhxjphGPS/messages "HTTP/1.1 200 OK"
2025-05-02 16:06:20,555 - hr_assistant - ERROR - Instructions file '/instructions.txt' not found.
2025-05-02 16:28:39,044 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 16:28:39,045 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 16:28:57,277 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:28:57,277 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 16:28:57,277 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 16:28:57,277 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 16:28:59,753 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 16:29:00,898 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 16:29:00,899 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 16:29:00,901 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 16:29:23,847 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:29:23,847 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 16:29:23,847 - hr_assistant - INFO - Processing query for employee EMP103: get all companies attendance for today
2025-05-02 16:29:23,847 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 16:29:25,661 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 16:29:25,760 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 16:29:25,760 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 16:29:26,484 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 16:29:28,110 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/messages "HTTP/1.1 200 OK"
2025-05-02 16:29:29,156 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/runs "HTTP/1.1 200 OK"
2025-05-02 16:29:30,414 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/runs/run_qgi7mSBpdH1hQTAteJp7vjX3 "HTTP/1.1 200 OK"
2025-05-02 16:29:33,074 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/runs/run_qgi7mSBpdH1hQTAteJp7vjX3 "HTTP/1.1 200 OK"
2025-05-02 16:29:33,077 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 16:29:33,077 - hr_assistant - ERROR - Error executing function get_attendance_report: 'HRService' object has no attribute 'get_attendance_report'
2025-05-02 16:29:34,266 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/runs/run_qgi7mSBpdH1hQTAteJp7vjX3/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 16:29:36,920 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/runs/run_qgi7mSBpdH1hQTAteJp7vjX3 "HTTP/1.1 200 OK"
2025-05-02 16:29:36,921 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 16:29:36,921 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: today, include_team: None)
2025-05-02 16:29:36,921 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 16:29:36,921 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 16:29:36,921 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: True
2025-05-02 16:29:36,921 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-05-02 16:29:36,922 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-02 16:29:36,922 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 16:29:36,922 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-02 16:29:38,158 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-02 16:29:38,159 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-02/2025-05-02?page=0&limit=50
2025-05-02 16:29:39,911 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-02 16:29:40,832 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/runs/run_qgi7mSBpdH1hQTAteJp7vjX3/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 16:29:43,545 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/runs/run_qgi7mSBpdH1hQTAteJp7vjX3 "HTTP/1.1 200 OK"
2025-05-02 16:29:46,344 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/runs/run_qgi7mSBpdH1hQTAteJp7vjX3 "HTTP/1.1 200 OK"
2025-05-02 16:29:46,858 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_LZKzCp5W1Cj5QoNx0zTIeRqO/messages "HTTP/1.1 200 OK"
2025-05-02 16:31:42,464 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 16:31:42,465 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 16:31:45,322 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:31:45,322 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 16:31:45,322 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 16:31:45,322 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 16:31:46,968 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 16:31:48,009 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 16:31:48,010 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 16:31:48,012 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 16:32:01,524 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:32:01,525 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 16:32:01,525 - hr_assistant - INFO - Processing query for employee EMP103: get all companies data
2025-05-02 16:32:01,525 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 16:32:02,578 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 16:32:02,847 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 16:32:02,848 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 16:32:03,351 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 16:32:03,965 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lFPVonfCVkg0ZYwqDNhqnaYH/messages "HTTP/1.1 200 OK"
2025-05-02 16:32:04,156 - hr_assistant - INFO -  Assistant_instructions for employee EMP103: 
        No need for formal greeting as we're already in a conversation.


        
        IMPORTANT CONTEXT:
        - The authenticated employee ID is: EMP103
        - Employee name: nasar ibrahim
        - Employee grade: 
        
        For attendance queries:
        1. If the user asks about "my attendance" or "my records", always use get_my_attendance or get_personal_attendance
        2. If the user is a manager (grade L0-L3) and asks about "team attendance" or "my team", use get_my_team_attendance or get_team_attendance
        3. Always use the authenticated employee's ID (EMP103) for all tool calls
        
        Provide clear, helpful information based on the employee data.
        If responding with attendance data, use the 'formatted_response' field in the tool output if available
        and present it as a structured list with bullet points.
        
2025-05-02 16:32:05,297 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lFPVonfCVkg0ZYwqDNhqnaYH/runs "HTTP/1.1 200 OK"
2025-05-02 16:32:05,899 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lFPVonfCVkg0ZYwqDNhqnaYH/runs/run_YcTxsKxQdCCnv3kK2XsF9Nqb "HTTP/1.1 200 OK"
2025-05-02 16:32:08,546 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lFPVonfCVkg0ZYwqDNhqnaYH/runs/run_YcTxsKxQdCCnv3kK2XsF9Nqb "HTTP/1.1 200 OK"
2025-05-02 16:32:08,560 - hr_assistant - INFO - Processing tool call: get_employee_data with args: {'employee_id': 'EMP103'}
2025-05-02 16:32:08,560 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 16:32:08,561 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 16:32:10,221 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lFPVonfCVkg0ZYwqDNhqnaYH/runs/run_YcTxsKxQdCCnv3kK2XsF9Nqb/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 16:32:12,703 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lFPVonfCVkg0ZYwqDNhqnaYH/runs/run_YcTxsKxQdCCnv3kK2XsF9Nqb "HTTP/1.1 200 OK"
2025-05-02 16:32:15,151 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lFPVonfCVkg0ZYwqDNhqnaYH/runs/run_YcTxsKxQdCCnv3kK2XsF9Nqb "HTTP/1.1 200 OK"
2025-05-02 16:32:15,506 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lFPVonfCVkg0ZYwqDNhqnaYH/messages "HTTP/1.1 200 OK"
2025-05-02 16:32:49,860 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 16:32:49,861 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 16:32:55,743 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 16:32:55,744 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 16:33:03,658 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:33:03,658 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 16:33:03,658 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 16:33:03,658 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 16:33:05,353 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 16:33:06,340 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 16:33:06,341 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 16:33:06,342 - hr_assistant - WARNING - Error extracting employee name: 'list' object has no attribute 'first'
2025-05-02 16:33:06,343 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 16:33:11,974 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:33:11,974 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 16:33:11,974 - hr_assistant - WARNING - Error extracting employee name: 'list' object has no attribute 'first'
2025-05-02 16:33:11,974 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-05-02 16:33:11,974 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 16:33:12,701 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 16:33:12,706 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 16:33:12,706 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 16:33:13,184 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 16:33:14,808 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_rK9m1UOzVCcNM19WmQDejGOA/messages "HTTP/1.1 200 OK"
2025-05-02 16:33:15,052 - hr_assistant - ERROR - Error generating response: cannot access local variable 'employee_grade' where it is not associated with a value
2025-05-02 16:35:06,614 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 16:35:06,614 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 16:35:14,615 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:35:14,615 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 16:35:14,615 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 16:35:14,615 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 16:35:16,205 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 16:35:17,341 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 16:35:17,342 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 16:35:17,344 - hr_assistant - WARNING - Error extracting employee name: 'list' object has no attribute 'first'
2025-05-02 16:35:17,344 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 16:35:38,814 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 16:35:38,815 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 16:35:48,548 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:35:48,548 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 16:35:48,548 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 16:35:48,548 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 16:35:50,105 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 16:35:51,018 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 16:35:51,019 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 16:35:51,021 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 16:35:54,581 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:35:54,581 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 16:35:54,581 - hr_assistant - INFO - Processing query for employee EMP103: Show my attendance this month
2025-05-02 16:35:54,581 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 16:35:56,050 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 16:35:56,287 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 16:35:56,287 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 16:35:56,960 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 16:35:57,492 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/messages "HTTP/1.1 200 OK"
2025-05-02 16:35:57,505 - hr_assistant - INFO -  Assistant_instructions for employee EMP103: 
        No need for formal greeting as we're already in a conversation.


        
        IMPORTANT CONTEXT:
        - The authenticated employee ID is: EMP103
        - Employee name: nasar ibrahim
        - Employee grade: L0
        
        For attendance queries:
        1. If the user asks about "my attendance" or "my records", always use get_my_attendance or get_personal_attendance
        2. If the user is a manager (grade L0-L3) and asks about "team attendance" or "my team", use get_my_team_attendance or get_team_attendance
        3. Always use the authenticated employee's ID (EMP103) for all tool calls
        
        Provide clear, helpful information based on the employee data.
        If responding with attendance data, use the 'formatted_response' field in the tool output if available
        and present it as a structured list with bullet points.
        
2025-05-02 16:35:59,443 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs "HTTP/1.1 200 OK"
2025-05-02 16:36:00,025 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_WlSSPcCsl9MrKu2KW1iu27Qb "HTTP/1.1 200 OK"
2025-05-02 16:36:02,497 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_WlSSPcCsl9MrKu2KW1iu27Qb "HTTP/1.1 200 OK"
2025-05-02 16:36:02,499 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-05-02 16:36:02,499 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: this_month)
2025-05-02 16:36:02,499 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-05-02/2025-05-01?page=0&limit=50
2025-05-02 16:36:03,617 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '6814434134340cfb23547cdd', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '680a3ec0e7e94af813bc7466', 'branchId': '680a3ec0e7e94af813bc7468', 'date': '2025-05-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-05-02T04:00:01.225Z', 'updatedAt': '2025-05-02T04:00:01.225Z', '__v': 0}, {'_id': '68138c7234340cfb23547a6f', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '680a3ec0e7e94af813bc7466', 'branchId': '680a3ec0e7e94af813bc7468', 'date': '2025-05-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-05-01T15:00:02.499Z', 'updatedAt': '2025-05-01T15:00:02.499Z', '__v': 0}, {'_id': '6812e3b134340cfb23546ae3', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '680a3ec0e7e94af813bc7466', 'branchId': '680a3ec0e7e94af813bc7468', 'date': '2025-05-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-05-01T03:00:01.229Z', 'updatedAt': '2025-05-01T03:00:01.229Z', '__v': 0}], 'totalRecords': 3, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-05-02 16:36:07,715 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_WlSSPcCsl9MrKu2KW1iu27Qb/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 16:36:10,233 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_WlSSPcCsl9MrKu2KW1iu27Qb "HTTP/1.1 200 OK"
2025-05-02 16:36:12,710 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_WlSSPcCsl9MrKu2KW1iu27Qb "HTTP/1.1 200 OK"
2025-05-02 16:36:13,139 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/messages "HTTP/1.1 200 OK"
2025-05-02 16:36:37,831 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:36:37,831 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 16:36:37,832 - hr_assistant - INFO - Processing query for employee EMP103: get all companies attendance for today
2025-05-02 16:36:39,075 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 16:36:39,202 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 16:36:39,764 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1 "HTTP/1.1 200 OK"
2025-05-02 16:36:39,765 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_3IzZlhKCD5CHQC4qau0xiAO1
2025-05-02 16:36:40,375 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/messages "HTTP/1.1 200 OK"
2025-05-02 16:36:40,377 - hr_assistant - INFO -  Assistant_instructions for employee EMP103: 
        No need for formal greeting as we're already in a conversation.


        
        IMPORTANT CONTEXT:
        - The authenticated employee ID is: EMP103
        - Employee name: nasar ibrahim
        - Employee grade: L0
        
        For attendance queries:
        1. If the user asks about "my attendance" or "my records", always use get_my_attendance or get_personal_attendance
        2. If the user is a manager (grade L0-L3) and asks about "team attendance" or "my team", use get_my_team_attendance or get_team_attendance
        3. Always use the authenticated employee's ID (EMP103) for all tool calls
        
        Provide clear, helpful information based on the employee data.
        If responding with attendance data, use the 'formatted_response' field in the tool output if available
        and present it as a structured list with bullet points.
        
2025-05-02 16:36:41,491 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs "HTTP/1.1 200 OK"
2025-05-02 16:36:42,014 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_1ZgvDTDY4Vz1ewb0pe9IiyeR "HTTP/1.1 200 OK"
2025-05-02 16:36:44,470 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_1ZgvDTDY4Vz1ewb0pe9IiyeR "HTTP/1.1 200 OK"
2025-05-02 16:36:44,471 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 16:36:44,471 - hr_assistant - ERROR - Error executing function get_attendance_report: 'HRService' object has no attribute 'get_attendance_report'
2025-05-02 16:36:45,395 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_1ZgvDTDY4Vz1ewb0pe9IiyeR/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 16:36:47,899 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_1ZgvDTDY4Vz1ewb0pe9IiyeR "HTTP/1.1 200 OK"
2025-05-02 16:36:50,645 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_1ZgvDTDY4Vz1ewb0pe9IiyeR "HTTP/1.1 200 OK"
2025-05-02 16:36:51,055 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/messages "HTTP/1.1 200 OK"
2025-05-02 16:37:11,238 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 16:37:11,239 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 16:37:11,239 - hr_assistant - INFO - Processing query for employee EMP103: get data for NAstecsol
2025-05-02 16:37:12,108 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 16:37:12,349 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 16:37:12,836 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1 "HTTP/1.1 200 OK"
2025-05-02 16:37:12,837 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_3IzZlhKCD5CHQC4qau0xiAO1
2025-05-02 16:37:13,347 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/messages "HTTP/1.1 200 OK"
2025-05-02 16:37:13,574 - hr_assistant - INFO -  Assistant_instructions for employee EMP103: 
        No need for formal greeting as we're already in a conversation.


        
        IMPORTANT CONTEXT:
        - The authenticated employee ID is: EMP103
        - Employee name: nasar ibrahim
        - Employee grade: L0
        
        For attendance queries:
        1. If the user asks about "my attendance" or "my records", always use get_my_attendance or get_personal_attendance
        2. If the user is a manager (grade L0-L3) and asks about "team attendance" or "my team", use get_my_team_attendance or get_team_attendance
        3. Always use the authenticated employee's ID (EMP103) for all tool calls
        
        Provide clear, helpful information based on the employee data.
        If responding with attendance data, use the 'formatted_response' field in the tool output if available
        and present it as a structured list with bullet points.
        
2025-05-02 16:37:14,578 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs "HTTP/1.1 200 OK"
2025-05-02 16:37:15,394 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_xy5WWbqbSSbdSBGwKYvWl1De "HTTP/1.1 200 OK"
2025-05-02 16:37:17,856 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_xy5WWbqbSSbdSBGwKYvWl1De "HTTP/1.1 200 OK"
2025-05-02 16:37:17,857 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'recent', 'company_id': 'NAstecsol'}
2025-05-02 16:37:17,857 - hr_assistant - ERROR - Error executing function get_attendance_report: 'HRService' object has no attribute 'get_attendance_report'
2025-05-02 16:37:18,864 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_xy5WWbqbSSbdSBGwKYvWl1De/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 16:37:21,312 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/runs/run_xy5WWbqbSSbdSBGwKYvWl1De "HTTP/1.1 200 OK"
2025-05-02 16:37:21,743 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3IzZlhKCD5CHQC4qau0xiAO1/messages "HTTP/1.1 200 OK"
2025-05-02 17:01:56,238 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:01:56,240 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:02:05,649 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:02:05,649 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:05:37,646 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:05:37,647 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:05:43,825 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:05:43,825 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 17:05:43,825 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:05:43,826 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 17:05:46,204 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 17:05:47,119 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 17:05:47,119 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 17:05:47,121 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 17:06:01,524 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:06:01,524 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 17:06:01,524 - hr_assistant - INFO - Processing query for employee EMP103: gett all companies attendance for today
2025-05-02 17:06:01,524 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 17:06:03,414 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 17:06:03,705 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 17:06:03,705 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 17:06:04,933 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 17:06:06,748 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/messages "HTTP/1.1 200 OK"
2025-05-02 17:06:07,017 - hr_assistant - INFO -  Assistant_instructions for employee EMP103: 
        No need for formal greeting as we're already in a conversation.


        
        IMPORTANT CONTEXT:
        - The authenticated employee ID is: EMP103
        - Employee name: nasar ibrahim
        - Employee grade: L0
        
        For attendance queries:
        1. If the user asks about "my attendance" or "my records", always use get_my_attendance or get_personal_attendance
        2. If the user is a manager (grade L0-L3) and asks about "team attendance" or "my team", use get_my_team_attendance or get_team_attendance
        3. Always use the authenticated employee's ID (EMP103) for all tool calls
        
        Provide clear, helpful information based on the employee data.
        If responding with attendance data, use the 'formatted_response' field in the tool output if available
        and present it as a structured list with bullet points.
        
2025-05-02 17:06:08,285 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/runs "HTTP/1.1 200 OK"
2025-05-02 17:06:08,919 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/runs/run_IAtS4m7lz5ourxeUIpTng3gT "HTTP/1.1 200 OK"
2025-05-02 17:06:11,402 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/runs/run_IAtS4m7lz5ourxeUIpTng3gT "HTTP/1.1 200 OK"
2025-05-02 17:06:11,404 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 17:06:11,405 - hr_assistant - ERROR - Error executing function get_attendance_report: 'HRService' object has no attribute 'get_attendance_report'
2025-05-02 17:06:12,282 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/runs/run_IAtS4m7lz5ourxeUIpTng3gT/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 17:06:15,682 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/runs/run_IAtS4m7lz5ourxeUIpTng3gT "HTTP/1.1 200 OK"
2025-05-02 17:06:15,685 - hr_assistant - INFO - Processing tool call: get_personal_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 17:06:15,685 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: today)
2025-05-02 17:06:15,685 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-05-02/2025-05-02?page=0&limit=50
2025-05-02 17:06:16,774 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '6814434134340cfb23547cdd', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '680a3ec0e7e94af813bc7466', 'branchId': '680a3ec0e7e94af813bc7468', 'date': '2025-05-02', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-05-02T04:00:01.225Z', 'updatedAt': '2025-05-02T04:00:01.225Z', '__v': 0}], 'totalRecords': 1, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-05-02 17:06:18,468 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/runs/run_IAtS4m7lz5ourxeUIpTng3gT/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 17:06:20,939 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/runs/run_IAtS4m7lz5ourxeUIpTng3gT "HTTP/1.1 200 OK"
2025-05-02 17:06:23,470 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/runs/run_IAtS4m7lz5ourxeUIpTng3gT "HTTP/1.1 200 OK"
2025-05-02 17:06:24,054 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_VgsiOTl8G3SMlfaDRPYXYCyH/messages "HTTP/1.1 200 OK"
2025-05-02 17:07:01,770 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:07:01,770 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:07:07,643 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:07:07,643 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 17:07:07,643 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:07:07,643 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 17:07:09,125 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 17:07:10,066 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 17:07:10,066 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 17:07:10,068 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 17:07:26,512 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:07:26,513 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 17:07:26,513 - hr_assistant - INFO - Processing query for employee EMP103: get all companies attendance for today
2025-05-02 17:07:26,513 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 17:07:28,049 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 17:07:28,314 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 17:07:28,314 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 17:07:28,753 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 17:07:29,305 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/messages "HTTP/1.1 200 OK"
2025-05-02 17:07:29,313 - hr_assistant - INFO -  Assistant_instructions for employee EMP103: 
        No need for formal greeting as we're already in a conversation.


        
        IMPORTANT CONTEXT:
        - The authenticated employee ID is: EMP103
        - Employee name: nasar ibrahim
        - Employee grade: L0
        
2025-05-02 17:07:30,648 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/runs "HTTP/1.1 200 OK"
2025-05-02 17:07:31,148 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/runs/run_PYbsUK0KzcSNCj6AleUsOCvP "HTTP/1.1 200 OK"
2025-05-02 17:07:34,346 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/runs/run_PYbsUK0KzcSNCj6AleUsOCvP "HTTP/1.1 200 OK"
2025-05-02 17:07:34,348 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 17:07:34,348 - hr_assistant - ERROR - Error executing function get_attendance_report: 'HRService' object has no attribute 'get_attendance_report'
2025-05-02 17:07:35,448 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/runs/run_PYbsUK0KzcSNCj6AleUsOCvP/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 17:07:38,112 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/runs/run_PYbsUK0KzcSNCj6AleUsOCvP "HTTP/1.1 200 OK"
2025-05-02 17:07:38,114 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 17:07:38,114 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: today, include_team: None)
2025-05-02 17:07:38,114 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:07:38,114 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 17:07:38,114 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: True
2025-05-02 17:07:38,114 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: today)
2025-05-02 17:07:38,114 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-02 17:07:38,115 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 17:07:38,115 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-02 17:07:39,031 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-02 17:07:39,033 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-02/2025-05-02?page=0&limit=50
2025-05-02 17:07:40,122 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-02 17:07:45,077 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/runs/run_PYbsUK0KzcSNCj6AleUsOCvP/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 17:07:47,740 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/runs/run_PYbsUK0KzcSNCj6AleUsOCvP "HTTP/1.1 200 OK"
2025-05-02 17:07:50,608 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/runs/run_PYbsUK0KzcSNCj6AleUsOCvP "HTTP/1.1 200 OK"
2025-05-02 17:07:53,161 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/runs/run_PYbsUK0KzcSNCj6AleUsOCvP "HTTP/1.1 200 OK"
2025-05-02 17:07:53,577 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YH1PxR60ngo77dd4ffCSQTLe/messages "HTTP/1.1 200 OK"
2025-05-02 17:09:17,762 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:09:17,763 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:11:21,433 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:11:21,435 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:32:01,854 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-02 17:32:01,855 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:32:04,603 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-02 17:32:04,604 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:32:09,730 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:32:09,731 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 17:32:09,731 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:32:09,731 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 17:32:11,958 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 17:32:12,961 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 17:32:12,962 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 17:32:12,964 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 17:32:31,712 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:32:31,712 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 17:32:31,712 - hr_assistant - INFO - Processing query for employee EMP103: get all companies data
2025-05-02 17:32:31,712 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 17:32:33,455 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 17:32:33,808 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 17:32:33,808 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 17:32:35,186 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 17:32:35,745 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/messages "HTTP/1.1 200 OK"
2025-05-02 17:32:35,753 - hr_assistant - INFO -  Assistant_instructions for employee EMP103: 
    No need for formal greeting as we're already in a conversation.


    
    You are an HR Assistant named "NAS Madeer" which specializes in attendance reporting and employee data management. 
    You help employees access their attendance information and help managers monitor team attendance. 
    For high-level management (L0-L1 with appropriate roles), you provide comprehensive organization-wide attendance reporting.
    You also answer queries about labor laws for Saudi Arabia.
    
    Your Capabilities:
    1. For All Employees:
        * Retrieve personal attendance data
        * Show profile details
        * Answer general HR policy questions
    2. For Managers (L0-L3):
        * Retrieve team attendance data
        * Show team member details
        * Generate team attendance reports
    3. For High-Level Management (L0-L1 with HR Manager/admin/owner roles):
        * Generate comprehensive attendance reports across all companies/branches/departments
        * Provide specialized reports (present, absent, late employee analysis)
        * Create data visualizations and summaries
    
    Understanding User Roles:
    * Determine the user's role based on the employee data (grade and role fields)
    * L0-L1 employees with roles "HR Manager", "admin", or "owner" have access to organization-wide reports
    * Only show organization-wide data to authorized users
    
    Handling Attendance Queries:
    Date Formats:
    Understand various date specifications:
    * "today" (default if none specified)
    * "yesterday"
    * "recent" (last 7 days)
    * "this_month" (current month)
    * "previous_month" (last month)
    * Specific dates in format "YYYY-MM-DD"
    * Date ranges in format "YYYY-MM-DD:YYYY-MM-DD"
    
    Personal Queries Examples:
    * "Show my attendance for today"
    * "Am I late today?"
    * "Show my attendance this month"
    
    Team Queries Examples (for managers):
    * "Show my team's attendance"
    * "Who on my team is absent today?"
    * "Team attendance for this month"
    
    When responding to attendance queries:
    1. If the user asks about "my attendance" or "my records", always use get_my_attendance or get_personal_attendance
    2. If the user is a manager (grade L0-L3) and asks about "team attendance" or "my team", use get_my_team_attendance or get_team_attendance
    3. Always use the authenticated employee's ID for all tool calls
    4. Default to today's date if no date is specified
    
    Special Instructions:
    1. Always verify the user's authorization level before providing sensitive data
    2. Be conversational but professional in your responses
    3. For complex queries, clarify understanding before processing
    4. When filtering by company or branch, support both name and ID-based lookup
    
    Presentation Guidelines:
    1. Respond with concise summaries
       * Lead with the most important statistics
       * Use bullet points for clarity
       * Provide context for the numbers
    2. If responding with attendance data, use the 'formatted_response' field in the tool output if available
       and present it as a structured list with bullet points.
    
    
    
    IMPORTANT CONTEXT:
    - The authenticated employee ID is: EMP103
    - Employee name: nasar ibrahim
    - Employee grade: L0
    - Employee authorization level: executive
    
    
    Remember: As NAS Madeer HR Assistant, you help employees with attendance data and HR information.
    Always enforce security by only providing data the authenticated user is authorized to access.
    When responding to queries, be helpful, concise, and maintain a professional tone.
    
    For queries about Saudi Arabian labor laws, provide information based on your knowledge, but for
    labor law questions outside of Saudi Arabia, politely explain that your knowledge is limited to Saudi Arabia.
    
2025-05-02 17:32:37,524 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs "HTTP/1.1 200 OK"
2025-05-02 17:32:39,070 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_qqD3jah6EQ3kjiohdtOGPYxm "HTTP/1.1 200 OK"
2025-05-02 17:32:41,788 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_qqD3jah6EQ3kjiohdtOGPYxm "HTTP/1.1 200 OK"
2025-05-02 17:32:42,538 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/messages "HTTP/1.1 200 OK"
2025-05-02 17:32:58,498 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:32:58,499 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 17:32:58,499 - hr_assistant - INFO - Processing query for employee EMP103: get all companies attendanc for today
2025-05-02 17:32:59,254 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 17:32:59,512 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 17:33:00,298 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo "HTTP/1.1 200 OK"
2025-05-02 17:33:00,299 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_2u2Agg0tWmkSCMTzX40yCZfo
2025-05-02 17:33:01,040 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/messages "HTTP/1.1 200 OK"
2025-05-02 17:33:01,041 - hr_assistant - INFO -  Assistant_instructions for employee EMP103: 
    No need for formal greeting as we're already in a conversation.


    
    You are an HR Assistant named "NAS Madeer" which specializes in attendance reporting and employee data management. 
    You help employees access their attendance information and help managers monitor team attendance. 
    For high-level management (L0-L1 with appropriate roles), you provide comprehensive organization-wide attendance reporting.
    You also answer queries about labor laws for Saudi Arabia.
    
    Your Capabilities:
    1. For All Employees:
        * Retrieve personal attendance data
        * Show profile details
        * Answer general HR policy questions
    2. For Managers (L0-L3):
        * Retrieve team attendance data
        * Show team member details
        * Generate team attendance reports
    3. For High-Level Management (L0-L1 with HR Manager/admin/owner roles):
        * Generate comprehensive attendance reports across all companies/branches/departments
        * Provide specialized reports (present, absent, late employee analysis)
        * Create data visualizations and summaries
    
    Understanding User Roles:
    * Determine the user's role based on the employee data (grade and role fields)
    * L0-L1 employees with roles "HR Manager", "admin", or "owner" have access to organization-wide reports
    * Only show organization-wide data to authorized users
    
    Handling Attendance Queries:
    Date Formats:
    Understand various date specifications:
    * "today" (default if none specified)
    * "yesterday"
    * "recent" (last 7 days)
    * "this_month" (current month)
    * "previous_month" (last month)
    * Specific dates in format "YYYY-MM-DD"
    * Date ranges in format "YYYY-MM-DD:YYYY-MM-DD"
    
    Personal Queries Examples:
    * "Show my attendance for today"
    * "Am I late today?"
    * "Show my attendance this month"
    
    Team Queries Examples (for managers):
    * "Show my team's attendance"
    * "Who on my team is absent today?"
    * "Team attendance for this month"
    
    When responding to attendance queries:
    1. If the user asks about "my attendance" or "my records", always use get_my_attendance or get_personal_attendance
    2. If the user is a manager (grade L0-L3) and asks about "team attendance" or "my team", use get_my_team_attendance or get_team_attendance
    3. Always use the authenticated employee's ID for all tool calls
    4. Default to today's date if no date is specified
    
    Special Instructions:
    1. Always verify the user's authorization level before providing sensitive data
    2. Be conversational but professional in your responses
    3. For complex queries, clarify understanding before processing
    4. When filtering by company or branch, support both name and ID-based lookup
    
    Presentation Guidelines:
    1. Respond with concise summaries
       * Lead with the most important statistics
       * Use bullet points for clarity
       * Provide context for the numbers
    2. If responding with attendance data, use the 'formatted_response' field in the tool output if available
       and present it as a structured list with bullet points.
    
    
    
    IMPORTANT CONTEXT:
    - The authenticated employee ID is: EMP103
    - Employee name: nasar ibrahim
    - Employee grade: L0
    - Employee authorization level: executive
    
    
    Remember: As NAS Madeer HR Assistant, you help employees with attendance data and HR information.
    Always enforce security by only providing data the authenticated user is authorized to access.
    When responding to queries, be helpful, concise, and maintain a professional tone.
    
    For queries about Saudi Arabian labor laws, provide information based on your knowledge, but for
    labor law questions outside of Saudi Arabia, politely explain that your knowledge is limited to Saudi Arabia.
    
2025-05-02 17:33:02,087 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs "HTTP/1.1 200 OK"
2025-05-02 17:33:03,089 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_db2rHy1rRjPZG9q6kyLtINNd "HTTP/1.1 200 OK"
2025-05-02 17:33:05,548 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_db2rHy1rRjPZG9q6kyLtINNd "HTTP/1.1 200 OK"
2025-05-02 17:33:08,493 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_db2rHy1rRjPZG9q6kyLtINNd "HTTP/1.1 200 OK"
2025-05-02 17:33:11,691 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_db2rHy1rRjPZG9q6kyLtINNd "HTTP/1.1 200 OK"
2025-05-02 17:33:11,693 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 17:33:11,693 - hr_assistant - ERROR - Error executing function get_attendance_report: 'HRService' object has no attribute 'get_attendance_report'
2025-05-02 17:33:12,647 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_db2rHy1rRjPZG9q6kyLtINNd/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 17:33:15,818 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_db2rHy1rRjPZG9q6kyLtINNd "HTTP/1.1 200 OK"
2025-05-02 17:33:18,698 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_db2rHy1rRjPZG9q6kyLtINNd "HTTP/1.1 200 OK"
2025-05-02 17:33:21,523 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/runs/run_db2rHy1rRjPZG9q6kyLtINNd "HTTP/1.1 200 OK"
2025-05-02 17:33:22,238 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_2u2Agg0tWmkSCMTzX40yCZfo/messages "HTTP/1.1 200 OK"
2025-05-02 17:45:24,804 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:45:24,805 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:45:29,035 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:45:29,035 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 17:45:29,035 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:45:29,035 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 17:45:31,123 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 17:45:32,065 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 17:45:32,066 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 17:45:32,068 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 17:45:54,354 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:45:54,355 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 17:45:54,355 - hr_assistant - INFO - Processing query for employee EMP103: get all companies attendance report for today
2025-05-02 17:45:54,355 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 17:45:56,402 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 17:45:56,412 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 17:45:56,412 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 17:45:57,376 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 17:45:57,903 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hTAB3YA18O7FlZ1F22IbWusO/messages "HTTP/1.1 200 OK"
2025-05-02 17:45:59,599 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hTAB3YA18O7FlZ1F22IbWusO/runs "HTTP/1.1 200 OK"
2025-05-02 17:46:00,298 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hTAB3YA18O7FlZ1F22IbWusO/runs/run_khScGDGWqgAWhScSoAUjggru "HTTP/1.1 200 OK"
2025-05-02 17:46:02,799 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hTAB3YA18O7FlZ1F22IbWusO/runs/run_khScGDGWqgAWhScSoAUjggru "HTTP/1.1 200 OK"
2025-05-02 17:46:02,801 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today', 'report_type': 'all'}
2025-05-02 17:46:02,801 - hr_assistant - ERROR - Error executing function get_attendance_report: 'HRService' object has no attribute 'get_attendance_report'
2025-05-02 17:46:03,725 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_hTAB3YA18O7FlZ1F22IbWusO/runs/run_khScGDGWqgAWhScSoAUjggru/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 17:46:06,311 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hTAB3YA18O7FlZ1F22IbWusO/runs/run_khScGDGWqgAWhScSoAUjggru "HTTP/1.1 200 OK"
2025-05-02 17:46:07,272 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_hTAB3YA18O7FlZ1F22IbWusO/messages "HTTP/1.1 200 OK"
2025-05-02 17:51:05,670 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:51:05,672 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:51:11,042 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:51:11,042 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 17:51:11,042 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:51:11,042 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 17:51:12,694 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 17:51:13,748 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 17:51:13,749 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 17:51:13,751 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 17:51:37,378 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:51:37,379 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 17:51:37,379 - hr_assistant - INFO - Processing query for employee EMP103: get today's attendance report for all companies
2025-05-02 17:51:37,379 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 17:51:40,092 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 17:51:40,105 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 17:51:40,105 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 17:51:41,179 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 17:51:41,774 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_iEs9uwf2vYryQQvMXzb5g3UZ/messages "HTTP/1.1 200 OK"
2025-05-02 17:51:43,433 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_iEs9uwf2vYryQQvMXzb5g3UZ/runs "HTTP/1.1 200 OK"
2025-05-02 17:51:43,973 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iEs9uwf2vYryQQvMXzb5g3UZ/runs/run_xLwQHYpjAkMm6DqLkS4pCzOp "HTTP/1.1 200 OK"
2025-05-02 17:51:46,428 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iEs9uwf2vYryQQvMXzb5g3UZ/runs/run_xLwQHYpjAkMm6DqLkS4pCzOp "HTTP/1.1 200 OK"
2025-05-02 17:51:46,430 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 17:51:46,430 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 17:51:46,430 - hr_assistant - INFO - Date type: today, Report type: all
2025-05-02 17:51:46,430 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 17:51:46,430 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:51:46,430 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 17:51:46,431 - hr_assistant - WARNING - Unauthorized access attempt by employee EMP103 (Grade: , Role: manager)
2025-05-02 17:51:47,475 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_iEs9uwf2vYryQQvMXzb5g3UZ/runs/run_xLwQHYpjAkMm6DqLkS4pCzOp/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 17:51:50,159 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iEs9uwf2vYryQQvMXzb5g3UZ/runs/run_xLwQHYpjAkMm6DqLkS4pCzOp "HTTP/1.1 200 OK"
2025-05-02 17:51:52,731 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iEs9uwf2vYryQQvMXzb5g3UZ/runs/run_xLwQHYpjAkMm6DqLkS4pCzOp "HTTP/1.1 200 OK"
2025-05-02 17:51:53,632 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_iEs9uwf2vYryQQvMXzb5g3UZ/messages "HTTP/1.1 200 OK"
2025-05-02 17:56:45,164 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:56:45,164 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:56:47,650 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:56:47,650 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 17:56:47,650 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:56:47,650 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 17:56:49,307 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 17:56:50,314 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 17:56:50,314 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 17:56:50,315 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 17:57:10,337 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:57:10,337 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 17:57:10,338 - hr_assistant - INFO - Processing query for employee EMP103: get today attendance report for all companies
2025-05-02 17:57:10,338 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 17:57:11,333 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 17:57:11,337 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 17:57:11,337 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 17:57:11,766 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 17:57:13,054 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9xs1nNrjSUrCrjkxumH2IySI/messages "HTTP/1.1 200 OK"
2025-05-02 17:57:14,264 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9xs1nNrjSUrCrjkxumH2IySI/runs "HTTP/1.1 200 OK"
2025-05-02 17:57:14,999 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9xs1nNrjSUrCrjkxumH2IySI/runs/run_ixKw7vN7bL86SUgwvLeSOFGz "HTTP/1.1 200 OK"
2025-05-02 17:57:17,561 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9xs1nNrjSUrCrjkxumH2IySI/runs/run_ixKw7vN7bL86SUgwvLeSOFGz "HTTP/1.1 200 OK"
2025-05-02 17:57:17,563 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today', 'report_type': 'all'}
2025-05-02 17:57:17,563 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 17:57:17,563 - hr_assistant - INFO - Date type: today, Report type: all
2025-05-02 17:57:17,563 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 17:57:17,563 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:57:17,563 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 17:57:17,563 - hr_assistant - WARNING - Unauthorized access attempt by employee EMP103 (Grade: L0, Role: manager)
2025-05-02 17:57:20,121 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9xs1nNrjSUrCrjkxumH2IySI/runs/run_ixKw7vN7bL86SUgwvLeSOFGz/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 17:57:22,661 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9xs1nNrjSUrCrjkxumH2IySI/runs/run_ixKw7vN7bL86SUgwvLeSOFGz "HTTP/1.1 200 OK"
2025-05-02 17:57:25,171 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9xs1nNrjSUrCrjkxumH2IySI/runs/run_ixKw7vN7bL86SUgwvLeSOFGz "HTTP/1.1 200 OK"
2025-05-02 17:57:25,568 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9xs1nNrjSUrCrjkxumH2IySI/messages "HTTP/1.1 200 OK"
2025-05-02 17:58:19,145 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 17:58:19,147 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 17:58:21,220 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:58:21,220 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 17:58:21,221 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:58:21,221 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 17:58:23,690 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 17:58:24,592 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 17:58:24,593 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 17:58:24,596 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 17:58:43,939 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 17:58:43,939 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 17:58:43,939 - hr_assistant - INFO - Processing query for employee EMP103: get today attendance report for all companies
2025-05-02 17:58:43,939 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 17:58:45,525 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 17:58:45,533 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 17:58:45,533 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 17:58:46,295 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 17:58:46,952 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NEYveqeeloLfwIqxV5BzDD9g/messages "HTTP/1.1 200 OK"
2025-05-02 17:58:48,881 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NEYveqeeloLfwIqxV5BzDD9g/runs "HTTP/1.1 200 OK"
2025-05-02 17:58:49,354 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NEYveqeeloLfwIqxV5BzDD9g/runs/run_C2Olw18FrAI1FuWGS5ghxD85 "HTTP/1.1 200 OK"
2025-05-02 17:58:51,812 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NEYveqeeloLfwIqxV5BzDD9g/runs/run_C2Olw18FrAI1FuWGS5ghxD85 "HTTP/1.1 200 OK"
2025-05-02 17:58:51,814 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today', 'report_type': 'all'}
2025-05-02 17:58:51,814 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 17:58:51,814 - hr_assistant - INFO - Date type: today, Report type: all
2025-05-02 17:58:51,814 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 17:58:51,814 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 17:58:51,814 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 17:58:51,814 - hr_assistant - ERROR - Error executing function get_attendance_report: 'HRService' object has no attribute '_get_organization_data'
2025-05-02 17:58:54,818 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_NEYveqeeloLfwIqxV5BzDD9g/runs/run_C2Olw18FrAI1FuWGS5ghxD85/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 17:58:57,381 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NEYveqeeloLfwIqxV5BzDD9g/runs/run_C2Olw18FrAI1FuWGS5ghxD85 "HTTP/1.1 200 OK"
2025-05-02 17:58:59,918 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NEYveqeeloLfwIqxV5BzDD9g/runs/run_C2Olw18FrAI1FuWGS5ghxD85 "HTTP/1.1 200 OK"
2025-05-02 17:59:00,328 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_NEYveqeeloLfwIqxV5BzDD9g/messages "HTTP/1.1 200 OK"
2025-05-02 18:00:10,607 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 18:00:10,607 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 18:00:13,689 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:00:13,689 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 18:00:13,689 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:00:13,689 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 18:00:15,225 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 18:00:16,132 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 18:00:16,133 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 18:00:16,134 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 18:00:44,974 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:00:44,975 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 18:00:44,975 - hr_assistant - INFO - Processing query for employee EMP103: show me attendance report of all companies for today
2025-05-02 18:00:44,975 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 18:00:45,913 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 18:00:46,181 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 18:00:46,181 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 18:00:46,639 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 18:00:47,149 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/messages "HTTP/1.1 200 OK"
2025-05-02 18:00:49,289 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/runs "HTTP/1.1 200 OK"
2025-05-02 18:00:49,730 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/runs/run_zDclWxQacoQgnGsHw11I2Rgv "HTTP/1.1 200 OK"
2025-05-02 18:00:52,253 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/runs/run_zDclWxQacoQgnGsHw11I2Rgv "HTTP/1.1 200 OK"
2025-05-02 18:00:54,839 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/runs/run_zDclWxQacoQgnGsHw11I2Rgv "HTTP/1.1 200 OK"
2025-05-02 18:00:54,841 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 18:00:54,841 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 18:00:54,841 - hr_assistant - INFO - Date type: today, Report type: all
2025-05-02 18:00:54,841 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 18:00:54,841 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:00:54,842 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:00:54,842 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 18:00:56,367 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 18:00:56,368 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-02 to 2025-05-02
2025-05-02 18:00:57,494 - hr_assistant - ERROR - Error retrieving attendance report data: 'str' object has no attribute 'get'
2025-05-02 18:01:02,100 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/runs/run_zDclWxQacoQgnGsHw11I2Rgv/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 18:01:04,834 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/runs/run_zDclWxQacoQgnGsHw11I2Rgv "HTTP/1.1 200 OK"
2025-05-02 18:01:04,835 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 18:01:04,835 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 18:01:04,836 - hr_assistant - INFO - Date type: today, Report type: all
2025-05-02 18:01:04,836 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 18:01:04,836 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:01:04,836 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:01:04,836 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 18:01:06,286 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 18:01:06,288 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-02 to 2025-05-02
2025-05-02 18:01:07,635 - hr_assistant - ERROR - Error retrieving attendance report data: 'str' object has no attribute 'get'
2025-05-02 18:01:08,870 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/runs/run_zDclWxQacoQgnGsHw11I2Rgv/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 18:01:11,417 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/runs/run_zDclWxQacoQgnGsHw11I2Rgv "HTTP/1.1 200 OK"
2025-05-02 18:01:13,914 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/runs/run_zDclWxQacoQgnGsHw11I2Rgv "HTTP/1.1 200 OK"
2025-05-02 18:01:14,262 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_wEzY0prnTjiQfWrS7hu3MVc3/messages "HTTP/1.1 200 OK"
2025-05-02 18:04:33,623 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 18:04:33,625 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 18:04:38,369 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:04:38,369 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 18:04:38,370 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:04:38,370 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 18:04:39,844 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 18:04:40,769 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 18:04:40,769 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 18:04:40,771 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 18:04:54,007 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:04:54,008 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 18:04:54,008 - hr_assistant - INFO - Processing query for employee EMP103: generate an attendance report for all companies today
2025-05-02 18:04:54,008 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 18:04:55,108 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 18:04:55,413 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 18:04:55,413 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 18:04:55,921 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 18:04:57,049 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/messages "HTTP/1.1 200 OK"
2025-05-02 18:04:58,276 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs "HTTP/1.1 200 OK"
2025-05-02 18:04:58,812 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:01,450 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:01,452 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 18:05:01,452 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 18:05:01,452 - hr_assistant - INFO - Date type: today, Report type: all
2025-05-02 18:05:01,452 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 18:05:01,452 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:05:01,453 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:05:01,453 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 18:05:03,022 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 18:05:03,024 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-02 to 2025-05-02
2025-05-02 18:05:03,024 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-02&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:05:04,113 - hr_assistant - ERROR - Error retrieving attendance report data: 'str' object has no attribute 'get'
2025-05-02 18:05:05,932 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 18:05:08,520 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:11,415 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:13,929 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:16,427 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:18,961 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:18,962 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today', 'report_type': 'all'}
2025-05-02 18:05:18,963 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 18:05:18,963 - hr_assistant - INFO - Date type: today, Report type: all
2025-05-02 18:05:18,963 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 18:05:18,963 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:05:18,963 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:05:18,963 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 18:05:20,601 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 18:05:20,603 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-02 to 2025-05-02
2025-05-02 18:05:20,603 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-02&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:05:21,804 - hr_assistant - ERROR - Error retrieving attendance report data: 'str' object has no attribute 'get'
2025-05-02 18:05:22,749 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 18:05:25,426 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:28,078 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:31,109 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:33,580 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/runs/run_1jUrMj5Ke1yqsWanKt0i4STJ "HTTP/1.1 200 OK"
2025-05-02 18:05:34,014 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_YuvFpofyw2WDRuM1QbXuzhHP/messages "HTTP/1.1 200 OK"
2025-05-02 18:06:47,886 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 18:06:47,886 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 18:10:07,962 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 18:10:07,963 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 18:10:11,062 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:10:11,063 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 18:10:11,063 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:10:11,063 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 18:10:12,912 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 18:10:13,882 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 18:10:13,883 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 18:10:13,885 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 18:10:20,114 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:10:20,114 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 18:10:20,114 - hr_assistant - INFO - Processing query for employee EMP103: generate an attendance report for all companies today
2025-05-02 18:10:20,115 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 18:10:21,756 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 18:10:21,788 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 18:10:21,789 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 18:10:22,786 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 18:10:26,981 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/messages "HTTP/1.1 200 OK"
2025-05-02 18:10:28,514 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs "HTTP/1.1 200 OK"
2025-05-02 18:10:29,496 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_l18y6PqXO1hBqu4jOh0j7aZl "HTTP/1.1 200 OK"
2025-05-02 18:10:32,462 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_l18y6PqXO1hBqu4jOh0j7aZl "HTTP/1.1 200 OK"
2025-05-02 18:10:32,596 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'today'}
2025-05-02 18:10:32,597 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 18:10:32,597 - hr_assistant - INFO - Date type: today, Report type: all
2025-05-02 18:10:32,597 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 18:10:32,597 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:10:32,597 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:10:32,597 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 18:10:34,016 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 18:10:34,018 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-02 to 2025-05-02
2025-05-02 18:10:34,018 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-02&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:10:35,135 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 18:10:35,135 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/671a3fa5c67936eae8048ecf?startDate=2025-05-02&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:10:36,398 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf
2025-05-02 18:10:36,398 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/680a3ec0e7e94af813bc7466?startDate=2025-05-02&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:10:37,959 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Coke
2025-05-02 18:10:37,959 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/68132f7f34340cfb2354708a?startDate=2025-05-02&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:10:39,372 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf al Tamayouz
2025-05-02 18:10:39,375 - hr_assistant - INFO - Successfully generated attendance report for employee: EMP103
2025-05-02 18:10:40,702 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_l18y6PqXO1hBqu4jOh0j7aZl/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 18:10:43,790 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_l18y6PqXO1hBqu4jOh0j7aZl "HTTP/1.1 200 OK"
2025-05-02 18:10:46,246 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_l18y6PqXO1hBqu4jOh0j7aZl "HTTP/1.1 200 OK"
2025-05-02 18:10:49,609 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_l18y6PqXO1hBqu4jOh0j7aZl "HTTP/1.1 200 OK"
2025-05-02 18:10:52,763 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_l18y6PqXO1hBqu4jOh0j7aZl "HTTP/1.1 200 OK"
2025-05-02 18:10:55,240 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_l18y6PqXO1hBqu4jOh0j7aZl "HTTP/1.1 200 OK"
2025-05-02 18:10:55,599 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/messages "HTTP/1.1 200 OK"
2025-05-02 18:11:44,950 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:11:44,950 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 18:11:44,951 - hr_assistant - INFO - Processing query for employee EMP103: Show me the attendance summary for the Islamabad branch yesterday
2025-05-02 18:11:46,410 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 18:11:46,679 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 18:11:47,261 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1 "HTTP/1.1 200 OK"
2025-05-02 18:11:47,262 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_muD11I1nqlWYm83JTqBwznd1
2025-05-02 18:11:48,486 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/messages "HTTP/1.1 200 OK"
2025-05-02 18:11:50,236 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs "HTTP/1.1 200 OK"
2025-05-02 18:11:50,881 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_0Vb37r35unsLasPsxeFOROPl "HTTP/1.1 200 OK"
2025-05-02 18:11:53,379 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_0Vb37r35unsLasPsxeFOROPl "HTTP/1.1 200 OK"
2025-05-02 18:11:53,381 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'include_team': False}
2025-05-02 18:11:53,381 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: yesterday, include_team: False)
2025-05-02 18:11:53,381 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:11:53,381 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:11:53,381 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: False
2025-05-02 18:11:53,381 - hr_assistant - INFO - Fetching personal attendance for employee: EMP103 (date_type: yesterday)
2025-05-02 18:11:53,381 - hr_assistant - INFO - Personal attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d824a199b629cbdb2e0f2d/2025-05-01/2025-05-01?page=0&limit=50
2025-05-02 18:11:55,039 - hr_assistant - INFO - Successfully retrieved attendance data for employee: {'statusCode': 200, 'statusMessage': 'Request successful', 'errorMessage': None, 'data': {'data': [{'_id': '68138c7234340cfb23547a6f', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '680a3ec0e7e94af813bc7466', 'branchId': '680a3ec0e7e94af813bc7468', 'date': '2025-05-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-05-01T15:00:02.499Z', 'updatedAt': '2025-05-01T15:00:02.499Z', '__v': 0}, {'_id': '6812e3b134340cfb23546ae3', 'employeeId': '66d824a199b629cbdb2e0f2d', 'empId': 'EMP103', 'name': 'nasar', 'companyId': '680a3ec0e7e94af813bc7466', 'branchId': '680a3ec0e7e94af813bc7468', 'date': '2025-05-01', 'clockInTime': 'null', 'clockOutTime': 'null', 'totalHoursWorked': 0, 'location': 'Unknown', 'status': 'Absent', 'breaksTaken': [], 'breakTime': 0, 'lateMinutes': 0, 'penalties': [], 'leaveDetails': None, 'shift': 'FullTime', 'workingHoursPerday': 0, 'earlyCheckOut': 0, 'remarks': 'No check-in/out data', 'createdAt': '2025-05-01T03:00:01.229Z', 'updatedAt': '2025-05-01T03:00:01.229Z', '__v': 0}], 'totalRecords': 2, 'page': 0, 'limit': 50, 'totalPages': 1}}
2025-05-02 18:12:29,816 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_0Vb37r35unsLasPsxeFOROPl/submit_tool_outputs "HTTP/1.1 502 Bad Gateway"
2025-05-02 18:12:29,817 - openai._base_client - INFO - Retrying request to /threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_0Vb37r35unsLasPsxeFOROPl/submit_tool_outputs in 0.433156 seconds
2025-05-02 18:12:30,636 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_0Vb37r35unsLasPsxeFOROPl/submit_tool_outputs "HTTP/1.1 500 Internal Server Error"
2025-05-02 18:12:30,637 - openai._base_client - INFO - Retrying request to /threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_0Vb37r35unsLasPsxeFOROPl/submit_tool_outputs in 0.818919 seconds
2025-05-02 18:12:31,891 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_muD11I1nqlWYm83JTqBwznd1/runs/run_0Vb37r35unsLasPsxeFOROPl/submit_tool_outputs "HTTP/1.1 500 Internal Server Error"
2025-05-02 18:12:31,891 - hr_assistant - ERROR - Error generating response: Error code: 500 - {'error': {'message': 'The server had an error while processing your request. Sorry about that!', 'type': 'server_error', 'param': None, 'code': None}}
2025-05-02 18:18:04,856 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 18:18:04,857 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 18:18:19,629 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:18:19,629 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 18:18:19,629 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:18:19,629 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 18:18:21,096 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 18:18:22,008 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 18:18:22,010 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 18:18:22,012 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 18:18:31,881 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:18:31,881 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 18:18:31,881 - hr_assistant - INFO - Processing query for employee EMP103: How many employees are late in NASTECSOL company this month?
2025-05-02 18:18:31,881 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 18:18:34,190 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 18:18:34,463 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 18:18:34,464 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 18:18:35,032 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 18:18:36,136 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/messages "HTTP/1.1 200 OK"
2025-05-02 18:18:37,211 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs "HTTP/1.1 200 OK"
2025-05-02 18:18:38,206 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_evUDQmH2QLJrSrQNJCGrFC8A "HTTP/1.1 200 OK"
2025-05-02 18:18:40,955 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_evUDQmH2QLJrSrQNJCGrFC8A "HTTP/1.1 200 OK"
2025-05-02 18:18:40,958 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'this_month', 'company_id': '66cd767307aed2eef86b88ed', 'report_type': 'late'}
2025-05-02 18:18:40,958 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 18:18:40,958 - hr_assistant - INFO - Date type: this_month, Report type: late
2025-05-02 18:18:40,958 - hr_assistant - INFO - Filters - Company: 66cd767307aed2eef86b88ed, Branch: None, Department: None
2025-05-02 18:18:40,958 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:18:40,958 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:18:40,958 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 18:18:42,375 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 18:18:42,376 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-02
2025-05-02 18:18:42,376 - hr_assistant - WARNING - No matching companies found for filter: 66cd767307aed2eef86b88ed
2025-05-02 18:18:44,451 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_evUDQmH2QLJrSrQNJCGrFC8A/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 18:18:46,925 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_evUDQmH2QLJrSrQNJCGrFC8A "HTTP/1.1 200 OK"
2025-05-02 18:18:49,452 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_evUDQmH2QLJrSrQNJCGrFC8A "HTTP/1.1 200 OK"
2025-05-02 18:18:49,453 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'this_month', 'report_type': 'late'}
2025-05-02 18:18:49,453 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 18:18:49,453 - hr_assistant - INFO - Date type: this_month, Report type: late
2025-05-02 18:18:49,453 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 18:18:49,453 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:18:49,454 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:18:49,454 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 18:18:51,094 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 18:18:51,095 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-02
2025-05-02 18:18:51,095 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:18:52,217 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 18:18:52,217 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/671a3fa5c67936eae8048ecf?startDate=2025-05-01&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:18:53,301 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf
2025-05-02 18:18:53,301 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/680a3ec0e7e94af813bc7466?startDate=2025-05-01&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:18:54,548 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Coke
2025-05-02 18:18:54,548 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/68132f7f34340cfb2354708a?startDate=2025-05-01&endDate=2025-05-02&limit=1000&page=0
2025-05-02 18:18:55,726 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf al Tamayouz
2025-05-02 18:18:55,728 - hr_assistant - INFO - Successfully generated attendance report for employee: EMP103
2025-05-02 18:18:57,644 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_evUDQmH2QLJrSrQNJCGrFC8A/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 18:19:00,097 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_evUDQmH2QLJrSrQNJCGrFC8A "HTTP/1.1 200 OK"
2025-05-02 18:19:02,687 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_evUDQmH2QLJrSrQNJCGrFC8A "HTTP/1.1 200 OK"
2025-05-02 18:19:03,174 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/messages "HTTP/1.1 200 OK"
2025-05-02 18:19:47,849 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 18:19:47,849 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 18:19:47,849 - hr_assistant - INFO - Processing query for employee EMP103: show me attendance report of previous month for company NASTECSOL
2025-05-02 18:19:49,129 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 18:19:49,132 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 18:19:50,121 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc "HTTP/1.1 200 OK"
2025-05-02 18:19:50,121 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_tTvaBNfaFkHURvHdAs8mXWHc
2025-05-02 18:19:50,731 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/messages "HTTP/1.1 200 OK"
2025-05-02 18:19:52,565 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs "HTTP/1.1 200 OK"
2025-05-02 18:19:54,101 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl "HTTP/1.1 200 OK"
2025-05-02 18:19:56,632 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl "HTTP/1.1 200 OK"
2025-05-02 18:19:59,243 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl "HTTP/1.1 200 OK"
2025-05-02 18:19:59,245 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'previous_month', 'company_id': '66cd767307aed2eef86b88ed'}
2025-05-02 18:19:59,245 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 18:19:59,245 - hr_assistant - INFO - Date type: previous_month, Report type: all
2025-05-02 18:19:59,245 - hr_assistant - INFO - Filters - Company: 66cd767307aed2eef86b88ed, Branch: None, Department: None
2025-05-02 18:19:59,245 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:19:59,245 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:19:59,245 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 18:20:00,682 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 18:20:00,684 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-04-01 to 2025-04-30
2025-05-02 18:20:00,684 - hr_assistant - WARNING - No matching companies found for filter: 66cd767307aed2eef86b88ed
2025-05-02 18:20:01,885 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 18:20:04,762 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl "HTTP/1.1 200 OK"
2025-05-02 18:20:07,765 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl "HTTP/1.1 200 OK"
2025-05-02 18:20:07,766 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'previous_month'}
2025-05-02 18:20:07,766 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 18:20:07,766 - hr_assistant - INFO - Date type: previous_month, Report type: all
2025-05-02 18:20:07,766 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 18:20:07,766 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 18:20:07,766 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 18:20:07,766 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 18:20:09,210 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 18:20:09,212 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-04-01 to 2025-04-30
2025-05-02 18:20:09,212 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-04-01&endDate=2025-04-30&limit=1000&page=0
2025-05-02 18:20:10,383 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 18:20:10,383 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/671a3fa5c67936eae8048ecf?startDate=2025-04-01&endDate=2025-04-30&limit=1000&page=0
2025-05-02 18:20:11,589 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf
2025-05-02 18:20:11,589 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/680a3ec0e7e94af813bc7466?startDate=2025-04-01&endDate=2025-04-30&limit=1000&page=0
2025-05-02 18:20:12,740 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Coke
2025-05-02 18:20:12,740 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/68132f7f34340cfb2354708a?startDate=2025-04-01&endDate=2025-04-30&limit=1000&page=0
2025-05-02 18:20:13,970 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf al Tamayouz
2025-05-02 18:20:13,972 - hr_assistant - INFO - Successfully generated attendance report for employee: EMP103
2025-05-02 18:20:16,321 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 18:20:18,962 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl "HTTP/1.1 200 OK"
2025-05-02 18:20:21,425 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl "HTTP/1.1 200 OK"
2025-05-02 18:20:23,902 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/runs/run_ZCBTf4HXAiZPxAlJN3sZLoCl "HTTP/1.1 200 OK"
2025-05-02 18:20:24,329 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_tTvaBNfaFkHURvHdAs8mXWHc/messages "HTTP/1.1 200 OK"
2025-05-02 21:23:56,977 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 21:23:56,978 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 21:24:14,950 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:24:14,951 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 21:24:14,951 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:24:14,951 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 21:24:17,388 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 21:24:18,316 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:24:18,317 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 21:24:18,319 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 21:24:38,288 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:24:38,288 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:24:38,288 - hr_assistant - INFO - Processing query for employee EMP103: Show me the attendance summary for the Nastecsol branch yesterday
2025-05-02 21:24:38,288 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 21:24:40,045 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:24:40,320 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:24:40,320 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 21:24:41,666 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 21:24:42,173 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/messages "HTTP/1.1 200 OK"
2025-05-02 21:24:48,110 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs "HTTP/1.1 200 OK"
2025-05-02 21:24:48,619 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_TtTHaQqzSi4jZsjSV6C4nGNH "HTTP/1.1 200 OK"
2025-05-02 21:24:52,040 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_TtTHaQqzSi4jZsjSV6C4nGNH "HTTP/1.1 200 OK"
2025-05-02 21:24:52,043 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'branch_id': '66cd76b107aed2eef86b88f1'}
2025-05-02 21:24:52,044 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:24:52,044 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:24:52,044 - hr_assistant - INFO - Filters - Company: None, Branch: 66cd76b107aed2eef86b88f1, Department: None
2025-05-02 21:24:52,044 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:24:52,044 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:24:52,044 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:24:53,536 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:24:53,538 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:24:53,538 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:24:54,662 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:24:54,662 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/671a3fa5c67936eae8048ecf?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:24:55,891 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf
2025-05-02 21:24:55,891 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/680a3ec0e7e94af813bc7466?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:24:57,009 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Coke
2025-05-02 21:24:57,009 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/68132f7f34340cfb2354708a?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:24:58,099 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf al Tamayouz
2025-05-02 21:24:58,101 - hr_assistant - INFO - Successfully generated attendance report for employee: EMP103
2025-05-02 21:24:59,560 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_TtTHaQqzSi4jZsjSV6C4nGNH/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:25:02,166 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_TtTHaQqzSi4jZsjSV6C4nGNH "HTTP/1.1 200 OK"
2025-05-02 21:25:05,413 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_TtTHaQqzSi4jZsjSV6C4nGNH "HTTP/1.1 200 OK"
2025-05-02 21:25:07,900 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_TtTHaQqzSi4jZsjSV6C4nGNH "HTTP/1.1 200 OK"
2025-05-02 21:25:10,590 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_TtTHaQqzSi4jZsjSV6C4nGNH "HTTP/1.1 200 OK"
2025-05-02 21:25:11,027 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/messages "HTTP/1.1 200 OK"
2025-05-02 21:26:06,690 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:26:06,690 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:26:06,690 - hr_assistant - INFO - Processing query for employee EMP103: Show me the attendance summary for the Nastecsol company yesterday
2025-05-02 21:26:08,890 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:26:08,891 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:26:10,126 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm "HTTP/1.1 200 OK"
2025-05-02 21:26:10,134 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_qG0AJ8VvDH1yOeLfdUS7Zevm
2025-05-02 21:26:11,379 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/messages "HTTP/1.1 200 OK"
2025-05-02 21:26:13,816 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs "HTTP/1.1 200 OK"
2025-05-02 21:26:14,839 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_HBZXooICbnpZtcoVPzcCjPxN "HTTP/1.1 200 OK"
2025-05-02 21:26:17,377 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_HBZXooICbnpZtcoVPzcCjPxN "HTTP/1.1 200 OK"
2025-05-02 21:26:17,378 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'company_id': '66cd76b107aed2eef86b88ef'}
2025-05-02 21:26:17,378 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:26:17,378 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:26:17,378 - hr_assistant - INFO - Filters - Company: 66cd76b107aed2eef86b88ef, Branch: None, Department: None
2025-05-02 21:26:17,378 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:26:17,379 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:26:17,379 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:26:18,835 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:26:18,837 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:26:18,837 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:26:19,951 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:26:19,953 - hr_assistant - INFO - Successfully generated attendance report for employee: EMP103
2025-05-02 21:26:23,341 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_HBZXooICbnpZtcoVPzcCjPxN/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:26:26,343 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_HBZXooICbnpZtcoVPzcCjPxN "HTTP/1.1 200 OK"
2025-05-02 21:26:28,996 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_HBZXooICbnpZtcoVPzcCjPxN "HTTP/1.1 200 OK"
2025-05-02 21:26:31,530 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_HBZXooICbnpZtcoVPzcCjPxN "HTTP/1.1 200 OK"
2025-05-02 21:26:33,995 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_HBZXooICbnpZtcoVPzcCjPxN "HTTP/1.1 200 OK"
2025-05-02 21:26:36,443 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_HBZXooICbnpZtcoVPzcCjPxN "HTTP/1.1 200 OK"
2025-05-02 21:26:40,571 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/runs/run_HBZXooICbnpZtcoVPzcCjPxN "HTTP/1.1 200 OK"
2025-05-02 21:26:41,033 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_qG0AJ8VvDH1yOeLfdUS7Zevm/messages "HTTP/1.1 200 OK"
2025-05-02 21:32:28,258 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 21:32:28,259 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 21:33:28,784 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 21:33:28,785 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 21:33:32,870 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:33:32,870 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 21:33:32,870 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:33:32,870 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 21:33:34,328 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 21:33:35,278 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:33:35,279 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 21:33:35,282 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 21:33:37,958 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:33:37,958 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:33:37,959 - hr_assistant - INFO - Processing query for employee EMP103: Show me the attendance summary for the Nastecsol company yesterday
2025-05-02 21:33:37,959 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 21:33:41,410 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:33:41,511 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:33:41,511 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 21:33:42,479 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 21:33:43,110 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/messages "HTTP/1.1 200 OK"
2025-05-02 21:33:44,497 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs "HTTP/1.1 200 OK"
2025-05-02 21:33:45,095 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:33:47,757 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:33:47,759 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'company_id': '66cd767307aed2eef86b88ed'}
2025-05-02 21:33:47,759 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:33:47,759 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:33:47,759 - hr_assistant - INFO - Filters - Company: 66cd767307aed2eef86b88ed, Branch: None, Department: None
2025-05-02 21:33:47,759 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:33:47,760 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:33:47,760 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:33:49,398 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:33:49,399 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:33:49,399 - hr_assistant - WARNING - No matching companies found for filter: 66cd767307aed2eef86b88ed
2025-05-02 21:33:50,384 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:33:52,872 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:33:52,873 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday'}
2025-05-02 21:33:52,873 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:33:52,873 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:33:52,873 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:33:52,873 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:33:52,873 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:33:52,874 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:33:54,308 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:33:54,311 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:33:54,311 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:33:55,440 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:33:56,718 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:33:59,226 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:34:01,786 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:34:04,345 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:34:04,347 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent'}
2025-05-02 21:34:04,347 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: recent, include_team: None)
2025-05-02 21:34:04,347 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:34:04,347 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:34:04,347 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: True
2025-05-02 21:34:04,347 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-05-02 21:34:04,347 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-02 21:34:04,347 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:34:04,348 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-02 21:34:05,376 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-02 21:34:05,378 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-02/2025-04-25?page=0&limit=50
2025-05-02 21:34:06,577 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-02 21:34:07,667 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:34:10,183 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:34:12,908 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:34:15,404 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:34:17,966 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:34:20,467 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/runs/run_qRsiYj6NBK7mf5Z27K6kxa0d "HTTP/1.1 200 OK"
2025-05-02 21:34:20,893 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_q30gIgl9eD4RJTrVx1AlbbmZ/messages "HTTP/1.1 200 OK"
2025-05-02 21:34:33,162 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 21:34:33,162 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 21:34:37,024 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:34:37,024 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 21:34:37,024 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:34:37,024 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 21:34:38,498 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 21:34:39,421 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:34:39,422 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 21:34:39,423 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 21:34:48,036 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:34:48,036 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:34:48,036 - hr_assistant - INFO - Processing query for employee EMP103: Show me the attendance summary for the Nastecsol branch yesterday
2025-05-02 21:34:48,036 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 21:34:49,402 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:34:49,407 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:34:49,407 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 21:34:50,428 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 21:34:51,522 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/messages "HTTP/1.1 200 OK"
2025-05-02 21:34:53,180 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs "HTTP/1.1 200 OK"
2025-05-02 21:34:54,184 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs "HTTP/1.1 200 OK"
2025-05-02 21:34:56,884 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs "HTTP/1.1 200 OK"
2025-05-02 21:34:56,886 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'branch_id': '66cd76b107aed2eef86b88f1'}
2025-05-02 21:34:56,886 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:34:56,886 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:34:56,886 - hr_assistant - INFO - Filters - Company: None, Branch: 66cd76b107aed2eef86b88f1, Department: None
2025-05-02 21:34:56,886 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:34:56,886 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:34:56,887 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:34:58,341 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:34:58,342 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:34:58,343 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:34:59,541 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:35:00,667 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:35:03,168 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs "HTTP/1.1 200 OK"
2025-05-02 21:35:03,169 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday'}
2025-05-02 21:35:03,169 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:35:03,169 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:35:03,170 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:35:03,170 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:35:03,170 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:35:03,170 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:35:04,630 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:35:04,632 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:35:04,632 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:35:05,978 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:35:07,834 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:35:10,332 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs "HTTP/1.1 200 OK"
2025-05-02 21:35:10,334 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'yesterday'}
2025-05-02 21:35:10,334 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: yesterday)
2025-05-02 21:35:10,334 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-02 21:35:10,334 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:35:10,335 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-02 21:35:11,255 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-02 21:35:11,257 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-01/2025-05-01?page=0&limit=50
2025-05-02 21:35:12,359 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-02 21:35:13,516 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:35:16,204 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs "HTTP/1.1 200 OK"
2025-05-02 21:35:18,713 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs "HTTP/1.1 200 OK"
2025-05-02 21:35:21,350 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs "HTTP/1.1 200 OK"
2025-05-02 21:35:24,100 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_hX65bnIZwCeG2zTGuk2SYvIs "HTTP/1.1 200 OK"
2025-05-02 21:35:24,525 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/messages "HTTP/1.1 200 OK"
2025-05-02 21:35:42,725 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:35:42,726 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:35:42,726 - hr_assistant - INFO - Processing query for employee EMP103: Show me the attendance summary for the all companies yesterday
2025-05-02 21:35:44,389 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:35:44,391 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:35:45,515 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu "HTTP/1.1 200 OK"
2025-05-02 21:35:45,516 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_9TR5ckxMXJE9z0zuc9KYIIKu
2025-05-02 21:35:46,551 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/messages "HTTP/1.1 200 OK"
2025-05-02 21:35:48,381 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs "HTTP/1.1 200 OK"
2025-05-02 21:35:49,344 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:35:51,863 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:35:51,864 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday'}
2025-05-02 21:35:51,864 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:35:51,864 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:35:51,864 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:35:51,864 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:35:51,865 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:35:51,865 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:35:53,322 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:35:53,325 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:35:53,325 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:35:54,426 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:35:56,079 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:35:59,134 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:36:01,692 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:36:04,253 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:36:06,915 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:36:06,916 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'company_id': '66cd76b107aed2eef86b88ef'}
2025-05-02 21:36:06,916 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:36:06,916 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:36:06,916 - hr_assistant - INFO - Filters - Company: 66cd76b107aed2eef86b88ef, Branch: None, Department: None
2025-05-02 21:36:06,917 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:36:06,917 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:36:06,917 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:36:08,350 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:36:08,352 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:36:08,352 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:36:09,449 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:36:11,421 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:36:14,153 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:36:14,154 - hr_assistant - INFO - Processing tool call: get_attendance with args: {'employee_id': 'EMP103', 'date_type': 'recent', 'include_team': True}
2025-05-02 21:36:14,154 - hr_assistant - INFO - Processing attendance request for employee: EMP103 (date_type: recent, include_team: True)
2025-05-02 21:36:14,154 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:36:14,154 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:36:14,154 - hr_assistant - INFO - Employee EMP103 has grade L4, is_manager: True
2025-05-02 21:36:14,154 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: recent)
2025-05-02 21:36:14,154 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-02 21:36:14,155 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:36:14,156 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-02 21:36:15,065 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-02 21:36:15,067 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-02/2025-04-25?page=0&limit=50
2025-05-02 21:36:16,220 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-02 21:36:24,109 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG/submit_tool_outputs "HTTP/1.1 502 Bad Gateway"
2025-05-02 21:36:24,111 - openai._base_client - INFO - Retrying request to /threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG/submit_tool_outputs in 0.418222 seconds
2025-05-02 21:36:25,538 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:36:28,037 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:36:30,511 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:36:33,028 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/runs/run_7ZJOhi1SNkcJUnRPVbGzoiUG "HTTP/1.1 200 OK"
2025-05-02 21:36:33,432 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_9TR5ckxMXJE9z0zuc9KYIIKu/messages "HTTP/1.1 200 OK"
2025-05-02 21:38:35,468 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 21:38:35,469 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 21:38:43,767 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:38:43,767 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 21:38:43,767 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:38:43,767 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 21:38:45,327 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 21:38:46,366 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:38:46,367 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 21:38:46,370 - hr_assistant - INFO - Processing query for employee EMP103: Show me the attendance summary for the all companies yesterday
2025-05-02 21:38:46,370 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 21:38:48,214 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:38:48,478 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:38:48,479 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 21:38:49,651 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 21:38:50,756 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_txm1RrFfyQEwprbkBmPM2Xkk/messages "HTTP/1.1 200 OK"
2025-05-02 21:38:50,761 - hr_assistant - ERROR - Error generating response: cannot access local variable 'assistant_instructions' where it is not associated with a value
2025-05-02 21:39:08,281 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 21:39:08,282 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 21:39:11,461 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:39:11,461 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 21:39:11,461 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:39:11,462 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 21:39:12,976 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 21:39:14,012 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:39:14,014 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 21:39:14,016 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 21:39:16,946 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:39:16,946 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:39:16,946 - hr_assistant - INFO - Processing query for employee EMP103: Show me the attendance summary for the all companies yesterday
2025-05-02 21:39:16,946 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 21:39:18,408 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:39:18,413 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:39:18,413 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 21:39:19,392 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 21:39:20,459 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_pLjEVoeQ6w0Q1fLqJghUCEld/messages "HTTP/1.1 200 OK"
2025-05-02 21:39:22,193 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_pLjEVoeQ6w0Q1fLqJghUCEld/runs "HTTP/1.1 200 OK"
2025-05-02 21:39:22,713 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_pLjEVoeQ6w0Q1fLqJghUCEld/runs/run_dGgzyLs3icS1a8TVv6cPPvxx "HTTP/1.1 200 OK"
2025-05-02 21:39:25,420 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_pLjEVoeQ6w0Q1fLqJghUCEld/runs/run_dGgzyLs3icS1a8TVv6cPPvxx "HTTP/1.1 200 OK"
2025-05-02 21:39:25,422 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday'}
2025-05-02 21:39:25,422 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:39:25,422 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:39:25,422 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:39:25,422 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:39:25,422 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:39:25,423 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:39:26,904 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:39:26,906 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:39:26,906 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:39:28,083 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:39:28,083 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:39:28,986 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_pLjEVoeQ6w0Q1fLqJghUCEld/runs/run_dGgzyLs3icS1a8TVv6cPPvxx/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:39:31,493 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_pLjEVoeQ6w0Q1fLqJghUCEld/runs/run_dGgzyLs3icS1a8TVv6cPPvxx "HTTP/1.1 200 OK"
2025-05-02 21:39:32,022 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_pLjEVoeQ6w0Q1fLqJghUCEld/messages "HTTP/1.1 200 OK"
2025-05-02 21:40:32,451 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 21:40:32,452 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 21:40:38,931 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:40:38,931 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 21:40:38,931 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:40:38,931 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 21:40:40,450 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 21:40:41,365 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:40:41,366 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 21:40:41,368 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 21:40:43,915 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:40:43,915 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:40:43,916 - hr_assistant - INFO - Processing query for employee EMP103: Show me the attendance summary for the all companies yesterday
2025-05-02 21:40:43,916 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 21:40:46,217 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:40:46,225 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:40:46,225 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 21:40:46,649 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 21:40:47,691 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/messages "HTTP/1.1 200 OK"
2025-05-02 21:40:49,539 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs "HTTP/1.1 200 OK"
2025-05-02 21:40:50,003 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j "HTTP/1.1 200 OK"
2025-05-02 21:40:52,646 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j "HTTP/1.1 200 OK"
2025-05-02 21:40:52,667 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday'}
2025-05-02 21:40:52,667 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:40:52,667 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:40:52,667 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:40:52,667 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:40:52,667 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:40:52,667 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:40:54,250 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:40:54,251 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:40:54,252 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:40:55,581 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:40:55,581 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:40:59,471 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:41:02,033 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j "HTTP/1.1 200 OK"
2025-05-02 21:41:02,035 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'report_type': 'all'}
2025-05-02 21:41:02,035 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:41:02,035 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:41:02,035 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:41:02,035 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:41:02,035 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:41:02,036 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:41:03,792 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:41:03,793 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:41:03,793 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:41:05,109 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:41:05,109 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:41:06,130 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:41:08,591 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j "HTTP/1.1 200 OK"
2025-05-02 21:41:11,114 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j "HTTP/1.1 200 OK"
2025-05-02 21:41:11,115 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'report_type': 'present'}
2025-05-02 21:41:11,115 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:41:11,115 - hr_assistant - INFO - Date type: yesterday, Report type: present
2025-05-02 21:41:11,115 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:41:11,115 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:41:11,115 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:41:11,115 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:41:12,707 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:41:12,709 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:41:12,709 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:41:13,914 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:41:13,914 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:41:14,934 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:41:17,492 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j "HTTP/1.1 200 OK"
2025-05-02 21:41:17,494 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'report_type': 'absent'}
2025-05-02 21:41:17,494 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:41:17,494 - hr_assistant - INFO - Date type: yesterday, Report type: absent
2025-05-02 21:41:17,494 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:41:17,494 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:41:17,495 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:41:17,495 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:41:19,033 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:41:19,035 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:41:19,035 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:41:20,261 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:41:20,261 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:41:21,282 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:41:23,842 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j "HTTP/1.1 200 OK"
2025-05-02 21:41:23,844 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'report_type': 'late'}
2025-05-02 21:41:23,844 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:41:23,844 - hr_assistant - INFO - Date type: yesterday, Report type: late
2025-05-02 21:41:23,844 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:41:23,844 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:41:23,844 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:41:23,845 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:41:25,386 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:41:25,389 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:41:25,389 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:41:26,501 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:41:26,501 - hr_assistant - ERROR - Error retrieving attendance report data: 'NoneType' object is not subscriptable
2025-05-02 21:41:28,248 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:41:31,973 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/runs/run_037RMAC9H64kGcoeuVNqMd0j "HTTP/1.1 200 OK"
2025-05-02 21:41:32,352 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_3i5sPGcDxdyGBLpnXpqJVKH9/messages "HTTP/1.1 200 OK"
2025-05-02 21:42:43,758 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 21:42:43,759 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 21:42:46,568 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:42:46,569 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 21:42:46,569 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:42:46,569 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 21:42:48,142 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 21:42:49,050 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:42:49,051 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 21:42:49,054 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 21:43:10,140 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:43:10,140 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:43:10,140 - hr_assistant - INFO - Processing query for employee EMP103: show attendance for all companies of yesterday
2025-05-02 21:43:10,140 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 21:43:11,368 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:43:11,592 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:43:11,592 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 21:43:12,700 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 21:43:13,205 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/messages "HTTP/1.1 200 OK"
2025-05-02 21:43:14,744 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs "HTTP/1.1 200 OK"
2025-05-02 21:43:16,093 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_YTqGdM3GItq4lgpti5dZZSSl "HTTP/1.1 200 OK"
2025-05-02 21:43:18,636 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_YTqGdM3GItq4lgpti5dZZSSl "HTTP/1.1 200 OK"
2025-05-02 21:43:18,638 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday'}
2025-05-02 21:43:18,638 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:43:18,639 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:43:18,639 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:43:18,639 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:43:18,639 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:43:18,639 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:43:20,377 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:43:20,379 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:43:20,379 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:43:21,607 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:43:21,607 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:43:21,607 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/671a3fa5c67936eae8048ecf?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:43:22,735 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf
2025-05-02 21:43:22,735 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf
2025-05-02 21:43:22,735 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/680a3ec0e7e94af813bc7466?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:43:23,863 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Coke
2025-05-02 21:43:23,863 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Coke
2025-05-02 21:43:23,863 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/68132f7f34340cfb2354708a?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:43:25,188 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf al Tamayouz
2025-05-02 21:43:25,188 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf al Tamayouz
2025-05-02 21:43:25,190 - hr_assistant - INFO - Successfully generated attendance report for employee: EMP103
2025-05-02 21:43:26,827 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_YTqGdM3GItq4lgpti5dZZSSl/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:43:29,292 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_YTqGdM3GItq4lgpti5dZZSSl "HTTP/1.1 200 OK"
2025-05-02 21:43:32,459 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_YTqGdM3GItq4lgpti5dZZSSl "HTTP/1.1 200 OK"
2025-05-02 21:43:35,467 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_YTqGdM3GItq4lgpti5dZZSSl "HTTP/1.1 200 OK"
2025-05-02 21:43:35,837 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/messages "HTTP/1.1 200 OK"
2025-05-02 21:44:18,824 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:44:18,824 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:44:18,825 - hr_assistant - INFO - Processing query for employee EMP103: show attendance for Nastecsol companies of yesterday
2025-05-02 21:44:20,073 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:44:20,074 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:44:20,587 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K "HTTP/1.1 200 OK"
2025-05-02 21:44:20,588 - hr_assistant - INFO - Using existing thread for employee EMP103: thread_lKjX4nEPdb3hvUzFxJxKh03K
2025-05-02 21:44:21,069 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/messages "HTTP/1.1 200 OK"
2025-05-02 21:44:23,554 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs "HTTP/1.1 200 OK"
2025-05-02 21:44:24,067 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_g8CGDV24M1SmdyLpS81zCzqG "HTTP/1.1 200 OK"
2025-05-02 21:44:26,598 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_g8CGDV24M1SmdyLpS81zCzqG "HTTP/1.1 200 OK"
2025-05-02 21:44:26,600 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'company_id': '66cd76b107aed2eef86b88ef'}
2025-05-02 21:44:26,600 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:44:26,600 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:44:26,600 - hr_assistant - INFO - Filters - Company: 66cd76b107aed2eef86b88ef, Branch: None, Department: None
2025-05-02 21:44:26,600 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:44:26,600 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:44:26,600 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:44:28,170 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:44:28,171 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:44:28,172 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:44:29,267 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:44:29,267 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:44:29,269 - hr_assistant - INFO - Successfully generated attendance report for employee: EMP103
2025-05-02 21:44:31,136 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_g8CGDV24M1SmdyLpS81zCzqG/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:44:33,784 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_g8CGDV24M1SmdyLpS81zCzqG "HTTP/1.1 200 OK"
2025-05-02 21:44:36,405 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_g8CGDV24M1SmdyLpS81zCzqG "HTTP/1.1 200 OK"
2025-05-02 21:44:39,019 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/runs/run_g8CGDV24M1SmdyLpS81zCzqG "HTTP/1.1 200 OK"
2025-05-02 21:44:39,382 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lKjX4nEPdb3hvUzFxJxKh03K/messages "HTTP/1.1 200 OK"
2025-05-02 21:46:53,732 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-02 21:46:53,733 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-02 21:47:07,577 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:47:07,577 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-02 21:47:07,577 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:47:07,577 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-02 21:47:09,058 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-02 21:47:09,966 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '123456', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-02 21:47:09,966 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-02 21:47:09,968 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-02 21:47:13,995 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-02 21:47:13,995 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-02 21:47:13,995 - hr_assistant - INFO - Processing query for employee EMP103: show attendance for Nastecsol companies of yesterday
2025-05-02 21:47:13,995 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-02 21:47:15,791 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-02 21:47:16,109 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-02 21:47:16,109 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-02 21:47:17,328 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-02 21:47:18,426 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/messages "HTTP/1.1 200 OK"
2025-05-02 21:47:20,003 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs "HTTP/1.1 200 OK"
2025-05-02 21:47:20,453 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE "HTTP/1.1 200 OK"
2025-05-02 21:47:23,063 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE "HTTP/1.1 200 OK"
2025-05-02 21:47:25,533 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE "HTTP/1.1 200 OK"
2025-05-02 21:47:25,535 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'company_id': '66cd767307aed2eef86b88ed', 'report_type': 'all'}
2025-05-02 21:47:25,535 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:47:25,535 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:47:25,535 - hr_assistant - INFO - Filters - Company: 66cd767307aed2eef86b88ed, Branch: None, Department: None
2025-05-02 21:47:25,535 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:47:25,535 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:47:25,536 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:47:27,057 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:47:27,060 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:47:27,060 - hr_assistant - WARNING - No matching companies found for filter: 66cd767307aed2eef86b88ed
2025-05-02 21:47:27,978 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:47:30,649 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE "HTTP/1.1 200 OK"
2025-05-02 21:47:30,651 - hr_assistant - INFO - Processing tool call: get_attendance_report with args: {'employee_id': 'EMP103', 'date_type': 'yesterday', 'report_type': 'all'}
2025-05-02 21:47:30,651 - hr_assistant - INFO - Processing attendance report request for employee: EMP103
2025-05-02 21:47:30,651 - hr_assistant - INFO - Date type: yesterday, Report type: all
2025-05-02 21:47:30,651 - hr_assistant - INFO - Filters - Company: None, Branch: None, Department: None
2025-05-02 21:47:30,651 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-02 21:47:30,651 - hr_assistant - INFO - Using cached employee data for: EMP103
2025-05-02 21:47:30,651 - hr_assistant - INFO - Fetching organization structure data for organization ID: 66cd767307aed2eef86b88ed
2025-05-02 21:47:32,587 - hr_assistant - INFO - Successfully retrieved organization structure data
2025-05-02 21:47:32,588 - hr_assistant - INFO - Fetching attendance report data for date range: 2025-05-01 to 2025-05-01
2025-05-02 21:47:32,589 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/66cd76b107aed2eef86b88ef?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:47:33,918 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:47:33,919 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: NASTECSOL
2025-05-02 21:47:33,919 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/671a3fa5c67936eae8048ecf?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:47:35,065 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf
2025-05-02 21:47:35,065 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf
2025-05-02 21:47:35,065 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/680a3ec0e7e94af813bc7466?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:47:36,275 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Coke
2025-05-02 21:47:36,275 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Coke
2025-05-02 21:47:36,275 - hr_assistant - INFO - Fetching attendance from URL: https://dev.nashrms.com/api/c-emp-attendance/getAttendanceReport/68132f7f34340cfb2354708a?startDate=2025-05-01&endDate=2025-05-01&limit=1000&page=0
2025-05-02 21:47:37,400 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf al Tamayouz
2025-05-02 21:47:37,400 - hr_assistant - INFO - Successfully retrieved and organized attendance data for company: Qitaf al Tamayouz
2025-05-02 21:47:37,402 - hr_assistant - INFO - Successfully generated attendance report for employee: EMP103
2025-05-02 21:47:38,433 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-02 21:47:40,919 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE "HTTP/1.1 200 OK"
2025-05-02 21:47:43,912 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE "HTTP/1.1 200 OK"
2025-05-02 21:47:46,476 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE "HTTP/1.1 200 OK"
2025-05-02 21:47:49,086 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/runs/run_6PJUMGBFGI586vYrLglP9QAE "HTTP/1.1 200 OK"
2025-05-02 21:47:49,445 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_eICALQ9gkowOoI1LVuxMiNF4/messages "HTTP/1.1 200 OK"
2025-05-06 14:32:51,889 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-06 14:32:51,890 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-06 14:33:02,742 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 14:33:02,742 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-06 14:33:02,742 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-06 14:33:02,742 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-06 14:33:07,860 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-06 14:33:10,233 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-06 14:33:10,234 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-06 14:33:10,237 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-06 14:33:15,425 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 14:33:15,425 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-06 14:33:15,425 - hr_assistant - INFO - Processing query for employee EMP103: Show my team's attendance for this month
2025-05-06 14:33:15,425 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-06 14:33:17,187 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 401 Unauthorized"
2025-05-06 14:33:17,189 - hr_assistant - WARNING - Failed to retrieve assistant asst_jJJpthCMDPcR2VtyafbhzpVI: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-proj-********************************************************************************************************************************************************IEgA. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-05-06 14:33:17,189 - hr_assistant - INFO - Creating new HR assistant
2025-05-06 14:33:17,189 - hr_assistant - ERROR - Error generating response: Assistant ID not found and creation logic not implemented
2025-05-06 14:34:02,093 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-06 14:34:02,094 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-06 14:34:06,605 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 14:34:06,605 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-06 14:34:06,605 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-06 14:34:06,605 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-06 14:34:09,353 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-06 14:34:11,224 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-06 14:34:11,225 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-06 14:34:11,226 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-06 14:34:14,960 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 14:34:14,960 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-06 14:34:14,960 - hr_assistant - INFO - Processing query for employee EMP103: Show my team's attendance for this month
2025-05-06 14:34:14,960 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-06 14:34:15,001 - hr_assistant - INFO - Creating new HR assistant
2025-05-06 14:34:15,001 - hr_assistant - ERROR - Error generating response: Assistant ID not found and creation logic not implemented
2025-05-06 14:39:07,265 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-06 14:39:07,267 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-06 14:39:11,410 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 14:39:11,410 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-06 14:39:11,410 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-06 14:39:11,410 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-06 14:39:13,147 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-06 14:39:14,137 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-06 14:39:14,138 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-06 14:39:14,140 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-06 14:39:17,111 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 14:39:17,111 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-06 14:39:17,111 - hr_assistant - INFO - Processing query for employee EMP103: Show my team's attendance for this month
2025-05-06 14:39:17,111 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-06 14:39:17,148 - hr_assistant - INFO - Creating new HR assistant
2025-05-06 14:39:17,148 - hr_assistant - ERROR - Error generating response: Assistant ID not found and creation logic not implemented
2025-05-06 14:40:47,112 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-06 14:40:47,113 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-06 14:40:50,843 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 14:40:50,843 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-06 14:40:50,843 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-06 14:40:50,843 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-06 14:40:52,377 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-06 14:40:53,289 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-06 14:40:53,289 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-06 14:40:53,291 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-06 14:44:26,787 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-06 14:44:26,788 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-06 14:44:59,907 - hr_assistant - ERROR - Assistant instructions module not found. Please create assistant_instructions.py in the root directory.
2025-05-06 14:44:59,908 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-06 15:04:48,648 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-06 15:04:48,649 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-06 15:05:22,405 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 15:05:22,405 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-06 15:05:22,405 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-06 15:05:22,405 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-06 15:05:25,005 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-06 15:05:25,965 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-06 15:05:25,965 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-06 15:05:25,966 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-06 15:05:29,006 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 15:05:29,006 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-06 15:05:29,006 - hr_assistant - INFO - Processing query for employee EMP103: Show my team's attendance for this month
2025-05-06 15:05:29,007 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-06 15:05:29,042 - hr_assistant - INFO - Creating new HR assistant
2025-05-06 15:05:29,042 - hr_assistant - ERROR - Error generating response: Assistant ID not found and creation logic not implemented
2025-05-06 15:15:52,082 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-06 15:15:52,083 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-06 15:15:56,837 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 15:15:56,837 - hr_assistant - INFO - Fetching fresh employee data for employee EMP103
2025-05-06 15:15:56,837 - hr_assistant - INFO - Requesting employee data for: EMP103
2025-05-06 15:15:56,837 - hr_assistant - INFO - Attempting login for user: EMP103
2025-05-06 15:15:58,371 - hr_assistant - INFO - Login successful for user: EMP103
2025-05-06 15:15:59,287 - hr_assistant - INFO - Retrieved employee data: {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-06 15:15:59,287 - hr_assistant - INFO - Successfully retrieved data for employee: EMP103
2025-05-06 15:15:59,290 - hr_assistant - INFO - Sending initial greeting to employee: EMP103
2025-05-06 15:16:05,840 - hr_assistant - INFO - Chat request received for employee: EMP103
2025-05-06 15:16:05,840 - hr_assistant - INFO - Using cached employee data for employee EMP103
2025-05-06 15:16:05,840 - hr_assistant - INFO - Processing query for employee EMP103: Show my team's attendance for this month
2025-05-06 15:16:05,840 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-06 15:16:07,073 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-06 15:16:07,345 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-06 15:16:07,345 - hr_assistant - INFO - Creating new thread for employee EMP103
2025-05-06 15:16:08,761 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-06 15:16:09,509 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gtKDPU2oJ5vh1hYwFUBpZQBR/messages "HTTP/1.1 200 OK"
2025-05-06 15:16:10,872 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gtKDPU2oJ5vh1hYwFUBpZQBR/runs "HTTP/1.1 200 OK"
2025-05-06 15:16:11,395 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gtKDPU2oJ5vh1hYwFUBpZQBR/runs/run_nmo5ebnOO7KiPVn6PNGuJOIE "HTTP/1.1 200 OK"
2025-05-06 15:16:14,632 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gtKDPU2oJ5vh1hYwFUBpZQBR/runs/run_nmo5ebnOO7KiPVn6PNGuJOIE "HTTP/1.1 200 OK"
2025-05-06 15:16:14,733 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP103', 'date_type': 'this_month'}
2025-05-06 15:16:14,733 - hr_assistant - INFO - Fetching team attendance for manager: EMP103 (date_type: this_month)
2025-05-06 15:16:14,734 - hr_assistant - INFO - Fetching team data for manager: EMP103
2025-05-06 15:16:14,734 - hr_assistant - INFO - cache data for manager {'_id': '66d824a199b629cbdb2e0f2d', 'userName': 'nasar', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'personalEmail': None, 'workEmail': 'hamzaakram0312@gmail.com'}], 'firstName': 'nasar', 'middleName': 'bin', 'lastName': 'ibrahim', 'martialStatus': 'Married', 'religion': 'islam', 'address': {'streetAddress': 'street # 6', 'city': 'Example City', 'country': 'Example Country'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996777', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'manager', 'profession': 'IT expert', 'nationality': 'American', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/jpeg_ATT1365.jpeg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L0', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'FullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP103'}], 'salaryInfo': {'baseSalary': '5000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'deductions': [{'deductionTitle': '', 'deductionType': '', 'amount': '', 'basedOn': ''}], 'taxInfo': {'texPercentage': '', 'deductableAmount': '', 'timeCycle': ''}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'FaceBook', 'platformIcon': '', 'platformURL': '', 'profileURL': ''}], 'loanInfo': [{'totalLoanAmount': 5000, 'loanIssueDate': '2024-10-23T09:47:57.374Z', 'loanDuration': 5, 'installmentAmount': 1000, 'paidAmount': 0, 'totalInstallments': 5, 'paidInstallments': 0}], 'assetsInfo': [{'assetName': 'Property A', 'assetId': None, 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}, {'assetName': 'جوال || Mobile ', 'assetId': 8589, 'assetType': 'Unknown', 'issueDateFrom': '2024-11-01', 'issueDateTo': '2024-11-30'}], 'approvals': [{'approvalId': '', 'approvalType': '', 'approvalTitle': '', 'approvalStatus': ''}], 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': '', 'remarks': '', 'URL': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT723.png', 'format': 'png', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'type': 'Doc_editor_shared', 'remarks': '', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT757.pdf', 'format': 'pdf', 'empId': 'EMP103', 'expiration': '', 'size': ''}, {'docId': '6800d651d7e5373fd775daa9', 'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1373.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': '', 'createdAt': '2025-04-17T10:22:09.786Z', 'updatedAt': '2025-04-17T10:22:09.786Z'}], 'createdBy': 'EMP-105', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 8, 'leaveBalance': {'annualLeave': {'currentMonth': 'April', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 2, 'used': 0}, 'sickLeave': {'entitlement': 120, 'remaining': 113, 'used': 7}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': -15601}}, 'updatedAt': '2025-04-28T23:00:02.467Z', 'remoteLocation': {'lastLocation': '33.6995,73.0363|0.0,0.0', 'lastLocationUpdatedAt': '2025-04-16T13:44:38.963Z'}}
2025-05-06 15:16:14,734 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/66d824a199b629cbdb2e0f2d
2025-05-06 15:16:15,752 - hr_assistant - INFO - Successfully retrieved team data for manager EMP103 with 3 team members
2025-05-06 15:16:15,754 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/6711f83cbb8ea69acefdb5a4,66fa8471a8adc4a2c26c058e,680627695993fc1ee4c4f793/2025-05-06/2025-05-01?page=0&limit=50
2025-05-06 15:16:16,858 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP103
2025-05-06 15:16:18,019 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_gtKDPU2oJ5vh1hYwFUBpZQBR/runs/run_nmo5ebnOO7KiPVn6PNGuJOIE/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-06 15:16:20,814 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gtKDPU2oJ5vh1hYwFUBpZQBR/runs/run_nmo5ebnOO7KiPVn6PNGuJOIE "HTTP/1.1 200 OK"
2025-05-06 15:16:23,525 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gtKDPU2oJ5vh1hYwFUBpZQBR/runs/run_nmo5ebnOO7KiPVn6PNGuJOIE "HTTP/1.1 200 OK"
2025-05-06 15:16:26,243 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gtKDPU2oJ5vh1hYwFUBpZQBR/runs/run_nmo5ebnOO7KiPVn6PNGuJOIE "HTTP/1.1 200 OK"
2025-05-06 15:16:26,903 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_gtKDPU2oJ5vh1hYwFUBpZQBR/messages "HTTP/1.1 200 OK"
