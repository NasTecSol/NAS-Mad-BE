2025-05-13 16:55:36,004 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-13 16:55:36,005 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-13 16:57:15,513 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-13 16:57:15,514 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-13 16:57:18,832 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-05-13 16:57:18,832 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-05-13 16:57:18,832 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-05-13 16:57:18,832 - hr_assistant - INFO - Attempting login for user: EMP101
2025-05-13 16:57:20,900 - hr_assistant - INFO - Login successful for user: EMP101
2025-05-13 16:57:21,814 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-05-13T11:34:21.972Z'}
2025-05-13 16:57:21,815 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-05-13 16:57:21,816 - hr_assistant - INFO - Processing query for employee EMP101: show my team attendance for this week
2025-05-13 16:57:21,816 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-13 16:57:23,869 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-13 16:57:24,122 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-13 16:57:24,122 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-05-13 16:57:24,899 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-13 16:57:25,630 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_85uv4jSRsCOjxcnvPQSWbv91/messages "HTTP/1.1 200 OK"
2025-05-13 16:57:27,089 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_85uv4jSRsCOjxcnvPQSWbv91/runs "HTTP/1.1 200 OK"
2025-05-13 16:57:29,405 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_85uv4jSRsCOjxcnvPQSWbv91/runs/run_dvu5q55PypW0ZvjITSXCt8VG "HTTP/1.1 200 OK"
2025-05-13 16:57:32,275 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_85uv4jSRsCOjxcnvPQSWbv91/runs/run_dvu5q55PypW0ZvjITSXCt8VG "HTTP/1.1 200 OK"
2025-05-13 16:57:32,376 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP101', 'date_type': 'recent'}
2025-05-13 16:57:32,376 - hr_assistant - INFO - Fetching team attendance for manager: EMP101 (date_type: recent)
2025-05-13 16:57:32,376 - hr_assistant - INFO - Fetching team data for manager: EMP101
2025-05-13 16:57:32,376 - hr_assistant - INFO - cache data for manager {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-05-13T11:34:21.972Z'}
2025-05-13 16:57:32,377 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/6711f83cbb8ea69acefdb5a4
2025-05-13 16:57:33,267 - hr_assistant - INFO - Successfully retrieved team data for manager EMP101 with 28 team members
2025-05-13 16:57:33,268 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a,66d825a399b629cbdb2e0f54,671a4dc5c67936eae80490cb,6803ae3f4ce909a1363894c1,6803bf914ce909a13638958c,6803ee1f4ce909a1363897ad,68075caa8428eafcbc43c1aa,68077a736a3f0d5369367749,68077b7d6a3f0d53693677ba,68077bc26a3f0d53693677db,6814b1a3fbcb55bc3e43f4af,6814b331fbcb55bc3e43f4e5,6814b578fbcb55bc3e43f5d7,68185056d39d1d952690640c,6818539cd39d1d95269064a9,681854a9d39d1d95269064f7,68186fd4521fa9b1c65f931a,6818719d521fa9b1c65f9354,681873b811ba5161216c5e3b,68189a70a4d2a5b4dddbf398,6818ab0fde60709ccfe2f8aa,68199249de60709ccfe2fd63,6819ceeddc5723908f41c4ee,6819d05cdc5723908f41c528,6819d142dc5723908f41c5c4,6821e0ee261d5ca0c6410fef,6821e135362867de478d6be3,6821e363362867de478d6c5d/2025-05-13/2025-05-06?page=0&limit=50
2025-05-13 16:57:34,834 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP101
2025-05-13 16:57:36,060 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_85uv4jSRsCOjxcnvPQSWbv91/runs/run_dvu5q55PypW0ZvjITSXCt8VG/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-13 16:57:38,928 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_85uv4jSRsCOjxcnvPQSWbv91/runs/run_dvu5q55PypW0ZvjITSXCt8VG "HTTP/1.1 200 OK"
2025-05-13 16:57:42,233 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_85uv4jSRsCOjxcnvPQSWbv91/runs/run_dvu5q55PypW0ZvjITSXCt8VG "HTTP/1.1 200 OK"
2025-05-13 16:57:45,216 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_85uv4jSRsCOjxcnvPQSWbv91/runs/run_dvu5q55PypW0ZvjITSXCt8VG "HTTP/1.1 200 OK"
2025-05-13 16:57:45,712 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_85uv4jSRsCOjxcnvPQSWbv91/messages "HTTP/1.1 200 OK"
2025-05-13 17:44:28,950 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-13 17:44:28,951 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-13 17:44:47,867 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-05-13 17:44:47,867 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-05-13 17:44:47,868 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-05-13 17:44:47,868 - hr_assistant - INFO - Attempting login for user: EMP101
2025-05-13 17:44:51,245 - hr_assistant - INFO - Login successful for user: EMP101
2025-05-13 17:44:52,136 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-05-13T11:34:21.972Z'}
2025-05-13 17:44:52,136 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-05-13 17:44:52,137 - hr_assistant - INFO - Processing query for employee EMP101: show my team attendance for this week
2025-05-13 17:44:52,137 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-13 17:44:53,917 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-13 17:44:53,931 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-13 17:44:53,932 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-05-13 17:44:54,665 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-13 17:44:55,453 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/messages "HTTP/1.1 200 OK"
2025-05-13 17:44:56,966 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/runs "HTTP/1.1 200 OK"
2025-05-13 17:44:58,196 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/runs/run_s9Xr4cFyYo42N7NQZd31PhwJ "HTTP/1.1 200 OK"
2025-05-13 17:45:00,721 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/runs/run_s9Xr4cFyYo42N7NQZd31PhwJ "HTTP/1.1 200 OK"
2025-05-13 17:45:00,976 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP101', 'date_type': 'recent'}
2025-05-13 17:45:00,976 - hr_assistant - INFO - Fetching team attendance for manager: EMP101 (date_type: recent)
2025-05-13 17:45:00,976 - hr_assistant - INFO - Fetching team data for manager: EMP101
2025-05-13 17:45:00,976 - hr_assistant - INFO - cache data for manager {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-05-13T11:34:21.972Z'}
2025-05-13 17:45:00,976 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/6711f83cbb8ea69acefdb5a4
2025-05-13 17:45:01,885 - hr_assistant - INFO - Successfully retrieved team data for manager EMP101 with 28 team members
2025-05-13 17:45:01,885 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a,66d825a399b629cbdb2e0f54,671a4dc5c67936eae80490cb,6803ae3f4ce909a1363894c1,6803bf914ce909a13638958c,6803ee1f4ce909a1363897ad,68075caa8428eafcbc43c1aa,68077a736a3f0d5369367749,68077b7d6a3f0d53693677ba,68077bc26a3f0d53693677db,6814b1a3fbcb55bc3e43f4af,6814b331fbcb55bc3e43f4e5,6814b578fbcb55bc3e43f5d7,68185056d39d1d952690640c,6818539cd39d1d95269064a9,681854a9d39d1d95269064f7,68186fd4521fa9b1c65f931a,6818719d521fa9b1c65f9354,681873b811ba5161216c5e3b,68189a70a4d2a5b4dddbf398,6818ab0fde60709ccfe2f8aa,68199249de60709ccfe2fd63,6819ceeddc5723908f41c4ee,6819d05cdc5723908f41c528,6819d142dc5723908f41c5c4,6821e0ee261d5ca0c6410fef,6821e135362867de478d6be3,6821e363362867de478d6c5d/2025-05-13/2025-05-06?page=0&limit=50
2025-05-13 17:45:03,390 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP101
2025-05-13 17:45:05,113 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/runs/run_s9Xr4cFyYo42N7NQZd31PhwJ/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-13 17:45:07,851 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/runs/run_s9Xr4cFyYo42N7NQZd31PhwJ "HTTP/1.1 200 OK"
2025-05-13 17:45:10,553 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/runs/run_s9Xr4cFyYo42N7NQZd31PhwJ "HTTP/1.1 200 OK"
2025-05-13 17:45:13,263 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/runs/run_s9Xr4cFyYo42N7NQZd31PhwJ "HTTP/1.1 200 OK"
2025-05-13 17:45:15,801 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/runs/run_s9Xr4cFyYo42N7NQZd31PhwJ "HTTP/1.1 200 OK"
2025-05-13 17:45:16,303 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_lvQ72AtmOr7hWJIrGTm6j3KE/messages "HTTP/1.1 200 OK"
2025-05-13 17:45:16,307 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-05-13 17:45:16,307 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-05-13 17:45:16,308 - hr_assistant - INFO - Employee EMP101 already greeted today, sending minimal greeting
2025-05-13 18:27:34,019 - hr_assistant - INFO - Successfully imported assistant instructions module
2025-05-13 18:27:34,020 - hr_assistant - WARNING - Simulated API module not found. API simulation will not be available.
2025-05-13 18:28:02,242 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-05-13 18:28:02,243 - hr_assistant - INFO - Fetching fresh employee data for employee EMP101
2025-05-13 18:28:02,243 - hr_assistant - INFO - Requesting employee data for: EMP101
2025-05-13 18:28:02,243 - hr_assistant - INFO - Attempting login for user: EMP101
2025-05-13 18:28:04,649 - hr_assistant - INFO - Login successful for user: EMP101
2025-05-13 18:28:05,567 - hr_assistant - INFO - Retrieved employee data: {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-05-13T11:34:21.972Z'}
2025-05-13 18:28:05,567 - hr_assistant - INFO - Successfully retrieved data for employee: EMP101
2025-05-13 18:28:05,568 - hr_assistant - INFO - Processing query for employee EMP101: show my team attendance for this week
2025-05-13 18:28:05,568 - hr_assistant - INFO - Initializing new OpenAI client
2025-05-13 18:28:07,262 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/assistants/asst_jJJpthCMDPcR2VtyafbhzpVI "HTTP/1.1 200 OK"
2025-05-13 18:28:07,274 - hr_assistant - INFO - Using existing assistant with ID: asst_jJJpthCMDPcR2VtyafbhzpVI
2025-05-13 18:28:07,274 - hr_assistant - INFO - Creating new thread for employee EMP101
2025-05-13 18:28:08,517 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads "HTTP/1.1 200 OK"
2025-05-13 18:28:17,652 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/messages "HTTP/1.1 200 OK"
2025-05-13 18:28:19,598 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/runs "HTTP/1.1 200 OK"
2025-05-13 18:28:20,198 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/runs/run_PluwLMNXWqPVMXORZenuzupt "HTTP/1.1 200 OK"
2025-05-13 18:28:23,044 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/runs/run_PluwLMNXWqPVMXORZenuzupt "HTTP/1.1 200 OK"
2025-05-13 18:28:26,092 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/runs/run_PluwLMNXWqPVMXORZenuzupt "HTTP/1.1 200 OK"
2025-05-13 18:28:26,335 - hr_assistant - INFO - Processing tool call: get_team_attendance with args: {'employee_id': 'EMP101', 'date_type': 'recent'}
2025-05-13 18:28:26,335 - hr_assistant - INFO - Fetching team attendance for manager: EMP101 (date_type: recent)
2025-05-13 18:28:26,335 - hr_assistant - INFO - Fetching team data for manager: EMP101
2025-05-13 18:28:26,336 - hr_assistant - INFO - cache data for manager {'_id': '6711f83cbb8ea69acefdb5a4', 'userName': 'Anns Mustafa', 'password': '$2b$10$lfI96ZA4Bg/flDV..pUDYuQgyIi7ojq6l4LNknxcsTgJrO/l5kk66', 'email': [{'workEmail': 'anns@gmail.com'}], 'firstName': 'Anns', 'middleName': '', 'lastName': 'Mustafa', 'martialStatus': 'Married', 'religion': 'Muslim', 'address': {'streetAddress': 'PWD,street # 6', 'city': 'Islamabad', 'country': 'MiTru'}, 'NIC': '1234567890123', 'iqamaNumber': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'passport': {'id': '112', 'issueDate': '06-08-2024', 'expiryDate': '06-11-2024'}, 'imigrationSatus': 'national', 'DOB': '1990-01-01', 'age': 34, 'phoneNumber': [{'mobileNumber': '+923765431996', 'landlineNumber': '111-000-321-996'}], 'gender': 'Male', 'role': 'admin', 'profession': 'IT expert', 'nationality': 'German', 'profilePic': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT319.jpg', 'familyInfo': {'fatherName': 'Trump', 'motherName': 'danny', 'familyAddress': {'streetAddress': 'street#06', 'city': 'Example City', 'country': 'Example Country'}, 'familyContactNumber': '1234567', 'emergencyContactInfo': [{'relationName': 'John', 'relationType': 'Father', 'relationContactNumber': '1234567', 'relationAddress': 'America'}]}, 'educationInfo': [{'degreeName': 'Bachelor of Science', 'degreeType': 'Undergraduate', 'fieldofStudy': 'Computer Science', 'institute': 'University of Example', 'from': '2015-01-01', 'to': '2019-12-31', 'results': 'First Class'}], 'experienceBackground': [{'jobTitle': 'Software Engineer', 'company': 'Example Corp', 'referenceName': 'John Doe', 'referenceContact': '1234567890', 'duration': '2017-2021', 'from': '2017-01-01', 'to': '2021-12-31', 'description': 'Developed backend systems using Node.js'}], 'bankingInfo': [{'title': 'Savings Account', 'accountNumber': '12345678901234', 'branchCode': '012345', 'accountType': 'Savings', 'country': 'Saudia Arabia', 'empSwiftCode': '001', 'bankName': 'SNB'}], 'employeeInfo': [{'depId': 'DEP001', 'depName': 'IT Department', 'jobTitle': 'Software Engineer', 'jobDescription': 'Developing backend systems', 'reportingManager': 'EMP103', 'jobRank': 'Junior', 'designation': 'Software Engineer', 'grade': 'L2', 'workDomain': 'Backend Development', 'location': 'DHA', 'employeeStatus': 'Active', 'employeeType': 'FullTime', 'employeeShift': 'fullTime', 'joiningDate': '2020-01-01', 'leavingDate': '2023-12-31', 'hiringDate': '06-08-2024', 'noticePeriod': '3 months', 'empId': 'EMP101', 'empSignature': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1227.png'}], 'salaryInfo': {'baseSalary': '1000', 'currency': 'SAR', 'timeCycle_Period': 'Monthly', 'allowance_Benefits': [{'allowanceTitle': 'Transport', 'allowanceType': 'Monthly', 'amount': '25', 'basedOn': 'Contract'}], 'deductions': [{'deductionTitle': 'Income Tax', 'deductionType': 'Percentage', 'amount': '100', 'basedOn': 'Annual income'}], 'taxInfo': {'texPercentage': '10', 'deductableAmount': 500, 'timeCycle': 'Annual'}, 'allowanceContribution': '200', 'netSalary': '5025'}, 'socialLinks': [{'platformName': 'Facebook', 'platformIcon': 'data:image/png', 'platformURL': 'data:image/png', 'profileURL': 'data:image/png'}], 'loanInfo': [{'totalLoanAmount': '10000', 'loanIssueDate': '2023-01-01', 'loanDuration': '5 years', 'installmentAmount': '200', 'paidAmount': '8000', 'totalInstallments': '60', 'paidInstallments': '20', 'monthHistory': []}], 'assetsInfo': [{'assetName': 'Property A', 'assetType': 'Commercial', 'issueDateFrom': '2010-01-01', 'issueDateTo': '2020-12-31'}], 'remoteLocation': {'isRemoteAttendance': True, 'remoteAttendanceLoc': '', 'lastLocation': '33.5722082|73.1475905', 'lastLocationUpdatedAt': '2025-04-23T10:48:25.920Z'}, 'contractInfo': [{'contractId': 'CNT001', 'contractStatus': 'Active', 'contractType': 'permanent', 'contractStartDate': '06-08-2024', 'contractExpiry': '19-07-2024', 'probabtionStartDate': '08-08-2024', 'probationPeriod': '5 Months', 'probationstatus': 'Active'}], 'documentsInfo': [{'type': 'CNIC', 'remarks': 'GOOD', 'URL': 'xxxxxxxxxx', 'format': '.JPG', 'empId': 'EMP001', 'expiration': '19-07-2025', 'size': '14 gb'}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1329.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1335.png', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}, {'URL': 'https://nastecsol-hr-store.s3.amazonaws.com/undefined_ATT1357.pdf', 'type': 'Doc_Uploaded_EMP', 'remarks': '', 'format': '', 'empId': '', 'expiration': '', 'size': ''}], 'createdBy': 'EMP103', 'branchId': '66cd76b107aed2eef86b88f1', 'departmentId': '66cd772f07aed2eef86b88f6', 'organizationId': '66cd767307aed2eef86b88ed', '__v': 4, 'leaveBalance': {'annualLeave': {'currentMonth': 'October', 'entitlement': 21, 'remaining': 21, 'used': 0}, 'casualLeave': {'entitlement': 2, 'remaining': 1, 'used': 1}, 'sickLeave': {'entitlement': 120, 'remaining': 120, 'used': 0}, 'shortLeavesMonthlyBal': {'shortLeavesMinutes': 600}}, 'updatedAt': '2025-05-13T11:34:21.972Z'}
2025-05-13 18:28:26,336 - hr_assistant - INFO - Team data request to: https://dev.nashrms.com/api/branches/getTeamData/66cd76b107aed2eef86b88f1/66cd772f07aed2eef86b88f6/6711f83cbb8ea69acefdb5a4
2025-05-13 18:28:27,233 - hr_assistant - INFO - Successfully retrieved team data for manager EMP101 with 28 team members
2025-05-13 18:28:27,234 - hr_assistant - INFO - Team attendance request to: https://dev.nashrms.com/api/c-emp-attendance/getDataByEmployeeId/66d8250f99b629cbdb2e0f3a,66d825a399b629cbdb2e0f54,671a4dc5c67936eae80490cb,6803ae3f4ce909a1363894c1,6803bf914ce909a13638958c,6803ee1f4ce909a1363897ad,68075caa8428eafcbc43c1aa,68077a736a3f0d5369367749,68077b7d6a3f0d53693677ba,68077bc26a3f0d53693677db,6814b1a3fbcb55bc3e43f4af,6814b331fbcb55bc3e43f4e5,6814b578fbcb55bc3e43f5d7,68185056d39d1d952690640c,6818539cd39d1d95269064a9,681854a9d39d1d95269064f7,68186fd4521fa9b1c65f931a,6818719d521fa9b1c65f9354,681873b811ba5161216c5e3b,68189a70a4d2a5b4dddbf398,6818ab0fde60709ccfe2f8aa,68199249de60709ccfe2fd63,6819ceeddc5723908f41c4ee,6819d05cdc5723908f41c528,6819d142dc5723908f41c5c4,6821e0ee261d5ca0c6410fef,6821e135362867de478d6be3,6821e363362867de478d6c5d/2025-05-13/2025-05-06?page=0&limit=50
2025-05-13 18:28:29,015 - hr_assistant - INFO - Successfully retrieved team attendance data for manager: EMP101
2025-05-13 18:28:34,712 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/runs/run_PluwLMNXWqPVMXORZenuzupt/submit_tool_outputs "HTTP/1.1 200 OK"
2025-05-13 18:28:37,504 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/runs/run_PluwLMNXWqPVMXORZenuzupt "HTTP/1.1 200 OK"
2025-05-13 18:28:40,275 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/runs/run_PluwLMNXWqPVMXORZenuzupt "HTTP/1.1 200 OK"
2025-05-13 18:28:43,319 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/runs/run_PluwLMNXWqPVMXORZenuzupt "HTTP/1.1 200 OK"
2025-05-13 18:28:46,023 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/runs/run_PluwLMNXWqPVMXORZenuzupt "HTTP/1.1 200 OK"
2025-05-13 18:28:46,696 - httpx - INFO - HTTP Request: GET https://api.openai.com/v1/threads/thread_sAINQ0COZrQBnJykv2UnXddy/messages "HTTP/1.1 200 OK"
2025-05-13 18:28:46,702 - hr_assistant - INFO - Chat request received for employee: EMP101
2025-05-13 18:28:46,702 - hr_assistant - INFO - Using cached employee data for employee EMP101
2025-05-13 18:28:46,702 - hr_assistant - INFO - Employee EMP101 already greeted today, sending minimal greeting
